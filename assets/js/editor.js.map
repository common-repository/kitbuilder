{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "assets/dev/js/editor/behaviors/duplicate.js",
    "assets/dev/js/editor/behaviors/handle-duplicate.js",
    "assets/dev/js/editor/behaviors/inner-tabs.js",
    "assets/dev/js/editor/behaviors/resizable.js",
    "assets/dev/js/editor/behaviors/sortable.js",
    "assets/dev/js/editor/components/revisions/collection.js",
    "assets/dev/js/editor/components/revisions/empty-view.js",
    "assets/dev/js/editor/components/revisions/manager.js",
    "assets/dev/js/editor/components/revisions/model.js",
    "assets/dev/js/editor/components/revisions/panel-page.js",
    "assets/dev/js/editor/components/revisions/view.js",
    "assets/dev/js/editor/components/template-library/behaviors/insert-template.js",
    "assets/dev/js/editor/components/template-library/collections/templates.js",
    "assets/dev/js/editor/components/template-library/manager.js",
    "assets/dev/js/editor/components/template-library/models/template.js",
    "assets/dev/js/editor/components/template-library/views/layout.js",
    "assets/dev/js/editor/components/template-library/views/parts/header-parts/back.js",
    "assets/dev/js/editor/components/template-library/views/parts/header-parts/logo.js",
    "assets/dev/js/editor/components/template-library/views/parts/header-parts/menu.js",
    "assets/dev/js/editor/components/template-library/views/parts/header-parts/preview.js",
    "assets/dev/js/editor/components/template-library/views/parts/header-parts/save.js",
    "assets/dev/js/editor/components/template-library/views/parts/header.js",
    "assets/dev/js/editor/components/template-library/views/parts/import.js",
    "assets/dev/js/editor/components/template-library/views/parts/loading.js",
    "assets/dev/js/editor/components/template-library/views/parts/preview.js",
    "assets/dev/js/editor/components/template-library/views/parts/save-template.js",
    "assets/dev/js/editor/components/template-library/views/parts/templates-empty.js",
    "assets/dev/js/editor/components/template-library/views/parts/templates.js",
    "assets/dev/js/editor/components/template-library/views/template/base.js",
    "assets/dev/js/editor/components/template-library/views/template/local.js",
    "assets/dev/js/editor/components/template-library/views/template/remote.js",
    "assets/dev/js/editor/editor.js",
    "assets/dev/js/editor/layouts/edit-mode.js",
    "assets/dev/js/editor/layouts/panel/footer.js",
    "assets/dev/js/editor/layouts/panel/header.js",
    "assets/dev/js/editor/layouts/panel/pages/editor.js",
    "assets/dev/js/editor/layouts/panel/pages/elements/collections/categories.js",
    "assets/dev/js/editor/layouts/panel/pages/elements/collections/elements.js",
    "assets/dev/js/editor/layouts/panel/pages/elements/elements.js",
    "assets/dev/js/editor/layouts/panel/pages/elements/models/element.js",
    "assets/dev/js/editor/layouts/panel/pages/elements/views/categories.js",
    "assets/dev/js/editor/layouts/panel/pages/elements/views/category.js",
    "assets/dev/js/editor/layouts/panel/pages/elements/views/element.js",
    "assets/dev/js/editor/layouts/panel/pages/elements/views/elements.js",
    "assets/dev/js/editor/layouts/panel/pages/elements/views/search.js",
    "assets/dev/js/editor/layouts/panel/pages/menu/menu.js",
    "assets/dev/js/editor/layouts/panel/pages/menu/views/item.js",
    "assets/dev/js/editor/layouts/panel/pages/page-settings/page-settings.js",
    "assets/dev/js/editor/layouts/panel/panel.js",
    "assets/dev/js/editor/models/base-settings.js",
    "assets/dev/js/editor/models/column-settings.js",
    "assets/dev/js/editor/models/element.js",
    "assets/dev/js/editor/models/section-settings.js",
    "assets/dev/js/editor/models/widget-settings.js",
    "assets/dev/js/editor/utils/ajax.js",
    "assets/dev/js/editor/utils/conditions.js",
    "assets/dev/js/editor/utils/controls-css-parser.js",
    "assets/dev/js/editor/utils/heartbeat.js",
    "assets/dev/js/editor/utils/helpers.js",
    "assets/dev/js/editor/utils/hot-keys.js",
    "assets/dev/js/editor/utils/images-manager.js",
    "assets/dev/js/editor/utils/introduction.js",
    "assets/dev/js/editor/utils/jquery-html5-dnd.js",
    "assets/dev/js/editor/utils/jquery-serialize-object.js",
    "assets/dev/js/editor/utils/page-settings.js",
    "assets/dev/js/editor/utils/presets-factory.js",
    "assets/dev/js/editor/utils/stylesheet.js",
    "assets/dev/js/editor/views/base-element.js",
    "assets/dev/js/editor/views/base-sections-container.js",
    "assets/dev/js/editor/views/column.js",
    "assets/dev/js/editor/views/controls-stack.js",
    "assets/dev/js/editor/views/controls/base-multiple.js",
    "assets/dev/js/editor/views/controls/base-units.js",
    "assets/dev/js/editor/views/controls/base.js",
    "assets/dev/js/editor/views/controls/box-shadow.js",
    "assets/dev/js/editor/views/controls/choose.js",
    "assets/dev/js/editor/views/controls/code.js",
    "assets/dev/js/editor/views/controls/color.js",
    "assets/dev/js/editor/views/controls/date-time.js",
    "assets/dev/js/editor/views/controls/dimensions.js",
    "assets/dev/js/editor/views/controls/font.js",
    "assets/dev/js/editor/views/controls/gallery.js",
    "assets/dev/js/editor/views/controls/icon.js",
    "assets/dev/js/editor/views/controls/image-dimensions.js",
    "assets/dev/js/editor/views/controls/media.js",
    "assets/dev/js/editor/views/controls/order.js",
    "assets/dev/js/editor/views/controls/repeater-row.js",
    "assets/dev/js/editor/views/controls/repeater.js",
    "assets/dev/js/editor/views/controls/section.js",
    "assets/dev/js/editor/views/controls/select2.js",
    "assets/dev/js/editor/views/controls/slider.js",
    "assets/dev/js/editor/views/controls/structure.js",
    "assets/dev/js/editor/views/controls/switcher.js",
    "assets/dev/js/editor/views/controls/tab.js",
    "assets/dev/js/editor/views/controls/url.js",
    "assets/dev/js/editor/views/controls/wp_widget.js",
    "assets/dev/js/editor/views/controls/wysiwyg.js",
    "assets/dev/js/editor/views/element-empty.js",
    "assets/dev/js/editor/views/preview.js",
    "assets/dev/js/editor/views/section.js",
    "assets/dev/js/editor/views/widget.js",
    "assets/dev/js/utils/hooks.js",
    "assets/dev/js/utils/module.js",
    "assets/dev/js/utils/view-module.js"
  ],
  "names": [],
  "mappings": "AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7OA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3gBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/aA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "var HandleAddDuplicateBehavior;\n\nHandleAddDuplicateBehavior = Marionette.Behavior.extend( {\n\n\tonChildviewClickNew: function( childView ) {\n\t\tvar currentIndex = childView.$el.index() + 1;\n\n\t\tthis.addChild( { at: currentIndex } );\n\t},\n\n\tonRequestNew: function() {\n\t\tthis.addChild();\n\t},\n\n\taddChild: function( options ) {\n\t\tif ( this.view.isCollectionFilled() ) {\n\t\t\treturn;\n\t\t}\n\n\t\toptions = options || {};\n\n\t\tvar newItem = {\n\t\t\tid: kitbuilder.helpers.getUniqueID(),\n\t\t\telType: this.view.getChildType()[0],\n\t\t\tsettings: {},\n\t\t\telements: []\n\t\t};\n\n\t\tthis.view.addChildModel( newItem, options );\n\t}\n} );\n\nmodule.exports = HandleAddDuplicateBehavior;\n",
    "var HandleDuplicateBehavior;\n\nHandleDuplicateBehavior = Marionette.Behavior.extend( {\n\n\tonChildviewRequestDuplicate: function( childView ) {\n\t\tif ( this.view.isCollectionFilled() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar currentIndex = this.view.collection.indexOf( childView.model ),\n\t\t\tnewModel = childView.model.clone();\n\n\t\tthis.view.addChildModel( newModel, { at: currentIndex + 1 } );\n\t}\n} );\n\nmodule.exports = HandleDuplicateBehavior;\n",
    "var InnerTabsBehavior;\n\nInnerTabsBehavior = Marionette.Behavior.extend( {\n\n\tonRenderCollection: function() {\n\t\tthis.handleInnerTabs( this.view );\n\t},\n\n\thandleInnerTabs: function( parent ) {\n\t\tvar closedClass = 'kitbuilder-tab-close',\n\t\t\tactiveClass = 'kitbuilder-tab-active',\n\t\t\ttabsWrappers = parent.children.filter( function( view ) {\n\t\t\t\treturn 'tabs' === view.model.get( 'type' );\n\t\t\t} );\n\n\t\t\t_.each( tabsWrappers, function( view ) {\n\t\t\t\tview.$el.find( '.kitbuilder-control-content' ).remove();\n\n\t\t\t\tvar tabsId = view.model.get( 'name' ),\n\t\t\t\ttabs = parent.children.filter( function( childView ) {\n\t\t\t\t\treturn ( 'tab' === childView.model.get( 'type' ) && childView.model.get( 'tabs_wrapper' ) === tabsId );\n\t\t\t\t} );\n\n\t\t\t\t_.each( tabs, function( childView, index ) {\n\t\t\t\t\tview._addChildView( childView );\n\n\t\t\t\t\tvar tabId = childView.model.get( 'name' ),\n\t\t\t\t\tcontrolsUnderTab = parent.children.filter( function( view ) {\n\t\t\t\t\t\treturn ( tabId === view.model.get( 'inner_tab' ) );\n\t\t\t\t\t} );\n\n\t\t\t\t\tif ( 0 === index ) {\n\t\t\t\t\t\tchildView.$el.addClass( activeClass );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_.each( controlsUnderTab, function( view ) {\n\t\t\t\t\t\t\tview.$el.addClass( closedClass );\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\t},\n\n\tonChildviewControlTabClicked: function( childView ) {\n\t\tvar closedClass = 'kitbuilder-tab-close',\n\t\t\tactiveClass = 'kitbuilder-tab-active',\n\t\t\ttabClicked = childView.model.get( 'name' ),\n\t\t\tchildrenUnderTab = this.view.children.filter( function( view ) {\n\t\t\t\treturn ( 'tab' !== view.model.get( 'type' ) && childView.model.get( 'tabs_wrapper' ) === view.model.get( 'tabs_wrapper' ) );\n\t\t\t} ),\n\t\t\tsiblingTabs = this.view.children.filter( function( view ) {\n\t\t\t\treturn ( 'tab' === view.model.get( 'type' ) && childView.model.get( 'tabs_wrapper' ) === view.model.get( 'tabs_wrapper' ) );\n\t\t\t} );\n\n\t\t\t_.each( siblingTabs, function( view ) {\n\t\t\t\tview.$el.removeClass( activeClass );\n\t\t\t} );\n\n\t\t\tchildView.$el.addClass( activeClass );\n\n\t\t\t_.each( childrenUnderTab, function( view ) {\n\t\t\t\tif ( view.model.get( 'inner_tab' ) === tabClicked ) {\n\t\t\t\t\tview.$el.removeClass( closedClass );\n\t\t\t\t} else {\n\t\t\t\t\tview.$el.addClass( closedClass );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tkitbuilder.channels.data.trigger( 'scrollbar:update' );\n\t}\n} );\n\nmodule.exports = InnerTabsBehavior;\n",
    "var ResizableBehavior;\n\nResizableBehavior = Marionette.Behavior.extend( {\n\tdefaults: {\n\t\thandles: kitbuilder.config.is_rtl ? 'w' : 'e'\n\t},\n\n\tui: {\n\t\tcolumnTitle: '.column-title'\n\t},\n\n\tevents: {\n\t\tresizestart: 'onResizeStart',\n\t\tresizestop: 'onResizeStop',\n\t\tresize: 'onResize'\n\t},\n\n\tinitialize: function() {\n\t\tMarionette.Behavior.prototype.initialize.apply( this, arguments );\n\n\t\tthis.listenTo( kitbuilder.channels.dataEditMode, 'switch', this.onEditModeSwitched );\n\t},\n\n\tactive: function() {\n\t\tthis.deactivate();\n\n\t\tvar options = _.clone( this.options );\n\n\t\tdelete options.behaviorClass;\n\n\t\tvar $childViewContainer = this.getChildViewContainer(),\n\t\t\tdefaultResizableOptions = {},\n\t\t\tresizableOptions = _.extend( defaultResizableOptions, options );\n\n\t\t$childViewContainer.resizable( resizableOptions );\n\t},\n\n\tdeactivate: function() {\n\t\tif ( this.getChildViewContainer().resizable( 'instance' ) ) {\n\t\t\tthis.getChildViewContainer().resizable( 'destroy' );\n\t\t}\n\t},\n\n\tonEditModeSwitched: function( activeMode ) {\n\t\tif ( 'edit' === activeMode ) {\n\t\t\tthis.active();\n\t\t} else {\n\t\t\tthis.deactivate();\n\t\t}\n\t},\n\n\tonRender: function() {\n\t\tvar self = this;\n\n\t\t_.defer( function() {\n\t\t\tself.onEditModeSwitched( kitbuilder.channels.dataEditMode.request( 'activeMode' ) );\n\t\t} );\n\t},\n\n\tonDestroy: function() {\n\t\tthis.deactivate();\n\t},\n\n\tonResizeStart: function( event ) {\n\t\tevent.stopPropagation();\n\n\t\tthis.view.triggerMethod( 'request:resize:start' );\n\t},\n\n\tonResizeStop: function( event ) {\n\t\tevent.stopPropagation();\n\n\t\tthis.view.triggerMethod( 'request:resize:stop' );\n\t},\n\n\tonResize: function( event, ui ) {\n\t\tevent.stopPropagation();\n\n\t\tthis.view.triggerMethod( 'request:resize', ui );\n\t},\n\n\tgetChildViewContainer: function() {\n\t\treturn this.$el;\n\t}\n} );\n\nmodule.exports = ResizableBehavior;\n",
    "var SortableBehavior;\n\nSortableBehavior = Marionette.Behavior.extend( {\n\tdefaults: {\n\t\telChildType: 'widget'\n\t},\n\n\tevents: {\n\t\t'sortstart': 'onSortStart',\n\t\t'sortreceive': 'onSortReceive',\n\t\t'sortupdate': 'onSortUpdate',\n\t\t'sortstop': 'onSortStop',\n\t\t'sortover': 'onSortOver',\n\t\t'sortout': 'onSortOut'\n\t},\n\n\tinitialize: function() {\n\t\tthis.listenTo( kitbuilder.channels.dataEditMode, 'switch', this.onEditModeSwitched );\n\t\tthis.listenTo( kitbuilder.channels.deviceMode, 'change', this.onDeviceModeChange );\n\t},\n\n\tonEditModeSwitched: function( activeMode ) {\n\t\tif ( 'edit' === activeMode ) {\n\t\t\tthis.active();\n\t\t} else {\n\t\t\tthis.deactivate();\n\t\t}\n\t},\n\n\tonDeviceModeChange: function() {\n\t\tvar deviceMode = kitbuilder.channels.deviceMode.request( 'currentMode' );\n\n\t\tif ( 'desktop' === deviceMode ) {\n\t\t\tthis.active();\n\t\t} else {\n\t\t\tthis.deactivate();\n\t\t}\n\t},\n\n\tonRender: function() {\n\t\tvar self = this;\n\n\t\t_.defer( function() {\n\t\t\tself.onEditModeSwitched( kitbuilder.channels.dataEditMode.request( 'activeMode' ) );\n\t\t} );\n\t},\n\n\tonDestroy: function() {\n\t\tthis.deactivate();\n\t},\n\n\tactive: function() {\n\t\tif ( this.getChildViewContainer().sortable( 'instance' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar $childViewContainer = this.getChildViewContainer(),\n\t\t\tdefaultSortableOptions = {\n\t\t\t\tconnectWith: $childViewContainer.selector,\n\t\t\t\tcursor: 'move',\n\t\t\t\tplaceholder: 'kitbuilder-sortable-placeholder',\n\t\t\t\tcursorAt: {\n\t\t\t\t\ttop: 20,\n\t\t\t\t\tleft: 25\n\t\t\t\t},\n\t\t\t\thelper: _.bind( this._getSortableHelper, this )\n\t\t\t},\n\t\t\tsortableOptions = _.extend( defaultSortableOptions, this.view.getSortableOptions() ),\n            safeToSort = true;\n\n        $childViewContainer.each(function () {\n            if(typeof this.ownerDocument === 'undefined'){\n                safeToSort = false;\n            } else if(typeof this.ownerDocument.defaultView === 'undefined'){\n                safeToSort = false;\n            }\n        });\n\n        if(safeToSort){\n            $childViewContainer.sortable( sortableOptions );\n        }\n\n\t},\n\n\t_getSortableHelper: function( event, $item ) {\n\t\tvar model = this.view.collection.get( {\n\t\t\tcid: $item.data( 'model-cid' )\n\t\t} );\n\n\t\treturn '<div style=\"height: 84px; width: 125px;\" class=\"kitbuilder-sortable-helper kitbuilder-sortable-helper-' + model.get( 'elType' ) + '\"><div class=\"icon\"><i class=\"' + model.getIcon() + '\"></i></div><div class=\"kitbuilder-element-title-wrapper\"><div class=\"title\">' + model.getTitle() + '</div></div></div>';\n\t},\n\n\tdeactivate: function() {\n\t\tif ( this.getChildViewContainer().sortable( 'instance' ) ) {\n\t\t\tthis.getChildViewContainer().sortable( 'destroy' );\n\t\t}\n\t},\n\n\tonSortStart: function( event, ui ) {\n\t\tevent.stopPropagation();\n\n\t\tvar model = this.view.collection.get( {\n\t\t\tcid: ui.item.data( 'model-cid' )\n\t\t} );\n\n\t\tif ( 'column' === this.options.elChildType ) {\n\t\t\t// the following code is just for touch\n\t\t\tui.placeholder.addClass( 'kitbuilder-column' );\n\n\t\t\tvar uiData = ui.item.data( 'sortableItem' ),\n\t\t\t\tuiItems = uiData.items,\n\t\t\t\titemHeight = 0;\n\n\t\t\tuiItems.forEach( function( item ) {\n\t\t\t\tif ( item.item[0] === ui.item[0] ) {\n\t\t\t\t\titemHeight = item.height;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tui.placeholder.height( itemHeight );\n\n\t\t\t// ui.placeholder.addClass( 'kitbuilder-column kitbuilder-col-' + model.getSetting( 'size' ) );\n\t\t}\n\n\t\tkitbuilder.channels.data.trigger( model.get( 'elType' ) + ':drag:start' );\n\n\t\tkitbuilder.channels.data.reply( 'cache:' + model.cid, model );\n\t},\n\n\tonSortOver: function( event, ui ) {\n\t\tevent.stopPropagation();\n\n\t\tvar model = kitbuilder.channels.data.request( 'cache:' + ui.item.data( 'model-cid' ) );\n\n\t\tBackbone.$( event.target )\n\t\t\t.addClass( 'kitbuilder-draggable-over' )\n\t\t\t.attr( {\n\t\t\t\t'data-dragged-element': model.get( 'elType' ),\n\t\t\t\t'data-dragged-is-inner': model.get( 'isInner' )\n\t\t\t} );\n\n\t\tthis.$el.addClass( 'kitbuilder-dragging-on-child' );\n\t},\n\n\tonSortOut: function( event ) {\n\t\tevent.stopPropagation();\n\n\t\tBackbone.$( event.target )\n\t\t\t.removeClass( 'kitbuilder-draggable-over' )\n\t\t\t.removeAttr( 'data-dragged-element data-dragged-is-inner' );\n\n\t\tthis.$el.removeClass( 'kitbuilder-dragging-on-child' );\n\t},\n\n\tonSortReceive: function( event, ui ) {\n\t\tevent.stopPropagation();\n\n\t\tif ( this.view.isCollectionFilled() ) {\n\t\t\tBackbone.$( ui.sender ).sortable( 'cancel' );\n\t\t\treturn;\n\t\t}\n\n\t\tvar model = kitbuilder.channels.data.request( 'cache:' + ui.item.data( 'model-cid' ) ),\n\t\t\tdraggedElType = model.get( 'elType' ),\n\t\t\tdraggedIsInnerSection = 'section' === draggedElType && model.get( 'isInner' ),\n\t\t\ttargetIsInnerColumn = 'column' === this.view.getElementType() && this.view.isInner();\n\n\t\tif ( draggedIsInnerSection && targetIsInnerColumn ) {\n\t\t\tBackbone.$( ui.sender ).sortable( 'cancel' );\n\t\t\treturn;\n\t\t}\n\n\t\tvar newIndex = ui.item.parent().children().index( ui.item ),\n\t\t\tnewModel = new this.view.collection.model( model.toJSON( { copyHtmlCache: true } ) );\n\n\t\tthis.view.addChildModel( newModel, { at: newIndex } );\n\n\t\tkitbuilder.channels.data.trigger( draggedElType + ':drag:end' );\n\n\t\tmodel.destroy();\n\t},\n\n\tonSortUpdate: function( event, ui ) {\n\t\tevent.stopPropagation();\n\n\t\tvar model = this.view.collection.get( ui.item.attr( 'data-model-cid' ) );\n\t\tif ( model ) {\n\t\t\tkitbuilder.channels.data.trigger( model.get( 'elType' ) + ':drag:end' );\n\t\t}\n\t},\n\n\tonSortStop: function( event, ui ) {\n\t\tevent.stopPropagation();\n\n\t\tvar $childElement = ui.item,\n\t\t\tcollection = this.view.collection,\n\t\t\tmodel = collection.get( $childElement.attr( 'data-model-cid' ) ),\n\t\t\tnewIndex = $childElement.parent().children().index( $childElement );\n\n\t\tif ( this.getChildViewContainer()[0] === ui.item.parent()[0] ) {\n\t\t\tif ( null === ui.sender && model ) {\n\t\t\t\tvar oldIndex = collection.indexOf( model );\n\n\t\t\t\tif ( oldIndex !== newIndex ) {\n\t\t\t\t\tvar child = this.view.children.findByModelCid( model.cid );\n\n\t\t\t\t\tchild._isRendering = true;\n\n\t\t\t\t\tcollection.remove( model );\n\n\t\t\t\t\tthis.view.addChildModel( model, { at: newIndex } );\n\n\t\t\t\t\tkitbuilder.setFlagEditorChange( true );\n\t\t\t\t}\n\n\t\t\t\tkitbuilder.channels.data.trigger( model.get( 'elType' ) + ':drag:end' );\n\t\t\t}\n\t\t}\n\t},\n\n\tonAddChild: function( view ) {\n\t\tview.$el.attr( 'data-model-cid', view.model.cid );\n\t},\n\n\tgetChildViewContainer: function() {\n\t\tif ( 'function' === typeof this.view.getChildViewContainer ) {\n\t\t\t// CompositeView\n\t\t\treturn this.view.getChildViewContainer( this.view );\n\t\t} else {\n\t\t\t// CollectionView\n\t\t\treturn this.$el;\n\t\t}\n\t}\n} );\n\nmodule.exports = SortableBehavior;\n",
    "var RevisionModel = require( './model' );\n\nmodule.exports = Backbone.Collection.extend( {\n\tmodel: RevisionModel\n} );\n",
    "module.exports = Marionette.ItemView.extend( {\n\ttemplate: '#tmpl-kitbuilder-panel-revisions-no-revisions',\n\n\tid: 'kitbuilder-panel-revisions-no-revisions',\n\n\tclassName: 'kitbuilder-panel-nerd-box'\n} );\n",
    "var RevisionsCollection = require( './collection' ),\n\tRevisionsPageView = require( './panel-page' ),\n\tRevisionsEmptyView = require( './empty-view' ),\n\tRevisionsManager;\n\nRevisionsManager = function() {\n\tvar self = this,\n\t\trevisions;\n\n\tvar addPanelPage = function() {\n\t\tkitbuilder.getPanelView().addPage( 'revisionsPage', {\n\t\t\tgetView: function() {\n\t\t\t\tif ( revisions.length ) {\n\t\t\t\t\treturn RevisionsPageView;\n\t\t\t\t}\n\n\t\t\t\treturn RevisionsEmptyView;\n\t\t\t},\n\t\t\ttitle: kitbuilder.translate( 'revision_history' ),\n\t\t\toptions: {\n\t\t\t\tcollection: revisions\n\t\t\t}\n\t\t} );\n\t};\n\n\tvar onEditorSaved = function( data ) {\n\t\tif ( data.last_revision ) {\n\t\t\tself.addRevision( data.last_revision );\n\t\t}\n\n\t\tvar revisionsToKeep = revisions.filter( function( revision ) {\n\t\t\treturn -1 !== data.revisions_ids.indexOf( revision.get( 'id' ) );\n\t\t} );\n\n\t\trevisions.reset( revisionsToKeep );\n\t};\n\n\tvar attachEvents = function() {\n\t\tkitbuilder.channels.editor.on( 'saved', onEditorSaved );\n\t};\n\n\tvar addHotKeys = function() {\n\t\tvar H_KEY = 72,\n\t\t\tUP_ARROW_KEY = 38,\n\t\t\tDOWN_ARROW_KEY = 40;\n\n\t\tvar navigationHandler = {\n\t\t\tisWorthHandling: function() {\n\t\t\t\tvar panel = kitbuilder.getPanelView();\n\n\t\t\t\tif ( 'revisionsPage' !== panel.getCurrentPageName() ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar revisionsPage = panel.getCurrentPageView();\n\n\t\t\t\treturn revisionsPage.currentPreviewId && revisionsPage.currentPreviewItem && revisionsPage.children.length > 1;\n\t\t\t},\n\t\t\thandle: function( event ) {\n\t\t\t\tkitbuilder.getPanelView().getCurrentPageView().navigate( UP_ARROW_KEY === event.which );\n\t\t\t}\n\t\t};\n\n\t\tkitbuilder.hotKeys.addHotKeyHandler( UP_ARROW_KEY, 'revisionNavigation', navigationHandler );\n\n\t\tkitbuilder.hotKeys.addHotKeyHandler( DOWN_ARROW_KEY, 'revisionNavigation', navigationHandler );\n\n\t\tkitbuilder.hotKeys.addHotKeyHandler( H_KEY, 'showRevisionsPage', {\n\t\t\tisWorthHandling: function( event ) {\n\t\t\t\treturn kitbuilder.hotKeys.isControlEvent( event ) && event.shiftKey;\n\t\t\t},\n\t\t\thandle: function() {\n\t\t\t\tkitbuilder.getPanelView().setPage( 'revisionsPage' );\n\t\t\t}\n\t\t} );\n\t};\n\n\tthis.addRevision = function( revisionData ) {\n\t\trevisions.add( revisionData, { at: 0 } );\n\n\t\tvar panel = kitbuilder.getPanelView();\n\n\t\tif ( panel.getCurrentPageView() instanceof RevisionsEmptyView ) {\n\t\t\tpanel.setPage( 'revisionsPage' );\n\t\t}\n\t};\n\n\tthis.deleteRevision = function( revisionModel, options ) {\n\t\tvar params = {\n\t\t\tdata: {\n\t\t\t\tid: revisionModel.get( 'id' )\n\t\t\t},\n\t\t\tsuccess: function() {\n\t\t\t\tif ( options.success ) {\n\t\t\t\t\toptions.success();\n\t\t\t\t}\n\n\t\t\t\trevisionModel.destroy();\n\n\t\t\t\tif ( ! revisions.length ) {\n\t\t\t\t\tkitbuilder.getPanelView().setPage( 'revisionsPage' );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tif ( options.error ) {\n\t\t\tparams.error = options.error;\n\t\t}\n\n\t\tkitbuilder.ajax.send( 'delete_revision', params );\n\t};\n\n\tthis.init = function() {\n\t\trevisions = new RevisionsCollection( kitbuilder.config.revisions );\n\n\t\tattachEvents();\n\n\t\taddHotKeys();\n\n\t\tkitbuilder.on( 'preview:loaded', addPanelPage );\n\t};\n};\n\nmodule.exports = new RevisionsManager();\n",
    "var RevisionModel;\n\nRevisionModel = Backbone.Model.extend();\n\nRevisionModel.prototype.sync = function() {\n\treturn null;\n};\n\nmodule.exports = RevisionModel;\n",
    "module.exports = Marionette.CompositeView.extend( {\n\tid: 'kitbuilder-panel-revisions',\n\n\ttemplate: '#tmpl-kitbuilder-panel-revisions',\n\n\tchildView: require( './view' ),\n\n\tchildViewContainer: '#kitbuilder-revisions-list',\n\n\tui: {\n\t\tdiscard: '.kitbuilder-panel-scheme-discard .kitbuilder-button',\n\t\tapply: '.kitbuilder-panel-scheme-save .kitbuilder-button'\n\t},\n\n\tevents: {\n\t\t'click @ui.discard': 'onDiscardClick',\n\t\t'click @ui.apply': 'onApplyClick'\n\t},\n\n\tisRevisionApplied: false,\n\n\tjqueryXhr: null,\n\n\tcurrentPreviewId: null,\n\n\tcurrentPreviewItem: null,\n\n\tinitialize: function() {\n\t\tthis.listenTo( kitbuilder.channels.editor, 'saved', this.onEditorSaved );\n\t},\n\n\tgetRevisionViewData: function( revisionView ) {\n\t\tvar self = this,\n\t\t\trevisionID = revisionView.model.get( 'id' );\n\n\t\tself.jqueryXhr = kitbuilder.ajax.send( 'get_revision_data', {\n\t\t\tdata: {\n\t\t\t\tid: revisionID\n\t\t\t},\n\t\t\tsuccess: function( data ) {\n\t\t\t\tself.setEditorData( data );\n\n\t\t\t\tself.setRevisionsButtonsActive( true );\n\n\t\t\t\tself.jqueryXhr = null;\n\n\t\t\t\trevisionView.$el.removeClass( 'kitbuilder-revision-item-loading' );\n\n\t\t\t\tself.enterReviewMode();\n\t\t\t},\n\t\t\terror: function( data ) {\n\t\t\t\trevisionView.$el.removeClass( 'kitbuilder-revision-item-loading' );\n\n\t\t\t\tif ( 'abort' === self.jqueryXhr.statusText ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tself.currentPreviewItem = null;\n\n\t\t\t\tself.currentPreviewId = null;\n\n\t\t\t\talert( 'An error occurred' );\n\t\t\t}\n\t\t} );\n\t},\n\n\tsetRevisionsButtonsActive: function( active ) {\n\t\tthis.ui.apply.add( this.ui.discard ).prop( 'disabled', ! active );\n\t},\n\n\tsetEditorData: function( data ) {\n\t\tvar collection = kitbuilder.getRegion( 'sections' ).currentView.collection;\n\n\t\tcollection.reset( data );\n\t},\n\n\tdeleteRevision: function( revisionView ) {\n\t\tvar self = this;\n\n\t\trevisionView.$el.addClass( 'kitbuilder-revision-item-loading' );\n\n\t\tkitbuilder.revisions.deleteRevision( revisionView.model, {\n\t\t\tsuccess: function() {\n\t\t\t\tif ( revisionView.model.get( 'id' ) === self.currentPreviewId ) {\n\t\t\t\t\tself.onDiscardClick();\n\t\t\t\t}\n\n\t\t\t\tself.currentPreviewId = null;\n\t\t\t},\n\t\t\terror: function( data ) {\n\t\t\t\trevisionView.$el.removeClass( 'kitbuilder-revision-item-loading' );\n\n\t\t\t\talert( 'An error occurred' );\n\t\t\t}\n\t\t} );\n\t},\n\n\tenterReviewMode: function() {\n\t\tkitbuilder.changeEditMode( 'review' );\n\t},\n\n\texitReviewMode: function() {\n\t\tkitbuilder.changeEditMode( 'edit' );\n\t},\n\n\tnavigate: function( reverse ) {\n\t\tvar currentPreviewItemIndex = this.collection.indexOf( this.currentPreviewItem.model ),\n\t\t\trequiredIndex = reverse ? currentPreviewItemIndex - 1 : currentPreviewItemIndex + 1;\n\n\t\tif ( requiredIndex < 0 ) {\n\t\t\trequiredIndex = this.collection.length - 1;\n\t\t}\n\n\t\tif ( requiredIndex >= this.collection.length ) {\n\t\t\trequiredIndex = 0;\n\t\t}\n\n\t\tthis.children.findByIndex( requiredIndex ).ui.detailsArea.trigger( 'click' );\n\t},\n\n\tonEditorSaved: function() {\n\t\tthis.exitReviewMode();\n\n\t\tthis.setRevisionsButtonsActive( false );\n\t},\n\n\tonApplyClick: function() {\n\t\tkitbuilder.getPanelView().getChildView( 'footer' )._publishBuilder();\n\n\t\tthis.isRevisionApplied = true;\n\n\t\tthis.currentPreviewId = null;\n\t},\n\n\tonDiscardClick: function() {\n\t\tthis.setEditorData( kitbuilder.config.data );\n\n\t\tkitbuilder.setFlagEditorChange( this.isRevisionApplied );\n\n\t\tthis.isRevisionApplied = false;\n\n\t\tthis.setRevisionsButtonsActive( false );\n\n\t\tthis.currentPreviewId = null;\n\n\t\tthis.exitReviewMode();\n\n\t\tif ( this.currentPreviewItem ) {\n\t\t\tthis.currentPreviewItem.$el.removeClass( 'kitbuilder-revision-current-preview' );\n\t\t}\n\t},\n\n\tonDestroy: function() {\n\t\tif ( this.currentPreviewId ) {\n\t\t\tthis.onDiscardClick();\n\t\t}\n\t},\n\n\tonRenderCollection: function() {\n\t\tif ( ! this.currentPreviewId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar currentPreviewModel = this.collection.findWhere({ id: this.currentPreviewId });\n\n\t\tthis.currentPreviewItem = this.children.findByModelCid( currentPreviewModel.cid );\n\n\t\tthis.currentPreviewItem.$el.addClass( 'kitbuilder-revision-current-preview' );\n\t},\n\n\tonChildviewDetailsAreaClick: function( childView ) {\n\t\tvar self = this,\n\t\t\trevisionID = childView.model.get( 'id' );\n\n\t\tif ( revisionID === self.currentPreviewId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.jqueryXhr ) {\n\t\t\tthis.jqueryXhr.abort();\n\t\t}\n\n\t\tif ( self.currentPreviewItem ) {\n\t\t\tself.currentPreviewItem.$el.removeClass( 'kitbuilder-revision-current-preview' );\n\t\t}\n\n\t\tchildView.$el.addClass( 'kitbuilder-revision-current-preview kitbuilder-revision-item-loading' );\n\n\t\tif ( kitbuilder.isEditorChanged() && null === self.currentPreviewId ) {\n\t\t\tkitbuilder.saveEditor( {\n\t\t\t\tstatus: 'autosave',\n\t\t\t\tonSuccess: function() {\n\t\t\t\t\tself.getRevisionViewData( childView );\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\t\t\tself.getRevisionViewData( childView );\n\t\t}\n\n\t\tself.currentPreviewItem = childView;\n\n\t\tself.currentPreviewId = revisionID;\n\t},\n\n\tonChildviewDeleteClick: function( childView ) {\n\t\tvar self = this,\n\t\t\ttype = childView.model.get( 'type' ),\n\t\t\tid = childView.model.get( 'id' );\n\n\t\tvar removeDialog = kitbuilder.dialogsManager.createWidget( 'confirm', {\n\t\t\tmessage: kitbuilder.translate( 'dialog_confirm_delete', [ type ] ),\n\t\t\theaderMessage: kitbuilder.translate( 'delete_element', [ type ] ),\n\t\t\tstrings: {\n\t\t\t\tconfirm: kitbuilder.translate( 'delete' ),\n\t\t\t\tcancel: kitbuilder.translate( 'cancel' )\n\t\t\t},\n\t\t\tdefaultOption: 'confirm',\n\t\t\tonConfirm: function() {\n\t\t\t\tself.deleteRevision( childView );\n\t\t\t}\n\t\t} );\n\n\t\tremoveDialog.show();\n\t}\n} );\n",
    "module.exports =  Marionette.ItemView.extend( {\n\ttemplate: '#tmpl-kitbuilder-panel-revisions-revision-item',\n\n\tclassName: 'kitbuilder-revision-item',\n\n\tui: {\n\t\tdetailsArea: '.kitbuilder-revision-item__details',\n\t\tdeleteButton: '.kitbuilder-revision-item__tools-delete'\n\t},\n\n\ttriggers: {\n\t\t'click @ui.detailsArea': 'detailsArea:click',\n\t\t'click @ui.deleteButton': 'delete:click'\n\t}\n} );\n",
    "module.exports = Marionette.Behavior.extend( {\n\tui: {\n\t\tinsertButton: '.kitbuilder-template-library-template-insert'\n\t},\n\n\tevents: {\n\t\t'click @ui.insertButton': 'onInsertButtonClick'\n\t},\n\n\tonInsertButtonClick: function() {\n\t\tvar action = this.ui.insertButton.data( 'action' );\n\n\t\tif ( 'insert' === action ) {\n\t\t\tkitbuilder.templates.importTemplate( this.view.model );\n\t\t} else {\n\t\t\topen( kitbuilder.config.pro_library_url, '_blank' );\n\t\t}\n\t}\n} );\n",
    "var TemplateLibraryTemplateModel = require( 'kitbuilder-templates/models/template' ),\n\tTemplateLibraryCollection;\n\nTemplateLibraryCollection = Backbone.Collection.extend( {\n\tmodel: TemplateLibraryTemplateModel\n} );\n\nmodule.exports = TemplateLibraryCollection;\n",
    "var TemplateLibraryLayoutView = require( 'kitbuilder-templates/views/layout' ),\n\tTemplateLibraryCollection = require( 'kitbuilder-templates/collections/templates' ),\n\tTemplateLibraryManager;\n\nTemplateLibraryManager = function() {\n\tvar self = this,\n\t\tmodal,\n\t\tdeleteDialog,\n\t\terrorDialog,\n\t\tlayout,\n\t\ttemplateTypes = {},\n\t\ttemplatesCollection;\n\n\tvar initLayout = function() {\n\t\tlayout = new TemplateLibraryLayoutView();\n\t};\n\n\tvar registerDefaultTemplateTypes = function() {\n\t\tvar data = {\n\t\t\tsaveDialog: {\n\t\t\t\tdescription: kitbuilder.translate( 'save_your_template_description' )\n\t\t\t},\n\t\t\tajaxParams: {\n\t\t\t\tsuccess: function( data ) {\n\t\t\t\t\tself.getTemplatesCollection().add( data );\n\n\t\t\t\t\tself.setTemplatesSource( 'local' );\n\n\t\t\t\t\tself.showTemplates();\n\t\t\t\t},\n\t\t\t\terror: function( data ) {\n\t\t\t\t\tself.showErrorDialog( data );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t_.each( [ 'page', 'section' ], function( type ) {\n\t\t\tvar safeData = Backbone.$.extend( true, {}, data, {\n\t\t\t\tsaveDialog: {\n\t\t\t\t\ttitle: kitbuilder.translate( 'save_your_template', [ kitbuilder.translate( type ) ] )\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tself.registerTemplateType( type, safeData );\n\t\t} );\n\t};\n\n\tthis.init = function() {\n\t\tregisterDefaultTemplateTypes();\n\t};\n\n\tthis.getTemplateTypes = function( type ) {\n\t\tif ( type ) {\n\t\t\treturn templateTypes[ type ];\n\t\t}\n\n\t\treturn templateTypes;\n\t};\n\n\tthis.registerTemplateType = function( type, data ) {\n\t\ttemplateTypes[ type ] = data;\n\t};\n\n\tthis.deleteTemplate = function( templateModel ) {\n\t\tvar dialog = self.getDeleteDialog();\n\n\t\tdialog.onConfirm = function() {\n\t\t\tkitbuilder.ajax.send( 'delete_template', {\n\t\t\t\tdata: {\n\t\t\t\t\tsource: templateModel.get( 'source' ),\n\t\t\t\t\ttemplate_id: templateModel.get( 'template_id' )\n\t\t\t\t},\n\t\t\t\tsuccess: function() {\n\t\t\t\t\ttemplatesCollection.remove( templateModel, { silent: true } );\n\n\t\t\t\t\tself.showTemplates();\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n\t\tdialog.show();\n\t};\n\n\tthis.importTemplate = function( templateModel ) {\n\t\tlayout.showLoadingView();\n\n\t\tself.requestTemplateContent( templateModel.get( 'source' ), templateModel.get( 'template_id' ), {\n\t\t\tsuccess: function( data ) {\n\t\t\t\tself.closeModal();\n\n\t\t\t\tkitbuilder.getRegion( 'sections' ).currentView.addChildModel( data );\n\t\t\t},\n\t\t\terror: function( data ) {\n\t\t\t\tself.showErrorDialog( data );\n\t\t\t}\n\t\t} );\n\t};\n\n\tthis.saveTemplate = function( type, data ) {\n\t\tvar templateType = templateTypes[ type ];\n\n\t\t_.extend( data, {\n\t\t\tsource: 'local',\n\t\t\ttype: type\n\t\t} );\n\n\t\tif ( templateType.prepareSavedData ) {\n\t\t\tdata = templateType.prepareSavedData( data );\n\t\t}\n\n\t\tdata.data = JSON.stringify( data.data );\n\n\t\tvar ajaxParams = { data: data };\n\n\t\tif ( templateType.ajaxParams ) {\n\t\t\t_.extend( ajaxParams, templateType.ajaxParams );\n\t\t}\n\n\t\tkitbuilder.ajax.send( 'save_template', ajaxParams );\n\t};\n\n\tthis.requestTemplateContent = function( source, id, ajaxOptions ) {\n\t\tvar options = {\n\t\t\tdata: {\n\t\t\t\tsource: source,\n\t\t\t\tedit_mode: true,\n\t\t\t\ttemplate_id: id\n\t\t\t}\n\t\t};\n\n\t\tif ( ajaxOptions ) {\n\t\t\t_.extend( options, ajaxOptions );\n\t\t}\n\n\t\treturn kitbuilder.ajax.send( 'get_template_content', options );\n\t};\n\n\tthis.getDeleteDialog = function() {\n\t\tif ( ! deleteDialog ) {\n\t\t\tdeleteDialog = kitbuilder.dialogsManager.createWidget( 'confirm', {\n\t\t\t\tid: 'kitbuilder-template-library-delete-dialog',\n\t\t\t\theaderMessage: kitbuilder.translate( 'delete_template' ),\n\t\t\t\tmessage: kitbuilder.translate( 'delete_template_confirm' ),\n\t\t\t\tstrings: {\n\t\t\t\t\tconfirm: kitbuilder.translate( 'delete' )\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\treturn deleteDialog;\n\t};\n\n\tthis.getErrorDialog = function() {\n\t\tif ( ! errorDialog ) {\n\t\t\terrorDialog = kitbuilder.dialogsManager.createWidget( 'alert', {\n\t\t\t\tid: 'kitbuilder-template-library-error-dialog',\n\t\t\t\theaderMessage: kitbuilder.translate( 'an_error_occurred' )\n\t\t\t} );\n\t\t}\n\n\t\treturn errorDialog;\n\t};\n\n\tthis.getModal = function() {\n\t\tif ( ! modal ) {\n\t\t\tmodal = kitbuilder.dialogsManager.createWidget( 'lightbox', {\n\t\t\t\tid: 'kitbuilder-template-library-modal',\n\t\t\t\tcloseButton: false\n\t\t\t} );\n\t\t}\n\n\t\treturn modal;\n\t};\n\n\tthis.getLayout = function() {\n\t\treturn layout;\n\t};\n\n\tthis.getTemplatesCollection = function() {\n\t\treturn templatesCollection;\n\t};\n\n\tthis.requestRemoteTemplates = function( callback, forceUpdate ) {\n\t\tif ( templatesCollection && ! forceUpdate ) {\n\t\t\tif ( callback ) {\n\t\t\t\tcallback();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tkitbuilder.ajax.send( 'get_templates', {\n\t\t\tsuccess: function( data ) {\n\t\t\t\ttemplatesCollection = new TemplateLibraryCollection( data );\n\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t};\n\n\tthis.startModal = function( onModalReady ) {\n\t\tself.getModal().show();\n\n\t\tself.setTemplatesSource( 'local' );\n\n\t\tif ( ! layout ) {\n\t\t\tinitLayout();\n\t\t}\n\n\t\tlayout.showLoadingView();\n\n\t\tself.requestRemoteTemplates( function() {\n\t\t\tif ( onModalReady ) {\n\t\t\t\tonModalReady();\n\t\t\t}\n\t\t} );\n\t};\n\n\tthis.closeModal = function() {\n\t\tself.getModal().hide();\n\t};\n\n\tthis.setTemplatesSource = function( source, trigger ) {\n\t\tvar channel = kitbuilder.channels.templates;\n\n\t\tchannel.reply( 'filter:source', source );\n\n\t\tif ( trigger ) {\n\t\t\tchannel.trigger( 'filter:change' );\n\t\t}\n\t};\n\n\tthis.showTemplates = function() {\n\t\tlayout.showTemplatesView( templatesCollection );\n\t};\n\n\tthis.showTemplatesModal = function() {\n\t\tself.startModal( self.showTemplates );\n\t};\n\n\tthis.showErrorDialog = function( errorMessage ) {\n\t\tif ( 'object' === typeof errorMessage ) {\n\t\t\tvar message = '';\n\n\t\t\t_.each( errorMessage, function( error ) {\n\t\t\t\tmessage += '<div>' + error.message + '.</div>';\n\t\t\t} );\n\n\t\t\terrorMessage = message;\n\t\t} else if ( errorMessage ) {\n\t\t\terrorMessage += '.';\n\t\t} else {\n\t\t\terrorMessage = '<i>&#60;The error message is empty&#62;</i>';\n\t\t}\n\n\t\tself.getErrorDialog()\n\t\t    .setMessage( kitbuilder.translate( 'templates_request_error' ) + '<div id=\"kitbuilder-template-library-error-info\">' + errorMessage + '</div>' )\n\t\t    .show();\n\t};\n};\n\nmodule.exports = new TemplateLibraryManager();\n",
    "var TemplateLibraryTemplateModel;\n\nTemplateLibraryTemplateModel = Backbone.Model.extend( {\n\tdefaults: {\n\t\ttemplate_id: 0,\n\t\tname: '',\n\t\ttitle: '',\n\t\tsource: '',\n\t\ttype: '',\n\t\tauthor: '',\n\t\tthumbnail: '',\n\t\turl: '',\n\t\texport_link: '',\n\t\tcategories: [],\n\t\tkeywords: []\n\t}\n} );\n\nmodule.exports = TemplateLibraryTemplateModel;\n",
    "var TemplateLibraryHeaderView = require( 'kitbuilder-templates/views/parts/header' ),\n\tTemplateLibraryHeaderLogoView = require( 'kitbuilder-templates/views/parts/header-parts/logo' ),\n\tTemplateLibraryHeaderSaveView = require( 'kitbuilder-templates/views/parts/header-parts/save' ),\n\tTemplateLibraryHeaderMenuView = require( 'kitbuilder-templates/views/parts/header-parts/menu' ),\n\tTemplateLibraryHeaderPreviewView = require( 'kitbuilder-templates/views/parts/header-parts/preview' ),\n\tTemplateLibraryHeaderBackView = require( 'kitbuilder-templates/views/parts/header-parts/back' ),\n\tTemplateLibraryLoadingView = require( 'kitbuilder-templates/views/parts/loading' ),\n\tTemplateLibraryCollectionView = require( 'kitbuilder-templates/views/parts/templates' ),\n\tTemplateLibrarySaveTemplateView = require( 'kitbuilder-templates/views/parts/save-template' ),\n\tTemplateLibraryImportView = require( 'kitbuilder-templates/views/parts/import' ),\n\tTemplateLibraryPreviewView = require( 'kitbuilder-templates/views/parts/preview' ),\n\tTemplateLibraryLayoutView;\n\nTemplateLibraryLayoutView = Marionette.LayoutView.extend( {\n\tel: '#kitbuilder-template-library-modal',\n\n\tregions: {\n\t\tmodalContent: '.dialog-message',\n\t\tmodalHeader: '.dialog-widget-header'\n\t},\n\n\tinitialize: function() {\n\t\tthis.getRegion( 'modalHeader' ).show( new TemplateLibraryHeaderView() );\n\t},\n\n\tgetHeaderView: function() {\n\t\treturn this.getRegion( 'modalHeader' ).currentView;\n\t},\n\n\tgetTemplateActionButton: function( isPro ) {\n\t\tvar templateId = '#tmpl-kitbuilder-template-library-' + ( isPro ? 'get-pro-button' : 'insert-button' );\n\n\t\ttemplateId = kitbuilder.hooks.applyFilters( 'kitbuilder/editor/template-library/template/action-button', templateId );\n\n\t\tvar template = Marionette.TemplateCache.get( templateId );\n\n\t\treturn Marionette.Renderer.render( template );\n\t},\n\n\tshowLoadingView: function() {\n\t\tthis.modalContent.show( new TemplateLibraryLoadingView() );\n\t},\n\n\tshowTemplatesView: function( templatesCollection ) {\n\t\tthis.modalContent.show( new TemplateLibraryCollectionView( {\n\t\t\tcollection: templatesCollection\n\t\t} ) );\n\n\t\tvar headerView = this.getHeaderView();\n\n\t\theaderView.tools.show( new TemplateLibraryHeaderSaveView() );\n\t\theaderView.menuArea.show( new TemplateLibraryHeaderMenuView() );\n\t\theaderView.logoArea.show( new TemplateLibraryHeaderLogoView() );\n\t},\n\n\tshowImportView: function() {\n\t\tthis.modalContent.show( new TemplateLibraryImportView() );\n\t},\n\n\tshowSaveTemplateView: function( elementModel ) {\n\t\tthis.modalContent.show( new TemplateLibrarySaveTemplateView( { model: elementModel } ) );\n\n\t\tvar headerView = this.getHeaderView();\n\n\t\theaderView.tools.reset();\n\t\theaderView.menuArea.reset();\n\t\theaderView.logoArea.show( new TemplateLibraryHeaderLogoView() );\n\t},\n\n\tshowPreviewView: function( templateModel ) {\n\t\tthis.modalContent.show( new TemplateLibraryPreviewView( {\n\t\t\turl: templateModel.get( 'url' )\n\t\t} ) );\n\n\t\tvar headerView = this.getHeaderView();\n\n\t\theaderView.menuArea.reset();\n\n\t\theaderView.tools.show( new TemplateLibraryHeaderPreviewView( {\n\t\t\tmodel: templateModel\n\t\t} ) );\n\n\t\theaderView.logoArea.show( new TemplateLibraryHeaderBackView() );\n\t}\n} );\n\nmodule.exports = TemplateLibraryLayoutView;\n",
    "var TemplateLibraryHeaderBackView;\n\nTemplateLibraryHeaderBackView = Marionette.ItemView.extend( {\n\ttemplate: '#tmpl-kitbuilder-template-library-header-back',\n\n\tid: 'kitbuilder-template-library-header-preview-back',\n\n\tevents: {\n\t\t'click': 'onClick'\n\t},\n\n\tonClick: function() {\n\t\tkitbuilder.templates.showTemplates();\n\t}\n} );\n\nmodule.exports = TemplateLibraryHeaderBackView;\n",
    "var TemplateLibraryHeaderLogoView;\n\nTemplateLibraryHeaderLogoView = Marionette.ItemView.extend( {\n\ttemplate: '#tmpl-kitbuilder-template-library-header-logo',\n\n\tid: 'kitbuilder-template-library-header-logo',\n\n\tevents: {\n\t\t'click': 'onClick'\n\t},\n\n\tonClick: function() {\n\t\tkitbuilder.templates.setTemplatesSource( 'local' );\n\t\tkitbuilder.templates.showTemplates();\n\t}\n} );\n\nmodule.exports = TemplateLibraryHeaderLogoView;\n",
    "var TemplateLibraryHeaderMenuView;\n\nTemplateLibraryHeaderMenuView = Marionette.ItemView.extend( {\n\toptions: {\n\t\tactiveClass: 'kitbuilder-active'\n\t},\n\n\ttemplate: '#tmpl-kitbuilder-template-library-header-menu',\n\n\tid: 'kitbuilder-template-library-header-menu',\n\n\tui: {\n\t\tmenuItems: '.kitbuilder-template-library-menu-item'\n\t},\n\n\tevents: {\n\t\t'click @ui.menuItems': 'onMenuItemClick'\n\t},\n\n\t$activeItem: null,\n\n\tactivateMenuItem: function( $item ) {\n\t\tvar activeClass = this.getOption( 'activeClass' );\n\n\t\tif ( this.$activeItem === $item ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.$activeItem ) {\n\t\t\tthis.$activeItem.removeClass( activeClass );\n\t\t}\n\n\t\t$item.addClass( activeClass );\n\n\t\tthis.$activeItem = $item;\n\t},\n\n\tonRender: function() {\n\t\tvar currentSource = kitbuilder.channels.templates.request( 'filter:source' ),\n\t\t\t$sourceItem = this.ui.menuItems.filter( '[data-template-source=\"' + currentSource + '\"]' );\n\n\t\tthis.activateMenuItem( $sourceItem );\n\t},\n\n\tonMenuItemClick: function( event ) {\n\t\tvar item = event.currentTarget;\n\n\t\tthis.activateMenuItem( Backbone.$( item ) );\n\n\t\tkitbuilder.templates.setTemplatesSource( item.dataset.templateSource, true );\n\t}\n} );\n\nmodule.exports = TemplateLibraryHeaderMenuView;\n",
    "var TemplateLibraryInsertTemplateBehavior = require( 'kitbuilder-templates/behaviors/insert-template' ),\n\tTemplateLibraryHeaderPreviewView;\n\nTemplateLibraryHeaderPreviewView = Marionette.ItemView.extend( {\n\ttemplate: '#tmpl-kitbuilder-template-library-header-preview',\n\n\tid: 'kitbuilder-template-library-header-preview',\n\n\tbehaviors: {\n\t\tinsertTemplate: {\n\t\t\tbehaviorClass: TemplateLibraryInsertTemplateBehavior\n\t\t}\n\t}\n} );\n\nmodule.exports = TemplateLibraryHeaderPreviewView;\n",
    "var TemplateLibraryHeaderSaveView;\n\nTemplateLibraryHeaderSaveView = Marionette.ItemView.extend( {\n\ttemplate: '#tmpl-kitbuilder-template-library-header-save',\n\n\tid: 'kitbuilder-template-library-header-save',\n\n\tclassName: 'kitbuilder-template-library-header-item',\n\n\tevents: {\n\t\t'click': 'onClick'\n\t},\n\n\tonClick: function() {\n\t\tkitbuilder.templates.getLayout().showSaveTemplateView();\n\t}\n} );\n\nmodule.exports = TemplateLibraryHeaderSaveView;\n",
    "var TemplateLibraryHeaderView;\n\nTemplateLibraryHeaderView = Marionette.LayoutView.extend( {\n\n\tid: 'kitbuilder-template-library-header',\n\n\ttemplate: '#tmpl-kitbuilder-template-library-header',\n\n\tregions: {\n\t\tlogoArea: '#kitbuilder-template-library-header-logo-area',\n\t\ttools: '#kitbuilder-template-library-header-tools',\n\t\tmenuArea: '#kitbuilder-template-library-header-menu-area'\n\t},\n\n\tui: {\n\t\tcloseModal: '#kitbuilder-template-library-header-close-modal'\n\t},\n\n\tevents: {\n\t\t'click @ui.closeModal': 'onCloseModalClick'\n\t},\n\n\tonCloseModalClick: function() {\n\t\tkitbuilder.templates.closeModal();\n\t}\n} );\n\nmodule.exports = TemplateLibraryHeaderView;\n",
    "var TemplateLibraryImportView;\n\nTemplateLibraryImportView = Marionette.ItemView.extend( {\n\ttemplate: '#tmpl-kitbuilder-template-library-import',\n\n\tid: 'kitbuilder-template-library-import',\n\n\tui: {\n\t\tuploadForm: '#kitbuilder-template-library-import-form'\n\t},\n\n\tevents: {\n\t\t'submit @ui.uploadForm': 'onFormSubmit'\n\t},\n\n\tonFormSubmit: function( event ) {\n\t\tevent.preventDefault();\n\n\t\tkitbuilder.templates.getLayout().showLoadingView();\n\n\t\tkitbuilder.ajax.send( 'import_template', {\n\t\t\tdata: new FormData( this.ui.uploadForm[ 0 ] ),\n\t\t\tprocessData: false,\n\t\t\tcontentType: false,\n\t\t\tsuccess: function( data ) {\n\t\t\t\tkitbuilder.templates.getTemplatesCollection().add( data.item );\n\n\t\t\t\tkitbuilder.templates.showTemplates();\n\t\t\t},\n\t\t\terror: function( data ) {\n\t\t\t\tkitbuilder.templates.showErrorDialog( data );\n\t\t\t}\n\t\t} );\n\t}\n} );\n\nmodule.exports = TemplateLibraryImportView;\n",
    "var TemplateLibraryLoadingView;\n\nTemplateLibraryLoadingView = Marionette.ItemView.extend( {\n\tid: 'kitbuilder-template-library-loading',\n\n\ttemplate: '#tmpl-kitbuilder-template-library-loading'\n} );\n\nmodule.exports = TemplateLibraryLoadingView;\n",
    "var TemplateLibraryPreviewView;\n\nTemplateLibraryPreviewView = Marionette.ItemView.extend( {\n\ttemplate: '#tmpl-kitbuilder-template-library-preview',\n\n\tid: 'kitbuilder-template-library-preview',\n\n\tui: {\n\t\tiframe: '> iframe'\n\t},\n\n\tonRender: function() {\n\t\tthis.ui.iframe.attr( 'src', this.getOption( 'url' ) );\n\t}\n} );\n\nmodule.exports = TemplateLibraryPreviewView;\n",
    "var TemplateLibrarySaveTemplateView;\n\nTemplateLibrarySaveTemplateView = Marionette.ItemView.extend( {\n\tid: 'kitbuilder-template-library-save-template',\n\n\ttemplate: '#tmpl-kitbuilder-template-library-save-template',\n\n\tui: {\n\t\tform: '#kitbuilder-template-library-save-template-form',\n\t\tsubmitButton: '#kitbuilder-template-library-save-template-submit'\n\t},\n\n\tevents: {\n\t\t'submit @ui.form': 'onFormSubmit'\n\t},\n\n\tgetSaveType: function() {\n\t\treturn this.model ? this.model.get( 'elType' ) : 'page';\n\t},\n\n\ttemplateHelpers: function() {\n\t\tvar saveType = this.getSaveType(),\n\t\t\ttemplateType = kitbuilder.templates.getTemplateTypes( saveType );\n\n\t\treturn templateType.saveDialog;\n\t},\n\n\tonFormSubmit: function( event ) {\n\t\tevent.preventDefault();\n\n\t\tvar formData = this.ui.form.kitbuilderSerializeObject(),\n\t\t\tsaveType = this.model ? this.model.get( 'elType' ) : 'page',\n\t\t\tJSONParams = { removeDefault: true };\n\n\t\tformData.data = this.model ? [ this.model.toJSON( JSONParams ) ] : kitbuilder.elements.toJSON( JSONParams );\n\n\t\tthis.ui.submitButton.addClass( 'kitbuilder-button-state' );\n\n\t\tkitbuilder.templates.saveTemplate( saveType, formData );\n\t}\n} );\n\nmodule.exports = TemplateLibrarySaveTemplateView;\n",
    "var TemplateLibraryTemplatesEmptyView;\n\nTemplateLibraryTemplatesEmptyView = Marionette.ItemView.extend( {\n\tid: 'kitbuilder-template-library-templates-empty',\n\n\ttemplate: '#tmpl-kitbuilder-template-library-templates-empty'\n} );\n\nmodule.exports = TemplateLibraryTemplatesEmptyView;\n",
    "var TemplateLibraryTemplateLocalView = require( 'kitbuilder-templates/views/template/local' ),\n\tTemplateLibraryTemplateRemoteView = require( 'kitbuilder-templates/views/template/remote' ),\n\tTemplateLibraryTemplatesEmptyView = require( 'kitbuilder-templates/views/parts/templates-empty' ),\n\tTemplateLibraryCollectionView;\n\nTemplateLibraryCollectionView = Marionette.CompositeView.extend( {\n\ttemplate: '#tmpl-kitbuilder-template-library-templates',\n\n\tid: 'kitbuilder-template-library-templates',\n\n\tchildViewContainer: '#kitbuilder-template-library-templates-container',\n\n\temptyView: TemplateLibraryTemplatesEmptyView,\n\n\tgetChildView: function( childModel ) {\n\t\tif ( 'remote' === childModel.get( 'source' ) ) {\n\t\t\treturn TemplateLibraryTemplateRemoteView;\n\t\t}\n\n\t\treturn TemplateLibraryTemplateLocalView;\n\t},\n\n\tinitialize: function() {\n\t\tthis.listenTo( kitbuilder.channels.templates, 'filter:change', this._renderChildren );\n\t},\n\n\tfilterByName: function( model ) {\n\t\tvar filterValue = kitbuilder.channels.templates.request( 'filter:text' );\n\n\t\tif ( ! filterValue ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tfilterValue = filterValue.toLowerCase();\n\n\t\tif ( model.get( 'title' ).toLowerCase().indexOf( filterValue ) >= 0 ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn _.any( model.get( 'keywords' ), function( keyword ) {\n\t\t\treturn keyword.toLowerCase().indexOf( filterValue ) >= 0;\n\t\t} );\n\t},\n\n\tfilterBySource: function( model ) {\n\t\tvar filterValue = kitbuilder.channels.templates.request( 'filter:source' );\n\n\t\tif ( ! filterValue ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn filterValue === model.get( 'source' );\n\t},\n\n\tfilterByType: function( model ) {\n\t\treturn false !== kitbuilder.templates.getTemplateTypes( model.get( 'type' ) ).showInLibrary;\n\t},\n\n\tfilter: function( childModel ) {\n\t\treturn this.filterByName( childModel ) && this.filterBySource( childModel ) && this.filterByType( childModel );\n\t},\n\n\tonRenderCollection: function() {\n\t\tvar isEmpty = this.children.isEmpty();\n\n\t\tthis.$childViewContainer.attr( 'data-template-source', isEmpty ? 'empty' : kitbuilder.channels.templates.request( 'filter:source' ) );\n\t}\n} );\n\nmodule.exports = TemplateLibraryCollectionView;\n",
    "var TemplateLibraryInsertTemplateBehavior = require( 'kitbuilder-templates/behaviors/insert-template' ),\n\tTemplateLibraryTemplateView;\n\nTemplateLibraryTemplateView = Marionette.ItemView.extend( {\n\tclassName: function() {\n\t\tvar classes = 'kitbuilder-template-library-template kitbuilder-template-library-template-' + this.model.get( 'source' );\n\n\t\tif ( this.model.get( 'isPro' ) ) {\n\t\t\tclasses += ' kitbuilder-template-library-pro-template';\n\t\t}\n\n\t\treturn classes;\n\t},\n\n\tui: function() {\n\t\treturn {\n\t\t\tpreviewButton: '.kitbuilder-template-library-template-preview'\n\t\t};\n\t},\n\n\tevents: function() {\n\t\treturn {\n\t\t\t'click @ui.previewButton': 'onPreviewButtonClick'\n\t\t};\n\t},\n\n\tbehaviors: {\n\t\tinsertTemplate: {\n\t\t\tbehaviorClass: TemplateLibraryInsertTemplateBehavior\n\t\t}\n\t}\n} );\n\nmodule.exports = TemplateLibraryTemplateView;\n",
    "var TemplateLibraryTemplateView = require( 'kitbuilder-templates/views/template/base' ),\n\tTemplateLibraryTemplateLocalView;\n\nTemplateLibraryTemplateLocalView = TemplateLibraryTemplateView.extend( {\n\ttemplate: '#tmpl-kitbuilder-template-library-template-local',\n\n\tui: function() {\n\t\treturn _.extend( TemplateLibraryTemplateView.prototype.ui.apply( this, arguments ), {\n\t\t\tdeleteButton: '.kitbuilder-template-library-template-delete'\n\t\t} );\n\t},\n\n\tevents: function() {\n\t\treturn _.extend( TemplateLibraryTemplateView.prototype.events.apply( this, arguments ), {\n\t\t\t'click @ui.deleteButton': 'onDeleteButtonClick'\n\t\t} );\n\t},\n\n\tonDeleteButtonClick: function() {\n\t\tkitbuilder.templates.deleteTemplate( this.model );\n\t},\n\n\tonPreviewButtonClick: function() {\n\t\topen( this.model.get( 'url' ), '_blank' );\n\t}\n} );\n\nmodule.exports = TemplateLibraryTemplateLocalView;\n",
    "var TemplateLibraryTemplateView = require( 'kitbuilder-templates/views/template/base' ),\n\tTemplateLibraryTemplateRemoteView;\n\nTemplateLibraryTemplateRemoteView = TemplateLibraryTemplateView.extend( {\n\ttemplate: '#tmpl-kitbuilder-template-library-template-remote',\n\n\tonPreviewButtonClick: function() {\n\t\tkitbuilder.templates.getLayout().showPreviewView( this.model );\n\t}\n} );\n\nmodule.exports = TemplateLibraryTemplateRemoteView;\n",
    "/* global KitbuilderConfig */\nvar App;\n\nMarionette.TemplateCache.prototype.compileTemplate = function( rawTemplate, options ) {\n\toptions = {\n\t\tevaluate: /<#([\\s\\S]+?)#>/g,\n\t\tinterpolate: /\\{\\{\\{([\\s\\S]+?)\\}\\}\\}/g,\n\t\tescape: /\\{\\{([^\\}]+?)\\}\\}(?!\\})/g\n\t};\n\n\treturn _.template( rawTemplate, options );\n};\n\nApp = Marionette.Application.extend( {\n\thelpers: require( 'kitbuilder-editor-utils/helpers' ),\n\theartbeat: require( 'kitbuilder-editor-utils/heartbeat' ),\n\timagesManager: require( 'kitbuilder-editor-utils/images-manager' ),\n\tpresetsFactory: require( 'kitbuilder-editor-utils/presets-factory' ),\n\tintroduction: require( 'kitbuilder-editor-utils/introduction' ),\n\ttemplates: require( 'kitbuilder-templates/manager' ),\n\tajax: require( 'kitbuilder-editor-utils/ajax' ),\n\tconditions: require( 'kitbuilder-editor-utils/conditions' ),\n\trevisions:  require( 'kitbuilder-revisions/manager' ),\n\thotKeys: require( 'kitbuilder-editor-utils/hot-keys' ),\n\n\tchannels: {\n\t\teditor: Backbone.Radio.channel( 'KITBUILDER:editor' ),\n\t\tdata: Backbone.Radio.channel( 'KITBUILDER:data' ),\n\t\tpanelElements: Backbone.Radio.channel( 'KITBUILDER:panelElements' ),\n\t\tdataEditMode: Backbone.Radio.channel( 'KITBUILDER:editmode' ),\n\t\tdeviceMode: Backbone.Radio.channel( 'KITBUILDER:deviceMode' ),\n\t\ttemplates: Backbone.Radio.channel( 'KITBUILDER:templates' )\n\t},\n\n\tmodules: {\n\t\telement: require( 'kitbuilder-models/element' ),\n\t\tWidgetView: require( 'kitbuilder-views/widget' ),\n\t\tcontrols: {\n\t\t\tBase: require( 'kitbuilder-views/controls/base' ),\n\t\t\tBaseMultiple: require( 'kitbuilder-views/controls/base-multiple' ),\n\t\t\tColor: require( 'kitbuilder-views/controls/color' ),\n\t\t\tDimensions: require( 'kitbuilder-views/controls/dimensions' ),\n\t\t\tImage_dimensions: require( 'kitbuilder-views/controls/image-dimensions' ),\n\t\t\tMedia: require( 'kitbuilder-views/controls/media' ),\n\t\t\tSlider: require( 'kitbuilder-views/controls/slider' ),\n\t\t\tWysiwyg: require( 'kitbuilder-views/controls/wysiwyg' ),\n\t\t\tChoose: require( 'kitbuilder-views/controls/choose' ),\n\t\t\tUrl: require( 'kitbuilder-views/controls/url' ),\n\t\t\tFont: require( 'kitbuilder-views/controls/font' ),\n\t\t\tSection: require( 'kitbuilder-views/controls/section' ),\n\t\t\tTab: require( 'kitbuilder-views/controls/tab' ),\n\t\t\tRepeater: require( 'kitbuilder-views/controls/repeater' ),\n\t\t\tWp_widget: require( 'kitbuilder-views/controls/wp_widget' ),\n\t\t\tIcon: require( 'kitbuilder-views/controls/icon' ),\n\t\t\tGallery: require( 'kitbuilder-views/controls/gallery' ),\n\t\t\tSelect2: require( 'kitbuilder-views/controls/select2' ),\n\t\t\tDate_time: require( 'kitbuilder-views/controls/date-time' ),\n\t\t\tCode: require( 'kitbuilder-views/controls/code' ),\n\t\t\tBox_shadow: require( 'kitbuilder-views/controls/box-shadow' ),\n\t\t\tStructure: require( 'kitbuilder-views/controls/structure' ),\n\t\t\tAnimation: require( 'kitbuilder-views/controls/select2' ),\n\t\t\tHover_animation: require( 'kitbuilder-views/controls/select2' ),\n\t\t\tOrder: require( 'kitbuilder-views/controls/order' ),\n\t\t\tSwitcher: require( 'kitbuilder-views/controls/switcher' )\n\t\t},\n\t\ttemplateLibrary: {\n\t\t\tElementsCollectionView: require( 'kitbuilder-panel/pages/elements/views/elements' )\n\t\t}\n\t},\n\n\t_defaultDeviceMode: 'desktop',\n\n\taddControlView: function( controlID, ControlView ) {\n\t\tthis.modules.controls[ controlID[0].toUpperCase() + controlID.slice( 1 ) ] = ControlView;\n\t},\n\n\tgetElementData: function( modelElement ) {\n\t\tvar elType = modelElement.get( 'elType' );\n\n\t\tif ( 'widget' === elType ) {\n\t\t\tvar widgetType = modelElement.get( 'widgetType' );\n\n\t\t\tif ( ! this.config.widgets[ widgetType ] ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.config.widgets[ widgetType ];\n\t\t}\n\n\t\tif ( ! this.config.elements[ elType ] ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.config.elements[ elType ];\n\t},\n\n\tgetElementControls: function( modelElement ) {\n\t\tvar self = this,\n\t\t\telementData = self.getElementData( modelElement );\n\n\t\tif ( ! elementData ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar elType = modelElement.get( 'elType' ),\n\t\t\tisInner = modelElement.get( 'isInner' ),\n\t\t\tcontrols = {};\n\n\t\t_.each( elementData.controls, function( controlData, controlKey ) {\n\t\t\tif ( isInner && controlData.hide_in_inner || ! isInner && controlData.hide_in_top ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcontrols[ controlKey ] = _.extend( {}, self.config.controls[ controlData.type ], controlData  );\n\t\t} );\n\n\t\treturn controls;\n\t},\n\n\tgetControlView: function( controlID ) {\n\t\treturn this.modules.controls[ controlID[0].toUpperCase() + controlID.slice( 1 ) ] || this.modules.controls.Base;\n\t},\n\n\tgetPanelView: function() {\n\t\treturn this.getRegion( 'panel' ).currentView;\n\t},\n\n\tinitComponents: function() {\n\t\tvar EventManager = require( 'kitbuilder-utils/hooks' ),\n\t\t\tPageSettings = require( 'kitbuilder-editor-utils/page-settings' );\n\n\t\tthis.hooks = new EventManager();\n\n\t\tthis.pageSettings = new PageSettings();\n\n\t\tthis.templates.init();\n\n\t\tthis.initDialogsManager();\n\n\t\tthis.heartbeat.init();\n\t\tthis.ajax.init();\n\t\tthis.revisions.init();\n\t\tthis.hotKeys.init();\n\t},\n\n\tinitDialogsManager: function() {\n\t\tthis.dialogsManager = new DialogsManager.Instance();\n\t},\n\n\tinitElements: function() {\n\t\tvar ElementModel = kitbuilder.modules.element;\n\n\t\tthis.elements = new ElementModel.Collection( this.config.data );\n\t},\n\n\tinitPreview: function() {\n\t\tthis.$previewWrapper = Backbone.$( '#kitbuilder-preview' );\n\n\t\tthis.$previewResponsiveWrapper = Backbone.$( '#kitbuilder-preview-responsive-wrapper' );\n\n\t\tvar previewIframeId = 'kitbuilder-preview-iframe';\n\n\t\t// Make sure the iFrame does not exist.\n\t\tif ( ! Backbone.$( '#' + previewIframeId ).length ) {\n\t\t\tvar previewIFrame = document.createElement( 'iframe' );\n\n\t\t\tpreviewIFrame.id = previewIframeId;\n\t\t\tpreviewIFrame.src = this.config.preview_link + '&' + ( new Date().getTime() );\n\n\t\t\tthis.$previewResponsiveWrapper.append( previewIFrame );\n\t\t}\n\n\t\tthis.$preview = Backbone.$( '#' + previewIframeId );\n\n\t\tthis.$preview.on( 'load', _.bind( this.onPreviewLoaded, this ) );\n\n\t\tthis.initElements();\n\t},\n\n\tinitFrontend: function() {\n\t\tkitbuilderFrontend.setScopeWindow( this.$preview[0].contentWindow );\n\n\t\tkitbuilderFrontend.init();\n\n\t\tkitbuilderFrontend.elementsHandler.initHandlers();\n\t},\n\n\tinitClearPageDialog: function() {\n\t\tvar self = this,\n\t\t\tdialog;\n\n\t\tself.getClearPageDialog = function() {\n\t\t\tif ( dialog ) {\n\t\t\t\treturn dialog;\n\t\t\t}\n\n\t\t\tdialog = this.dialogsManager.createWidget( 'confirm', {\n\t\t\t\tid: 'kitbuilder-clear-page-dialog',\n\t\t\t\theaderMessage: kitbuilder.translate( 'clear_page' ),\n\t\t\t\tmessage: kitbuilder.translate( 'dialog_confirm_clear_page' ),\n\t\t\t\tposition: {\n\t\t\t\t\tmy: 'center center',\n\t\t\t\t\tat: 'center center'\n\t\t\t\t},\n\t\t\t\tstrings: {\n\t\t\t\t\tconfirm: kitbuilder.translate( 'delete' ),\n\t\t\t\t\tcancel: kitbuilder.translate( 'cancel' )\n\t\t\t\t},\n\t\t\t\tonConfirm: function() {\n\t\t\t\t\tself.getRegion( 'sections' ).currentView.collection.reset();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\treturn dialog;\n\t\t};\n\t},\n\n\tonStart: function() {\n\t\tthis.$window = Backbone.$( window );\n\n\t\tNProgress.start();\n\t\tNProgress.inc( 0.2 );\n\n\t\tthis.config = KitbuilderConfig;\n\n\t\tBackbone.Radio.DEBUG = false;\n\t\tBackbone.Radio.tuneIn( 'KITBUILDER' );\n\n\t\tthis.initComponents();\n\n\t\tthis.channels.dataEditMode.reply( 'activeMode', 'edit' );\n\n\t\tthis.listenTo( this.channels.dataEditMode, 'switch', this.onEditModeSwitched );\n\n\t\tthis.setWorkSaver();\n\n\t\tthis.initClearPageDialog();\n\n\t\tthis.$window.trigger( 'kitbuilder:init' );\n\n\t\tthis.initPreview();\n\n\t},\n\n\tonPreviewLoaded: function() {\n\t\tNProgress.done();\n\n\t\tthis.initFrontend();\n\n\t\tthis.hotKeys.bindListener( Backbone.$( kitbuilderFrontend.getScopeWindow() ) );\n\n\t\tthis.$previewContents = this.$preview.contents();\n\n\t\tvar Preview = require( 'kitbuilder-views/preview' ),\n\t\t\tPanelLayoutView = require( 'kitbuilder-layouts/panel/panel' );\n\n\t\tvar $previewKitbuilderEl = this.$previewContents.find( '#kitbuilder' );\n\n\t\tif ( ! $previewKitbuilderEl.length ) {\n\t\t\tthis.onPreviewElNotFound();\n\t\t\treturn;\n\t\t}\n\n\t\tvar iframeRegion = new Marionette.Region( {\n\t\t\t// Make sure you get the DOM object out of the jQuery object\n\t\t\tel: $previewKitbuilderEl[0]\n\t\t} );\n\n\t\tthis.$previewContents.on( 'click', function( event ) {\n\t\t\tvar $target = Backbone.$( event.target ),\n\t\t\t\teditMode = kitbuilder.channels.dataEditMode.request( 'activeMode' ),\n\t\t\t\tisClickInsideKitbuilder = !! $target.closest( '#kitbuilder' ).length,\n\t\t\t\tisTargetInsideDocument = this.contains( $target[0] );\n\n\t\t\tif ( isClickInsideKitbuilder && 'edit' === editMode || ! isTargetInsideDocument ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( $target.closest( 'a' ).length ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\n\t\t\t/*if ( ! isClickInsideKitbuilder ) {\n\t\t\t\tvar panelView = kitbuilder.getPanelView();\n\n\t\t\t\tconsole.log(panelView.getCurrentPageName());\n\n\t\t\t\tif ( 'elements' !== panelView.getCurrentPageName() ) {\n\t\t\t\t\tpanelView.setPage( 'elements' );\n\t\t\t\t}\n\t\t\t}*/\n\t\t} );\n\n\t\tthis.addRegions( {\n\t\t\tsections: iframeRegion,\n\t\t\tpanel: '#kitbuilder-panel'\n\t\t} );\n\n\t\tthis.getRegion( 'sections' ).show( new Preview( {\n\t\t\tcollection: this.elements\n\t\t} ) );\n\n\t\tthis.getRegion( 'panel' ).show( new PanelLayoutView() );\n\n\t\tthis.$previewContents\n\t\t    .children() // <html>\n\t\t    .addClass( 'kitbuilder-html' )\n\t\t    .children( 'body' )\n\t\t    .addClass( 'kitbuilder-editor-active' );\n\n\t\t// this.setResizablePanel();\n\n\t\tthis.changeDeviceMode( this._defaultDeviceMode );\n\n\t\tBackbone.$( '#kitbuilder-loading, #kitbuilder-preview-loading' ).fadeOut( 600 );\n\n\t\t_.defer( function() {\n\t\t\tkitbuilderFrontend.getScopeWindow().jQuery.holdReady( false );\n\t\t} );\n\n\t\tthis.onEditModeSwitched();\n\n\t\tthis.trigger( 'preview:loaded' );\n\t},\n\n\tonEditModeSwitched: function() {\n\t\tvar activeMode = this.channels.dataEditMode.request( 'activeMode' );\n\n\t\tif ( 'edit' === activeMode ) {\n\t\t\tthis.exitPreviewMode();\n\t\t} else {\n\t\t\tthis.enterPreviewMode( 'preview' === activeMode );\n\t\t}\n\t},\n\n\tonPreviewElNotFound: function() {\n\t\tvar dialog = this.dialogsManager.createWidget( 'confirm', {\n\t\t\tid: 'kitbuilder-fatal-error-dialog',\n\t\t\theaderMessage: kitbuilder.translate( 'preview_el_not_found_header' ),\n\t\t\tmessage: kitbuilder.translate( 'preview_el_not_found_message' ),\n\t\t\tposition: {\n\t\t\t\tmy: 'center center',\n\t\t\t\tat: 'center center'\n\t\t\t},\n            strings: {\n\t\t\t\tconfirm: kitbuilder.translate( 'learn_more' ),\n\t\t\t\tcancel: kitbuilder.translate( 'go_back' )\n            },\n\t\t\tonConfirm: function() {\n\t\t\t\topen( kitbuilder.config.help_the_content_url, '_blank' );\n\t\t\t},\n\t\t\tonCancel: function() {\n\t\t\t\tparent.history.go( -1 );\n\t\t\t},\n\t\t\thideOnButtonClick: false\n\t\t} );\n\n\t\tdialog.show();\n\t},\n\n\tsetFlagEditorChange: function( status ) {\n\t\tkitbuilder.channels.editor\n\t\t\t.reply( 'status', status )\n\t\t\t.trigger( 'status:change', status );\n\t},\n\n\tisEditorChanged: function() {\n\t\treturn ( true === kitbuilder.channels.editor.request( 'status' ) );\n\t},\n\n\tsetWorkSaver: function() {\n\t\tthis.$window.on( 'beforeunload', function() {\n\t\t\tif ( kitbuilder.isEditorChanged() ) {\n\t\t\t\treturn kitbuilder.translate( 'before_unload_alert' );\n\t\t\t}\n\t\t} );\n\t},\n\n\tsetResizablePanel: function() {\n\t\tvar self = this,\n\t\t\tside = kitbuilder.config.is_rtl ? 'right' : 'left';\n\n\t\tself.panel.$el.resizable( {\n\t\t\thandles: kitbuilder.config.is_rtl ? 'w' : 'e',\n\t\t\tminWidth: 200,\n\t\t\tmaxWidth: 680,\n\t\t\tstart: function() {\n\t\t\t\tself.$previewWrapper\n\t\t\t\t\t.addClass( 'ui-resizable-resizing' )\n\t\t\t\t\t.css( 'pointer-events', 'none' );\n\t\t\t},\n\t\t\tstop: function() {\n\t\t\t\tself.$previewWrapper\n\t\t\t\t\t.removeClass( 'ui-resizable-resizing' )\n\t\t\t\t\t.css( 'pointer-events', '' );\n\n\t\t\t\tkitbuilder.channels.data.trigger( 'scrollbar:update' );\n\t\t\t},\n\t\t\tresize: function( event, ui ) {\n\t\t\t\tself.$previewWrapper\n\t\t\t\t\t.css( side, ui.size.width );\n\t\t\t}\n\t\t} );\n\t},\n\n\tenterPreviewMode: function( hidePanel ) {\n\t\tvar $elements = this.$previewContents.find( 'body' );\n\n\t\tif ( hidePanel ) {\n\t\t\t$elements = $elements.add( 'body' );\n\t\t}\n\n\t\t$elements\n\t\t\t.removeClass( 'kitbuilder-editor-active' )\n\t\t\t.addClass( 'kitbuilder-editor-preview' );\n\n\t\tif ( hidePanel ) {\n\t\t\t// Handle panel resize\n\t\t\tthis.$previewWrapper.css( kitbuilder.config.is_rtl ? 'right' : 'left', '' );\n\n\t\t\tthis.panel.$el.css( 'width', '' );\n\t\t}\n\t},\n\n\texitPreviewMode: function() {\n\t\tthis.$previewContents\n\t\t\t.find( 'body' )\n\t\t\t.add( 'body' )\n\t\t\t.removeClass( 'kitbuilder-editor-preview' )\n\t\t\t.addClass( 'kitbuilder-editor-active' );\n\t},\n\n\tchangeEditMode: function( newMode ) {\n\t\tvar dataEditMode = kitbuilder.channels.dataEditMode,\n\t\t\toldEditMode = dataEditMode.request( 'activeMode' );\n\n\t\tdataEditMode.reply( 'activeMode', newMode );\n\n\t\tif ( newMode !== oldEditMode ) {\n\t\t\tdataEditMode.trigger( 'switch', newMode );\n\t\t}\n\t},\n\n\tsaveEditor: function( options ) {\n\t\toptions = _.extend( {\n\t\t\tstatus: 'draft',\n\t\t\tonSuccess: null\n\t\t}, options );\n\n\t\tvar self = this,\n\t\t\tnewData = kitbuilder.elements.toJSON( { removeDefault: true } );\n\n\t\treturn this.ajax.send( 'save_builder', {\n\t        data: {\n\t\t        post_id: this.config.post_id,\n\t\t\t\tstatus: options.status,\n\t\t        data: JSON.stringify( newData )\n\t        },\n\t\t\tsuccess: function( data ) {\n\t\t\t\tself.setFlagEditorChange( false );\n\n\t\t\t\tself.config.data = newData;\n\n\t\t\t\tself.channels.editor.trigger( 'saved', data );\n\n\t\t\t\tif ( _.isFunction( options.onSuccess ) ) {\n\t\t\t\t\toptions.onSuccess.call( this, data );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\treloadPreview: function() {\n\t\tBackbone.$( '#kitbuilder-preview-loading' ).show();\n\n\t\tthis.$preview[0].contentWindow.location.reload( true );\n\t},\n\n\tclearPage: function() {\n\t\tthis.getClearPageDialog().show();\n\t},\n\n\tchangeDeviceMode: function( newDeviceMode ) {\n\t\tvar oldDeviceMode = this.channels.deviceMode.request( 'currentMode' );\n\n\t\tif ( oldDeviceMode === newDeviceMode ) {\n\t\t\treturn;\n\t\t}\n\n\t\tBackbone.$( 'body' )\n\t\t\t.removeClass( 'kitbuilder-device-' + oldDeviceMode )\n\t\t\t.addClass( 'kitbuilder-device-' + newDeviceMode );\n\n\t\tthis.channels.deviceMode\n\t\t\t.reply( 'previousMode', oldDeviceMode )\n\t\t\t.reply( 'currentMode', newDeviceMode )\n\t\t\t.trigger( 'change' );\n\t},\n\n\n\ttranslate: function( stringKey, templateArgs, i18nStack ) {\n\t\tif ( ! i18nStack ) {\n\t\t\ti18nStack = this.config.i18n;\n\t\t}\n\n\t\tvar string = i18nStack[ stringKey ];\n\n\t\tif ( undefined === string ) {\n\t\t\tstring = stringKey;\n\t\t}\n\n\t\tif ( templateArgs ) {\n\t\t\tstring = string.replace( /{(\\d+)}/g, function( match, number ) {\n\t\t\t\treturn undefined !== templateArgs[ number ] ? templateArgs[ number ] : match;\n\t\t\t} );\n\t\t}\n\n\t\treturn string;\n\t},\n\n} );\n\nmodule.exports = ( window.kitbuilder = new App() ).start();\n",
    "var EditModeItemView;\n\nEditModeItemView = Marionette.ItemView.extend( {\n\ttemplate: '#tmpl-kitbuilder-mode-switcher-content',\n\n\tid: 'kitbuilder-mode-switcher-inner',\n\n\tui: {\n\t\tpreviewButton: '#kitbuilder-mode-switcher-preview-input',\n\t\tpreviewLabel: '#kitbuilder-mode-switcher-preview',\n\t\tpreviewLabelA11y: '#kitbuilder-mode-switcher-preview .kitbuilder-screen-only'\n\t},\n\n\tevents: {\n\t\t'change @ui.previewButton': 'onPreviewButtonChange'\n\t},\n\n\tinitialize: function() {\n\t\tthis.listenTo( kitbuilder.channels.dataEditMode, 'switch', this.onEditModeChanged );\n\t},\n\n\tgetCurrentMode: function() {\n\t\treturn this.ui.previewButton.is( ':checked' ) ? 'preview' : 'edit';\n\t},\n\n\tsetMode: function( mode ) {\n\t\tthis.ui.previewButton\n\t\t\t.prop( 'checked', 'preview' === mode )\n\t\t\t.trigger( 'change' );\n\t},\n\n\ttoggleMode: function() {\n\t\tthis.setMode( this.ui.previewButton.prop( 'checked' ) ? 'edit' : 'preview' );\n\t},\n\n\tonRender: function() {\n\t\tthis.onEditModeChanged();\n\t},\n\n\tonPreviewButtonChange: function() {\n\t\tkitbuilder.changeEditMode( this.getCurrentMode() );\n\t},\n\n\tonEditModeChanged: function() {\n\t\tvar activeMode = kitbuilder.channels.dataEditMode.request( 'activeMode' ),\n\t\t\ttitle = kitbuilder.translate( 'preview' === activeMode ? 'back_to_editor' : 'preview' );\n\n\t\tthis.ui.previewLabel.attr( 'title', title );\n\t\tthis.ui.previewLabelA11y.text( title );\n\t}\n} );\n\nmodule.exports = EditModeItemView;\n",
    "var PanelFooterItemView;\n\nPanelFooterItemView = Marionette.ItemView.extend( {\n\ttemplate: '#tmpl-kitbuilder-panel-footer-content',\n\n\ttagName: 'nav',\n\n\tid: 'kitbuilder-panel-footer-tools',\n\n\tpossibleRotateModes: [ 'portrait', 'landscape' ],\n\n\tui: {\n\t\tmenuButtons: '.kitbuilder-panel-footer-tool',\n\t\tdeviceModeIcon: '#kitbuilder-panel-footer-responsive > i',\n\t\tdeviceModeButtons: '#kitbuilder-panel-footer-responsive .kitbuilder-panel-footer-sub-menu-item',\n\t\tbuttonSave: '#kitbuilder-panel-footer-save',\n\t\tbuttonSaveButton: '#kitbuilder-panel-footer-save .kitbuilder-button',\n\t\tbuttonPublish: '#kitbuilder-panel-footer-publish',\n\t\twatchTutorial: '#kitbuilder-panel-footer-watch-tutorial',\n\t\tshowTemplates: '#kitbuilder-panel-footer-templates-modal',\n\t\tsaveTemplate: '#kitbuilder-panel-footer-save-template'\n\t},\n\n\tevents: {\n\t\t'click @ui.deviceModeButtons': 'onClickResponsiveButtons',\n\t\t'click @ui.buttonSave': 'onClickButtonSave',\n\t\t'click @ui.buttonPublish': 'onClickButtonPublish',\n\t\t//'click @ui.watchTutorial': 'onClickWatchTutorial',\n\t\t'click @ui.showTemplates': 'onClickShowTemplates',\n\t\t'click @ui.saveTemplate': 'onClickSaveTemplate'\n\t},\n\n\tinitialize: function() {\n\t\tthis._initDialog();\n\n\t\tthis.listenTo( kitbuilder.channels.editor, 'status:change', this.onEditorChanged )\n\t\t\t.listenTo( kitbuilder.channels.deviceMode, 'change', this.onDeviceModeChange );\n\t},\n\n\t_initDialog: function() {\n\t\tvar dialog;\n\n\t\tthis.getDialog = function() {\n\t\t\tif ( ! dialog ) {\n\t\t\t\tvar $ = Backbone.$,\n\t\t\t\t\t$dialogMessage = $( '<div>', {\n\t\t\t\t\t\t'class': 'kitbuilder-dialog-message'\n\t\t\t\t\t} ),\n\t\t\t\t\t$messageIcon = $( '<i>', {\n\t\t\t\t\t\t'class': 'fa fa-check-circle'\n\t\t\t\t\t} ),\n\t\t\t\t\t$messageText = $( '<div>', {\n\t\t\t\t\t\t'class': 'kitbuilder-dialog-message-text'\n\t\t\t\t\t} ).text( kitbuilder.translate( 'saved' ) );\n\n\t\t\t\t$dialogMessage.append( $messageIcon, $messageText );\n\n\t\t\t\tdialog = kitbuilder.dialogsManager.createWidget( 'popup', {\n\t\t\t\t\thide: {\n\t\t\t\t\t\tdelay: 1500\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tdialog.setMessage( $dialogMessage );\n\t\t\t}\n\n\t\t\treturn dialog;\n\t\t};\n\t},\n\n\t_publishBuilder: function() {\n\t\tvar self = this;\n\n\t\tvar options = {\n\t\t\tstatus: 'publish',\n\t\t\tonSuccess: function() {\n\t\t\t\tself.getDialog().show();\n\n\t\t\t\tself.ui.buttonSaveButton.removeClass( 'kitbuilder-button-state' );\n\n\t\t\t\tNProgress.done();\n\t\t\t}\n\t\t};\n\n\t\tself.ui.buttonSaveButton.addClass( 'kitbuilder-button-state' );\n\n\t\tNProgress.start();\n\n\t\tkitbuilder.saveEditor( options );\n\t},\n\n\t_saveBuilderDraft: function() {\n\t\tkitbuilder.saveEditor();\n\t},\n\n\tgetDeviceModeButton: function( deviceMode ) {\n\t\treturn this.ui.deviceModeButtons.filter( '[data-device-mode=\"' + deviceMode + '\"]' );\n\t},\n\n\tonPanelClick: function( event ) {\n\t\tvar $target = Backbone.$( event.target ),\n\t\t\tisClickInsideOfTool = $target.closest( '.kitbuilder-panel-footer-sub-menu-wrapper' ).length;\n\n\t\tif ( isClickInsideOfTool ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar $tool = $target.closest( '.kitbuilder-panel-footer-tool' ),\n\t\t\tisClosedTool = $tool.length && ! $tool.hasClass( 'kitbuilder-open' );\n\n\t\tthis.ui.menuButtons.removeClass( 'kitbuilder-open' );\n\n\t\tif ( isClosedTool ) {\n\t\t\t$tool.addClass( 'kitbuilder-open' );\n\t\t}\n\t},\n\n\tonEditorChanged: function() {\n\t\tthis.ui.buttonSave.toggleClass( 'kitbuilder-save-active', kitbuilder.isEditorChanged() );\n\t},\n\n\tonDeviceModeChange: function() {\n\t\tvar previousDeviceMode = kitbuilder.channels.deviceMode.request( 'previousMode' ),\n\t\t\tcurrentDeviceMode = kitbuilder.channels.deviceMode.request( 'currentMode' );\n\n\t\tthis.getDeviceModeButton( previousDeviceMode ).removeClass( 'active' );\n\n\t\tthis.getDeviceModeButton( currentDeviceMode ).addClass( 'active' );\n\n\t\t// Change the footer icon\n\t\tthis.ui.deviceModeIcon.removeClass( 'kb kb-device-' + previousDeviceMode ).addClass( 'kb kb-device-' + currentDeviceMode );\n\t},\n\n\tonClickButtonSave: function() {\n\t\t//this._saveBuilderDraft();\n\t\tthis._publishBuilder();\n\t},\n\n\tonClickButtonPublish: function( event ) {\n\t\t// Prevent click on save button\n\t\tevent.stopPropagation();\n\n\t\tthis._publishBuilder();\n\t},\n\n\tonClickResponsiveButtons: function( event ) {\n\t\tvar $clickedButton = this.$( event.currentTarget ),\n\t\t\tnewDeviceMode = $clickedButton.data( 'device-mode' );\n\n\t\tkitbuilder.changeDeviceMode( newDeviceMode );\n\t},\n\n\tonClickWatchTutorial: function() {\n\t\tkitbuilder.introduction.startIntroduction();\n\t},\n\n\tonClickShowTemplates: function() {\n\t\tkitbuilder.templates.showTemplatesModal();\n\t},\n\n\tonClickSaveTemplate: function() {\n\t\tkitbuilder.templates.startModal( function() {\n\t\t\tkitbuilder.templates.getLayout().showSaveTemplateView();\n\t\t} );\n\t},\n\n\tonRender: function() {\n\t\tvar self = this;\n\n\t\t_.defer( function() {\n\t\t\tkitbuilder.getPanelView().$el.on( 'click', _.bind( self.onPanelClick, self ) );\n\t\t} );\n\t}\n} );\n\nmodule.exports = PanelFooterItemView;\n",
    "var PanelHeaderItemView;\n\nPanelHeaderItemView = Marionette.ItemView.extend( {\n\ttemplate: '#tmpl-kitbuilder-panel-header',\n\n\tid: 'kitbuilder-panel-header',\n\n\tui: {\n\t\tmenuButton: '#kitbuilder-panel-header-menu-button',\n\t\taddButton: '#kitbuilder-panel-header-add-button'\n\t},\n\n\tevents: {\n\t\t'click @ui.addButton': 'onClickAdd',\n\t\t'click @ui.menuButton': 'onClickMenu'\n\t},\n\n\tonClickAdd: function() {\n\t\tkitbuilder.getPanelView().setPage( 'elements' );\n\t},\n\n\tonClickMenu: function() {\n\t\tvar panel = kitbuilder.getPanelView(),\n\t\t\tcurrentPanelPageName = panel.getCurrentPageName(),\n\t\t\tnextPage = 'menu' === currentPanelPageName ? 'elements' : 'menu';\n\n\t\tpanel.setPage( nextPage );\n\t}\n} );\n\nmodule.exports = PanelHeaderItemView;\n",
    "var ControlsStack = require( 'kitbuilder-views/controls-stack' ),\n\tEditorView;\n\nEditorView = ControlsStack.extend( {\n\ttemplate: Marionette.TemplateCache.get( '#tmpl-editor-content' ),\n\n\tid: 'kitbuilder-panel-page-editor',\n\n\tchildViewContainer: '#kitbuilder-controls',\n\n\tchildViewOptions: function() {\n\t\treturn {\n\t\t\telementSettingsModel: this.model.get( 'settings' ),\n\t\t\telementEditSettings: this.model.get( 'editSettings' )\n\t\t};\n\t},\n\n\tactivateSection: function( sectionName ) {\n\t\tControlsStack.prototype.activateSection.apply( this, arguments );\n\n\t\tkitbuilder.channels.editor.trigger( 'section:activated', sectionName, this );\n\t},\n\n\tonBeforeRender: function() {\n\t\tvar controls = kitbuilder.getElementControls( this.model );\n\n\t\tif ( ! controls ) {\n\t\t\tthrow new Error( 'Editor controls not found' );\n\t\t}\n\n\t\t// Create new instance of that collection\n\t\tthis.collection = new Backbone.Collection( _.values( controls ) );\n\t},\n\n\tonDestroy: function() {\n\t\tvar editedElementView = this.getOption( 'editedElementView' );\n\n\t\tif ( editedElementView ) {\n\t\t\teditedElementView.$el.removeClass( 'kitbuilder-element-editable' );\n\t\t}\n\n\t\tthis.model.trigger( 'editor:close' );\n\n\t\tthis.triggerMethod( 'editor:destroy' );\n\t},\n\n\tonRender: function() {\n\t\tvar editedElementView = this.getOption( 'editedElementView' );\n\n\t\tif ( editedElementView ) {\n\t\t\teditedElementView.$el.addClass( 'kitbuilder-element-editable' );\n\t\t}\n\t},\n\n\tonDeviceModeChange: function() {\n\t\tControlsStack.prototype.onDeviceModeChange.apply( this, arguments );\n\n\t\tvar self = this;\n\n\t\t// Timeout according to preview resize css animation duration\n\t\tsetTimeout( function() {\n\t\t\tkitbuilder.$previewContents.find( 'html, body' ).animate( {\n\t\t\t\tscrollTop: self.getOption( 'editedElementView' ).$el.offset().top - kitbuilder.$preview[0].contentWindow.innerHeight / 2\n\t\t\t} );\n\t\t}, 500 );\n\t},\n\n\tonChildviewSettingsChange: function( childView ) {\n\t\tvar editedElementView = this.getOption( 'editedElementView' ),\n\t\t\teditedElementType = editedElementView.model.get( 'elType' );\n\n\t\tif ( 'widget' === editedElementType ) {\n\t\t\teditedElementType = editedElementView.model.get( 'widgetType' );\n\t\t}\n\n\t\tkitbuilder.channels.editor\n\t\t\t.trigger( 'change', childView, editedElementView )\n\t\t\t.trigger( 'change:' + editedElementType, childView, editedElementView )\n\t\t\t.trigger( 'change:' + editedElementType + ':' + childView.model.get( 'name' ), childView, editedElementView );\n\t}\n} );\n\nmodule.exports = EditorView;\n",
    "var PanelElementsCategory = require( '../models/element' ),\n\tPanelElementsCategoriesCollection;\n\nPanelElementsCategoriesCollection = Backbone.Collection.extend( {\n\tmodel: PanelElementsCategory\n} );\n\nmodule.exports = PanelElementsCategoriesCollection;\n",
    "var PanelElementsElementModel = require( '../models/element' ),\n\tPanelElementsElementsCollection;\n\nPanelElementsElementsCollection = Backbone.Collection.extend( {\n\tmodel: PanelElementsElementModel/*,\n\tcomparator: 'title'*/\n} );\n\nmodule.exports = PanelElementsElementsCollection;\n",
    "var PanelElementsCategoriesCollection = require( './collections/categories' ),\n\tPanelElementsElementsCollection = require( './collections/elements' ),\n\tPanelElementsCategoriesView = require( './views/categories' ),\n\tPanelElementsElementsView = kitbuilder.modules.templateLibrary.ElementsCollectionView,\n\tPanelElementsSearchView = require( './views/search' ),\n\tPanelElementsLayoutView;\n\nPanelElementsLayoutView = Marionette.LayoutView.extend( {\n\ttemplate: '#tmpl-kitbuilder-panel-elements',\n\n\tid: 'kitbuilder-panel-elements-search-area',\n\n\tregions: {\n\t\telements: '#kitbuilder-panel-elements-wrapper',\n\t\tsearch: '#kitbuilder-panel-elements-search-area'\n\t},\n\n\tui: {\n\t\ttabs: '.kitbuilder-panel-navigation-tab'\n\t},\n\n\tevents: {\n\t\t'click @ui.tabs': 'onTabClick'\n\t},\n\n\tregionViews: {},\n\n\telementsCollection: null,\n\n\tcategoriesCollection: null,\n\n\tinitialize: function() {\n\t\tthis.listenTo( kitbuilder.channels.panelElements, 'element:selected', this.destroy );\n\n\t\tthis.initElementsCollection();\n\n\t\tthis.initCategoriesCollection();\n\n\t\tthis.initRegionViews();\n\t},\n\n\tinitRegionViews: function() {\n\t\tvar regionViews = {\n\t\t\telements: {\n\t\t\t\tregion: this.elements,\n\t\t\t\tview: PanelElementsElementsView,\n\t\t\t\toptions: { collection: this.elementsCollection }\n\t\t\t},\n\t\t\tcategories: {\n\t\t\t\tregion: this.elements,\n\t\t\t\tview: PanelElementsCategoriesView,\n\t\t\t\toptions: { collection: this.categoriesCollection }\n\t\t\t},\n\t\t\tsearch: {\n\t\t\t\tregion: this.search,\n\t\t\t\tview: PanelElementsSearchView\n\t\t\t}\n\t\t};\n\n\t\tthis.regionViews = kitbuilder.hooks.applyFilters( 'panel/elements/regionViews', regionViews );\n\t},\n\n\tinitElementsCollection: function() {\n\t\tvar elementsCollection = new PanelElementsElementsCollection(),\n\t\t\tsectionConfig = kitbuilder.config.elements.section;\n\n\t\telementsCollection.add( {\n\t\t\ttitle: kitbuilder.translate( 'inner_section' ),\n\t\t\telType: 'section',\n\t\t\tcategories: [ 'general-elements' ],\n\t\t\ticon: sectionConfig.icon\n\t\t} );\n\n\t\t// TODO: Change the array from server syntax, and no need each loop for initialize\n\t\t_.each( kitbuilder.config.widgets, function( element ) {\n\t\t\telementsCollection.add( {\n\t\t\t\ttitle: element.title,\n\t\t\t\telType: element.elType,\n\t\t\t\tcategories: element.categories,\n\t\t\t\tkeywords: element.keywords,\n\t\t\t\ticon: element.icon,\n\t\t\t\twidgetType: element.widget_type,\n\t\t\t\tcustom: element.custom\n\t\t\t} );\n\t\t} );\n\n\t\tthis.elementsCollection = elementsCollection;\n\t},\n\n\tinitCategoriesCollection: function() {\n\t\tvar categories = {};\n\n\t\tthis.elementsCollection.each( function( element ) {\n\t\t\t_.each( element.get( 'categories' ), function( category ) {\n\t\t\t\tif ( ! categories[ category ] ) {\n\t\t\t\t\tcategories[ category ] = [];\n\t\t\t\t}\n\n\t\t\t\tcategories[ category ].push( element );\n\t\t\t} );\n\t\t} );\n\n\t\tvar categoriesCollection = new PanelElementsCategoriesCollection();\n\n\t\t_.each( kitbuilder.config.elements_categories, function( categoryConfig, categoryName ) {\n\t\t\tif ( ! categories[ categoryName ] ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcategoriesCollection.add( {\n\t\t\t\tname: categoryName,\n\t\t\t\ttitle: categoryConfig.title,\n\t\t\t\ticon: categoryConfig.icon,\n\t\t\t\titems: categories[ categoryName ]\n\t\t\t} );\n\t\t} );\n\n\t\tthis.categoriesCollection = categoriesCollection;\n\t},\n\n\tactivateTab: function( tabName ) {\n\t\tthis.ui.tabs\n\t\t\t.removeClass( 'active' )\n\t\t\t.filter( '[data-view=\"' + tabName + '\"]' )\n\t\t\t.addClass( 'active' );\n\n\t\tthis.showView( tabName );\n\t},\n\n\tshowView: function( viewName ) {\n\t\tvar viewDetails = this.regionViews[ viewName ],\n\t\t\toptions = viewDetails.options || {};\n\n\t\tviewDetails.region.show( new viewDetails.view( options ) );\n\t},\n\n\tclearSearchInput: function() {\n\t\tthis.getChildView( 'search' ).clearInput();\n\t},\n\n\tchangeFilter: function( filterValue ) {\n\t\tkitbuilder.channels.panelElements\n\t\t\t.reply( 'filter:value', filterValue )\n\t\t\t.trigger( 'filter:change' );\n\t},\n\n\tclearFilters: function() {\n\t\tthis.changeFilter( null );\n\t\tthis.clearSearchInput();\n\t},\n\n\tonChildviewChildrenRender: function() {\n\t\tthis.updateElementsScrollbar();\n\t},\n\n\tonChildviewSearchChangeInput: function( child ) {\n\t\tthis.changeFilter( child.ui.input.val(), 'search' );\n\t},\n\n\tonDestroy: function() {\n\t\tkitbuilder.channels.panelElements.reply( 'filter:value', null );\n\t},\n\n\tonShow: function() {\n\t\tthis.showView( 'categories' );\n\n\t\tthis.showView( 'search' );\n\t},\n\n\tonTabClick: function( event ) {\n\t\tthis.activateTab( event.currentTarget.dataset.view );\n\t},\n\n\tupdateElementsScrollbar: function() {\n\t\tkitbuilder.channels.data.trigger( 'scrollbar:update' );\n\t}\n} );\n\nmodule.exports = PanelElementsLayoutView;\n",
    "var PanelElementsElementModel;\n\nPanelElementsElementModel = Backbone.Model.extend( {\n\tdefaults: {\n\t\ttitle: '',\n\t\tcategories: [],\n\t\tkeywords: [],\n\t\ticon: '',\n\t\telType: 'widget',\n\t\twidgetType: ''\n\t}\n} );\n\nmodule.exports = PanelElementsElementModel;\n",
    "var PanelElementsCategoryView = require( './category' ),\n\tPanelElementsCategoriesView;\n\nPanelElementsCategoriesView = Marionette.CompositeView.extend( {\n\ttemplate: '#tmpl-kitbuilder-panel-categories',\n\n\tchildView: PanelElementsCategoryView,\n\n\tchildViewContainer: '#kitbuilder-panel-categories',\n\n\tid: 'kitbuilder-panel-elements-categories',\n\n\tinitialize: function() {\n\t\tthis.listenTo( kitbuilder.channels.panelElements, 'filter:change', this.onPanelElementsFilterChange );\n\t},\n\n\tonPanelElementsFilterChange: function() {\n\t\tkitbuilder.getPanelView().getCurrentPageView().showView( 'elements' );\n\t}\n} );\n\nmodule.exports = PanelElementsCategoriesView;\n",
    "var PanelElementsElementsCollection = require( '../collections/elements' ),\n\tPanelElementsCategoryView;\n\nPanelElementsCategoryView = Marionette.CompositeView.extend( {\n\ttemplate: '#tmpl-kitbuilder-panel-elements-category',\n\n\tclassName: 'kitbuilder-panel-category',\n\n\tchildView: require( 'kitbuilder-panel/pages/elements/views/element' ),\n\n\tchildViewContainer: '.panel-elements-category-items',\n\n\tinitialize: function() {\n\t\tthis.collection = new PanelElementsElementsCollection( this.model.get( 'items' ) );\n\t}\n} );\n\nmodule.exports = PanelElementsCategoryView;\n",
    "var PanelElementsElementView;\n\nPanelElementsElementView = Marionette.ItemView.extend( {\n\ttemplate: '#tmpl-kitbuilder-element-library-element',\n\n\tclassName: 'kitbuilder-element-wrapper',\n\n\tonRender: function() {\n\t\tvar self = this;\n\n\t\tthis.$el.html5Draggable( {\n\n\t\t\tonDragStart: function() {\n\t\t\t\tkitbuilder.channels.panelElements\n\t\t\t\t\t.reply( 'element:selected', self )\n\t\t\t\t\t.trigger( 'element:drag:start' );\n\t\t\t},\n\n\t\t\tonDragEnd: function() {\n\t\t\t\tkitbuilder.channels.panelElements.trigger( 'element:drag:end' );\n\t\t\t},\n\n\t\t\tgroups: [ 'kitbuilder-element' ]\n\t\t} );\n\t}\n} );\n\nmodule.exports = PanelElementsElementView;\n",
    "var PanelElementsElementsView;\n\nPanelElementsElementsView = Marionette.CollectionView.extend( {\n\tchildView: require( 'kitbuilder-panel/pages/elements/views/element' ),\n\n\tid: 'kitbuilder-panel-elements',\n\n\tinitialize: function() {\n\t\tthis.listenTo( kitbuilder.channels.panelElements, 'filter:change', this.onFilterChanged );\n\t},\n\n\tfilter: function( childModel ) {\n\t\tvar filterValue = kitbuilder.channels.panelElements.request( 'filter:value' );\n\n\t\tif ( ! filterValue ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( -1 !== childModel.get( 'title' ).toLowerCase().indexOf( filterValue.toLowerCase() ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn _.any( childModel.get( 'keywords' ), function( keyword ) {\n\t\t\treturn ( -1 !== keyword.toLowerCase().indexOf( filterValue.toLowerCase() ) );\n\t\t} );\n\t},\n\n\tonFilterChanged: function() {\n\t\tvar filterValue = kitbuilder.channels.panelElements.request( 'filter:value' );\n\n\t\tif ( ! filterValue ) {\n\t\t\tthis.onFilterEmpty();\n\t\t}\n\n\t\tthis._renderChildren();\n\n\t\tthis.triggerMethod( 'children:render' );\n\t},\n\n\tonFilterEmpty: function() {\n\t\tkitbuilder.getPanelView().getCurrentPageView().showView( 'categories' );\n\t}\n} );\n\nmodule.exports = PanelElementsElementsView;\n",
    "var PanelElementsSearchView;\n\nPanelElementsSearchView = Marionette.ItemView.extend( {\n\ttemplate: '#tmpl-kitbuilder-panel-element-search',\n\n\tid: 'kitbuilder-panel-elements-search-wrapper',\n\n\tui: {\n\t\tinput: 'input'\n\t},\n\n\tevents: {\n\t\t'keyup @ui.input': 'onInputChanged'\n\t},\n\n\tonInputChanged: function( event ) {\n\t\tvar ESC_KEY = 27;\n\n\t\tif ( ESC_KEY === event.keyCode ) {\n\t\t\tthis.clearInput();\n\t\t}\n\n\t\tthis.triggerMethod( 'search:change:input' );\n\t},\n\n\tclearInput: function() {\n\t\tthis.ui.input.val( '' );\n\t}\n} );\n\nmodule.exports = PanelElementsSearchView;\n",
    "var PanelMenuItemView = require( 'kitbuilder-panel/pages/menu/views/item' ),\n\tPanelMenuPageView;\n\nPanelMenuPageView = Marionette.CollectionView.extend( {\n\tid: 'kitbuilder-panel-page-menu',\n\n\tchildView: PanelMenuItemView,\n\n\tinitialize: function() {\n\t\tthis.collection = new Backbone.Collection( [\n\t\t\t{\n\t\t\t\ticon: 'fa fa-history',\n\t\t\t\ttitle: kitbuilder.translate( 'revision_history' ),\n\t\t\t\ttype: 'page',\n\t\t\t\tpageName: 'revisionsPage'\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: 'fa fa-cog',\n\t\t\t\ttitle: kitbuilder.translate( 'page_settings' ),\n\t\t\t\ttype: 'page',\n\t\t\t\tpageName: 'settingsPage'\n\t\t\t},\n            {\n                icon: 'fa fa-eraser',\n                title: kitbuilder.translate( 'clear_page' ),\n                callback: function() {\n                    kitbuilder.clearPage();\n                }\n            },\n\t\t\t{\n\t\t\t\ticon: 'kb kb-kitbuilder',\n\t\t\t\ttitle: kitbuilder.translate( 'kitbuilder_settings' ),\n\t\t\t\ttype: 'link',\n\t\t\t\tlink: kitbuilder.config.settings_page_link,\n\t\t\t\tnewTab: true\n\t\t\t}\n\t\t] );\n\t},\n\n\tonChildviewClick: function( childView ) {\n\t\tvar menuItemType = childView.model.get( 'type' );\n\n\t\tswitch ( menuItemType ) {\n\t\t\tcase 'page' :\n\t\t\t\tvar pageName = childView.model.get( 'pageName' ),\n\t\t\t\t\tpageTitle = childView.model.get( 'title' );\n\n\t\t\t\tkitbuilder.getPanelView().setPage( pageName, pageTitle );\n\t\t\t\tbreak;\n\n\t\t\tcase 'link' :\n\t\t\t\tvar link = childView.model.get( 'link' ),\n\t\t\t\t\tisNewTab = childView.model.get( 'newTab' );\n\n\t\t\t\tif ( isNewTab ) {\n\t\t\t\t\topen( link, '_blank' );\n\t\t\t\t} else {\n\t\t\t\t\tlocation.href = childView.model.get( 'link' );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tvar callback = childView.model.get( 'callback' );\n\n\t\t\t\tif ( _.isFunction( callback ) ) {\n\t\t\t\t\tcallback.call( childView );\n\t\t\t\t}\n\t\t}\n\t}\n} );\n\nmodule.exports = PanelMenuPageView;\n",
    "var PanelMenuItemView;\n\nPanelMenuItemView = Marionette.ItemView.extend( {\n\ttemplate: '#tmpl-kitbuilder-panel-menu-item',\n\n\tclassName: 'kitbuilder-panel-menu-item',\n\n\ttriggers: {\n\t\tclick: 'click'\n\t}\n} );\n\nmodule.exports = PanelMenuItemView;\n",
    "var ControlsStack = require( 'kitbuilder-views/controls-stack' );\n\nmodule.exports = ControlsStack.extend( {\n\tid: 'kitbuilder-panel-page-settings',\n\n\ttemplate: '#tmpl-kitbuilder-panel-page-settings',\n\n\tchildViewContainer: '#kitbuilder-panel-page-settings-controls',\n\n\tchildViewOptions: function() {\n\t\treturn {\n\t\t\telementSettingsModel: this.model\n\t\t};\n\t},\n\n\tinitialize: function() {\n\t\tthis.model = kitbuilder.pageSettings.model;\n\n\t\tthis.collection = new Backbone.Collection( _.values( this.model.controls ) );\n\t}\n} );\n",
    "var EditModeItemView = require( 'kitbuilder-layouts/edit-mode' ),\n\tPanelLayoutView;\n\nPanelLayoutView = Marionette.LayoutView.extend( {\n\ttemplate: '#tmpl-kitbuilder-panel',\n\n\tid: 'kitbuilder-panel-inner',\n\n\tregions: {\n\t\tcontent: '#kitbuilder-panel-content-wrapper',\n\t\theader: '#kitbuilder-panel-header-wrapper',\n\t\tfooter: '#kitbuilder-panel-footer',\n\t\tmodeSwitcher: '#kitbuilder-mode-switcher'\n\t},\n\n\tui:{\n\t\tmodalTitle: '#kitbuilder-panel-elements-header',\n\t\tpanelContainer: '#kitbuilder-panel-content-wrap',\n        panelColse: '#kitbuilder-panel-elements-header-close',\n        resizeable: '#kitbuilder-panel-content-wrapper-top'\n\t},\n\n\tpages: {},\n\n\tchildEvents: {\n\t\t'click:add': function() {\n\t\t\tthis.setPage( 'elements' );\n\t\t},\n\t\t'editor:destroy': function() {\n\t\t\tthis.setPage( 'elements' );\n\t\t}\n\t},\n\n\tcurrentPageName: null,\n\n\t_isScrollbarInitialized: false,\n    _isDragablePanel: false,\n    _isResizablePanel: false,\n\n\tinitialize: function() {\n\t\tthis.initPages();\n\t},\n\n\tbuildPages: function() {\n\t\tvar pages = {\n\t\t\telements: {\n\t\t\t\tview: require( 'kitbuilder-panel/pages/elements/elements' ),\n                title: kitbuilder.translate( 'element' )\n\t\t\t},\n\t\t\teditor: {\n\t\t\t\tview: require( 'kitbuilder-panel/pages/editor' )\n\t\t\t},\n\t\t\tmenu: {\n\t\t\t\tview: require( 'kitbuilder-panel/pages/menu/menu' ),\n\t\t\t\ttitle: kitbuilder.translate( 'global_settings' )\n\t\t\t},\n\t\t\tsettingsPage: {\n\t\t\t\tview: require( 'kitbuilder-panel/pages/page-settings/page-settings' ),\n\t\t\t\ttitle: kitbuilder.translate( 'page_settings' )\n\t\t\t}\n\t\t};\n\n\n\t\treturn pages;\n\t},\n\n\tinitPages: function() {\n\t\tvar pages;\n\n\t\tthis.getPages = function( page ) {\n\t\t\tif ( ! pages ) {\n\t\t\t\tpages = this.buildPages();\n\t\t\t}\n\n\t\t\treturn page ? pages[ page ] : pages;\n\t\t};\n\n\t\tthis.addPage = function( pageName, pageData ) {\n\t\t\tif ( ! pages ) {\n\t\t\t\tpages = this.buildPages();\n\t\t\t}\n\n\t\t\tpages[ pageName ] = pageData;\n\t\t};\n\t},\n\n\tgetHeaderView: function() {\n\t\treturn this.getChildView( 'header' );\n\t},\n\n\tgetFooterView: function() {\n\t\treturn this.getChildView( 'footer' );\n\t},\n\n\tgetCurrentPageName: function() {\n\t\treturn this.currentPageName;\n\t},\n\n\tgetCurrentPageView: function() {\n\t\treturn this.getChildView( 'content' );\n\t},\n\n\tsetPage: function( page, title, viewOptions ) {\n\t\tvar pageData = this.getPages( page );\n\n\t\tif ( ! pageData ) {\n\t\t\tthrow new ReferenceError( 'Kitbuilder panel doesn\\'t have page named \\'' + page + '\\'' );\n\t\t}\n\n\t\tif ( pageData.options ) {\n\t\t\tviewOptions = _.extend( pageData.options, viewOptions );\n\t\t}\n\n\t\tvar View = pageData.view;\n\n\t\tif ( pageData.getView ) {\n\t\t\tView = pageData.getView();\n\t\t}\n\n\t\tvar newContentView = new View( viewOptions );\n\n\n\t\tthis.showChildView( 'content',  newContentView);\n\n        this.ui.modalTitle.html( title || pageData.title );\n\n\t\tthis.currentPageName = page;\n\n        this.showContentPanel();\n\t},\n\n\topenEditor: function( model, view ) {\n\t\tvar currentPageName = this.getCurrentPageName();\n\n\t\tif ( 'editor' === currentPageName ) {\n\t\t\tvar currentPageView = this.getCurrentPageView(),\n\t\t\t\tcurrentEditableModel = currentPageView.model;\n\n\t\t\tif ( currentEditableModel === model ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tvar elementData = kitbuilder.getElementData( model );\n\n\t\tthis.setPage( 'editor', kitbuilder.translate( 'edit_element', [ elementData.title ] ), {\n\t\t\tmodel: model,\n\t\t\teditedElementView: view\n\t\t} );\n\n\t\tvar action = 'panel/open_editor/' + model.get( 'elType' );\n\n\t\t// Example: panel/open_editor/widget\n\t\tkitbuilder.hooks.doAction( action, this, model, view );\n\n\t\t// Example: panel/open_editor/widget/heading\n\t\tkitbuilder.hooks.doAction( action + '/' + model.get( 'widgetType' ), this, model, view );\n\t},\n\n\tonBeforeShow: function() {\n\t\tvar PanelFooterItemView = require( 'kitbuilder-layouts/panel/footer' ),\n\t\t\tPanelHeaderItemView = require( 'kitbuilder-layouts/panel/header' );\n\n\t\t// Edit Mode\n\t\tthis.showChildView( 'modeSwitcher', new EditModeItemView() );\n\n\t\t// Header\n\t\tthis.showChildView( 'header', new PanelHeaderItemView() );\n\n\t\t// Footer\n\t\tthis.showChildView( 'footer', new PanelFooterItemView() );\n\n\t\t// Added Editor events\n\t\tthis.updateScrollbar = _.throttle( this.updateScrollbar, 100 );\n\n\t\tthis.getRegion( 'content' )\n\t\t\t.on( 'before:show', _.bind( this.onEditorBeforeShow, this ) )\n\t\t\t.on( 'empty', _.bind( this.onEditorEmpty, this ) )\n\t\t\t.on( 'show', _.bind( this.updateScrollbar, this ) );\n\n        this.getRegion( 'content' ).on( 'show', _.bind( this.dragablePanel, this ) );\n        this.getRegion( 'content' ).on( 'show empty', _.bind( this.resizablePanel, this ) );\n\n        this.ui.panelColse.on('click', _.bind( this.hideContentPanel, this ));\n\n\t\t// Set default page to elements\n\t\t// this.setPage( 'elements' );\n\n\t\tthis.listenTo( kitbuilder.channels.data, 'scrollbar:update', this.updateScrollbar );\n\n\t},\n\n\tonEditorBeforeShow: function() {\n\t\t_.defer( _.bind( this.updateScrollbar, this ) );\n\t},\n\n\tonEditorEmpty: function() {\n\t\tthis.updateScrollbar();\n\t},\n\n    showContentPanel: function () {\n        this.ui.panelContainer.addClass('active');\n    },\n\n    hideContentPanel: function () {\n        this.setPage( 'elements' );\n        this.ui.panelContainer.removeClass('active');\n        this.currentPageName = null;\n    },\n\n\tdragablePanel: function () {\n        var $dpanel = this.ui.panelContainer;\n\n        if ( ! this._isDragablePanel ) {\n            $dpanel.draggable({handle: \"#kitbuilder-panel-elements-header\"});\n            this._isDragablePanel = true;\n\n            return;\n        }\n    },\n\n    resizablePanel: function () {\n        var $panel = this.ui.resizeable;\n\n        if ( ! this._isResizablePanel ) {\n            $panel.resizable({\n                delay: 0,\n                minWidth: 200,\n                start: function( e, ui ) {\n                    e.preventDefault();\n                },\n                resize: function (e, ui) {\n                    e.preventDefault();\n                    $panel.css({height: ui.size.height, width: ui.size.width});\n\n                },\n\t\t\t\tstop: function () {\n                    kitbuilder.channels.data.trigger( 'scrollbar:update' );\n                }\n\t\t\t});\n            this._isResizablePanel = true;\n\n        } else {\n            $panel.resizable(\"destroy\");\n            $panel.resizable({\n                delay: 0,\n                minWidth: 200,\n                resize: function (e, ui) {\n                    $panel.css({height: ui.size.height, width: ui.size.width});\n                },\n                stop: function () {\n                    kitbuilder.channels.data.trigger( 'scrollbar:update' );\n                }\n            });\n        }\n    },\n\n\tupdateScrollbar: function() {\n\t\tvar $panel = this.content.$el;\n\n\t\tif ( ! this._isScrollbarInitialized ) {\n\t\t\t$panel.perfectScrollbar();\n\t\t\tthis._isScrollbarInitialized = true;\n\n\t\t\treturn;\n\t\t}\n\n\t\t$panel.perfectScrollbar( 'update' );\n\t}\n} );\n\nmodule.exports = PanelLayoutView;\n",
    "var BaseSettingsModel;\n\nBaseSettingsModel = Backbone.Model.extend( {\n\toptions: {},\n\n\tinitialize: function( data, options ) {\n\t\tvar self = this;\n\n\t\tif ( options ) {\n\t\t\t// Keep the options for cloning\n\t\t\tself.options = options;\n\t\t}\n\n\t\tself.controls = ( options && options.controls ) ? options.controls : kitbuilder.getElementControls( self );\n\n\t\tif ( ! self.controls ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar attrs = data || {},\n\t\t\tdefaults = {};\n\n\t\t_.each( self.controls, function( field ) {\n\t\t\tvar control = kitbuilder.config.controls[ field.type ],\n\t\t\t\tisMultipleControl = _.isObject( control.default_value );\n\n\t\t\tif ( isMultipleControl  ) {\n\t\t\t\tdefaults[ field.name ] = _.extend( {}, control.default_value, field['default'] || {} );\n\t\t\t} else {\n\t\t\t\tdefaults[ field.name ] = field['default'] || control.default_value;\n\t\t\t}\n\n\t\t\tif ( undefined !== attrs[ field.name ] ) {\n\t\t\t\tif ( isMultipleControl && ! _.isObject( attrs[ field.name ] ) ) {\n\n\t\t\t\t\tconsole.error('An invalid argument supplied as multiple control value: Element `' + ( self.get( 'widgetType' ) || self.get( 'elType' ) ) + '` got <' + attrs[ field.name ] + '> as `' + field.name + '` value. Expected array or object.');\n\n\t\t\t\t\tdelete attrs[ field.name ];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( undefined === attrs[ field.name ] ) {\n\t\t\t\tattrs[ field.name ] = defaults[ field.name ];\n\t\t\t}\n\t\t} );\n\n\t\tself.defaults = defaults;\n\n\t\tself.handleRepeaterData( attrs );\n\n\t\tself.set( attrs );\n\t},\n\n\thandleRepeaterData: function( attrs ) {\n\t\t_.each( this.controls, function( field ) {\n\t\t\tif ( field.is_repeater ) {\n\t\t\t\t// TODO: Apply defaults on each field in repeater fields\n\t\t\t\tif ( ! ( attrs[ field.name ] instanceof Backbone.Collection ) ) {\n\t\t\t\t\tattrs[ field.name ] = new Backbone.Collection( attrs[ field.name ], {\n\t\t\t\t\t\tmodel: function( attrs, options ) {\n\t\t\t\t\t\t\toptions = options || {};\n\n\t\t\t\t\t\t\toptions.controls = field.fields;\n\n\t\t\t\t\t\t\tif ( ! attrs._id ) {\n\t\t\t\t\t\t\t\tattrs._id = kitbuilder.helpers.getUniqueID();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn new BaseSettingsModel( attrs, options );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\tgetFontControls: function() {\n\t\treturn _.filter( this.getActiveControls(), function( control ) {\n\t\t\treturn 'font' === control.type;\n\t\t} );\n\t},\n\n\tgetStyleControls: function( controls ) {\n\t\tvar self = this;\n\n\t\tcontrols = controls || self.getActiveControls();\n\n\t\treturn _.filter( controls, function( control ) {\n\t\t\tif ( control.fields ) {\n\t\t\t\tcontrol.styleFields = self.getStyleControls( control.fields );\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn self.isStyleControl( control.name, controls );\n\t\t} );\n\t},\n\n\tisStyleControl: function( attribute, controls ) {\n\t\tcontrols = controls || this.controls;\n\n\t\tvar currentControl = _.find( controls, function( control ) {\n\t\t\treturn attribute === control.name;\n\t\t} );\n\n\t\treturn currentControl && ! _.isEmpty( currentControl.selectors );\n\t},\n\n\tgetClassControls: function( controls ) {\n\t\tcontrols = controls || this.controls;\n\n\t\treturn _.filter( controls, function( control ) {\n\t\t\treturn ! _.isUndefined( control.prefix_class );\n\t\t} );\n\t},\n\n\tisClassControl: function( attribute ) {\n\t\tvar currentControl = _.find( this.controls, function( control ) {\n\t\t\treturn attribute === control.name;\n\t\t} );\n\n\t\treturn currentControl && ! _.isUndefined( currentControl.prefix_class );\n\t},\n\n\tgetControl: function( id ) {\n\t\treturn _.find( this.controls, function( control ) {\n\t\t\treturn id === control.name;\n\t\t} );\n\t},\n\n\tgetActiveControls: function() {\n\t\tvar self = this,\n\t\t\tcontrols = {};\n\n\t\t_.each( self.controls, function( control, controlKey ) {\n\t\t\tif ( kitbuilder.helpers.isActiveControl( control, self.attributes ) ) {\n\t\t\t\tcontrols[ controlKey ] = control;\n\t\t\t}\n\t\t} );\n\n\t\treturn controls;\n\t},\n\n\tclone: function() {\n\t\treturn new BaseSettingsModel( kitbuilder.helpers.cloneObject( this.attributes ), kitbuilder.helpers.cloneObject( this.options ) );\n\t},\n\n\ttoJSON: function( options ) {\n\t\tvar data = Backbone.Model.prototype.toJSON.call( this );\n\n\t\toptions = options || {};\n\n\t\tdelete data.widgetType;\n\t\tdelete data.elType;\n\t\tdelete data.isInner;\n\n\t\t_.each( data, function( attribute, key ) {\n\t\t\tif ( attribute && attribute.toJSON ) {\n\t\t\t\tdata[ key ] = attribute.toJSON();\n\t\t\t}\n\t\t} );\n\n\t\tif ( options.removeDefault ) {\n\t\t\tvar controls = this.controls;\n\n\t\t\t_.each( data, function( value, key ) {\n\t\t\t\tvar control = controls[ key ];\n\n\t\t\t\tif ( control ) {\n\t\t\t\t\tif ( ( 'text' === control.type || 'textarea' === control.type ) && data[ key ] ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( 'object' === typeof data[ key ] ) {\n\t\t\t\t\t\t// First check length difference\n\t\t\t\t\t\tif ( Object.keys( data[ key ] ).length !== Object.keys( control[ 'default' ] ).length ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// If it's equal length, loop over value\n\t\t\t\t\t\tvar isEqual = true;\n\n\t\t\t\t\t\t_.each( data[ key ], function( propertyValue, propertyKey ) {\n\t\t\t\t\t\t\tif ( data[ key ][ propertyKey ] !== control[ 'default' ][ propertyKey ] ) {\n\t\t\t\t\t\t\t\treturn isEqual = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tif ( isEqual ) {\n\t\t\t\t\t\t\tdelete data[ key ];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( data[ key ] === control[ 'default' ] ) {\n\t\t\t\t\t\t\tdelete data[ key ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\treturn data;\n\t}\n} );\n\nmodule.exports = BaseSettingsModel;\n",
    "var BaseSettingsModel = require( 'kitbuilder-models/base-settings' ),\n\tColumnSettingsModel;\n\nColumnSettingsModel = BaseSettingsModel.extend( {\n\tdefaults: {\n\t\t_inline_size: '',\n\t\t_column_size: 100\n\t}\n} );\n\nmodule.exports = ColumnSettingsModel;\n",
    "var BaseSettingsModel = require( 'kitbuilder-models/base-settings' ),\n\tWidgetSettingsModel = require( 'kitbuilder-models/widget-settings' ),\n\tColumnSettingsModel = require( 'kitbuilder-models/column-settings' ),\n\tSectionSettingsModel = require( 'kitbuilder-models/section-settings' ),\n\n\tElementModel,\n\tElementCollection;\n\nElementModel = Backbone.Model.extend( {\n\tdefaults: {\n\t\tid: '',\n\t\telType: '',\n\t\tisInner: false,\n\t\tsettings: {},\n\t\tdefaultEditSettings: {}\n\t},\n\n\tremoteRender: false,\n\t_htmlCache: null,\n\t_jqueryXhr: null,\n\trenderOnLeave: false,\n\n\tinitialize: function( options ) {\n\t\tvar elType = this.get( 'elType' ),\n\t\t\telements = this.get( 'elements' );\n\n\t\tif ( undefined !== elements ) {\n\t\t\tthis.set( 'elements', new ElementCollection( elements ) );\n\t\t}\n\n\t\tif ( 'widget' === elType ) {\n\t\t\tthis.remoteRender = true;\n\t\t\tthis.setHtmlCache( options.htmlCache || '' );\n\t\t}\n\n\t\t// No need this variable anymore\n\t\tdelete options.htmlCache;\n\n\t\t// Make call to remote server as throttle function\n\t\tthis.renderRemoteServer = _.throttle( this.renderRemoteServer, 1000 );\n\n\t\tthis.initSettings();\n\n\t\tthis.initEditSettings();\n\n\t\tthis.on( {\n\t\t\tdestroy: this.onDestroy,\n\t\t\t'editor:close': this.onCloseEditor\n\t\t} );\n\t},\n\n\tinitSettings: function() {\n\t\tvar elType = this.get( 'elType' ),\n\t\t\tsettings = this.get( 'settings' ),\n\t\t\tsettingModels = {\n\t\t\t\twidget: WidgetSettingsModel,\n\t\t\t\tcolumn: ColumnSettingsModel,\n\t\t\t\tsection: SectionSettingsModel\n\t\t\t},\n\t\t\tSettingsModel = settingModels[ elType ] || BaseSettingsModel;\n\n\t\tif ( Backbone.$.isEmptyObject( settings ) ) {\n\t\t\tsettings = kitbuilder.helpers.cloneObject( settings );\n\t\t}\n\n\t\tif ( 'widget' === elType ) {\n\t\t\tsettings.widgetType = this.get( 'widgetType' );\n\t\t}\n\n\t\tsettings.elType = elType;\n\t\tsettings.isInner = this.get( 'isInner' );\n\n\t\tsettings = new SettingsModel( settings );\n\n\t\tthis.set( 'settings', settings );\n\n\t\tkitbuilderFrontend.config.elements.data[ this.cid ] = settings;\n\t},\n\n\tinitEditSettings: function() {\n\t\tthis.set( 'editSettings', new Backbone.Model( this.get( 'defaultEditSettings' ) ) );\n\t},\n\n\tonDestroy: function() {\n\t\t// Clean the memory for all use instances\n\t\tvar settings = this.get( 'settings' ),\n\t\t\telements = this.get( 'elements' );\n\n\t\tif ( undefined !== elements ) {\n\t\t\t_.each( _.clone( elements.models ), function( model ) {\n\t\t\t\tmodel.destroy();\n\t\t\t} );\n\t\t}\n\n\t\tif ( settings instanceof BaseSettingsModel ) {\n\t\t\tsettings.destroy();\n\t\t}\n\t},\n\n\tonCloseEditor: function() {\n\t\tthis.initEditSettings();\n\n\t\tif ( this.renderOnLeave ) {\n\t\t\tthis.renderRemoteServer();\n\t\t}\n\t},\n\n\tsetSetting: function( key, value, triggerChange ) {\n\t\ttriggerChange = triggerChange || false;\n\n\t\tvar settings = this.get( 'settings' );\n\n\t\tsettings.set( key, value );\n\n\t\tthis.set( 'settings', settings );\n\n\t\tif ( triggerChange ) {\n\t\t\tthis.trigger( 'change', this );\n\t\t\tthis.trigger( 'change:settings', this );\n\t\t\tthis.trigger( 'change:settings:' + key, this );\n\t\t}\n\t},\n\n\tgetSetting: function( key ) {\n\t\tvar settings = this.get( 'settings' );\n\n\t\tif ( undefined === settings.get( key ) ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn settings.get( key );\n\t},\n\n\tsetHtmlCache: function( htmlCache ) {\n\t\tthis._htmlCache = htmlCache;\n\t},\n\n\tgetHtmlCache: function() {\n\t\treturn this._htmlCache;\n\t},\n\n\tgetTitle: function() {\n\t\tvar elementData = kitbuilder.getElementData( this );\n\n\t\treturn ( elementData ) ? elementData.title : 'Unknown';\n\t},\n\n\tgetIcon: function() {\n\t\tvar elementData = kitbuilder.getElementData( this );\n\n\t\treturn ( elementData ) ? elementData.icon : 'unknown';\n\t},\n\n\tcreateRemoteRenderRequest: function() {\n\t\tvar data = this.toJSON();\n\n\t\treturn kitbuilder.ajax.send( 'render_widget', {\n\t\t\tdata: {\n\t\t\t\tpost_id: kitbuilder.config.post_id,\n\t\t\t\tdata: JSON.stringify( data ),\n\t\t\t\t_nonce: kitbuilder.config.nonce\n\t\t\t},\n\t\t\tsuccess: _.bind( this.onRemoteGetHtml, this )\n\t\t} );\n\t},\n\n\trenderRemoteServer: function() {\n\t\tif ( ! this.remoteRender ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.renderOnLeave = false;\n\n\t\tthis.trigger( 'before:remote:render' );\n\n\t\tif ( this.isRemoteRequestActive() ) {\n\t\t\tthis._jqueryXhr.abort();\n\t\t}\n\n\t\tthis._jqueryXhr = this.createRemoteRenderRequest();\n\t},\n\n\tisRemoteRequestActive: function() {\n\t\treturn this._jqueryXhr && 4 !== this._jqueryXhr.readyState;\n\t},\n\n\tonRemoteGetHtml: function( data ) {\n\t\tthis.setHtmlCache( data.render );\n\t\tthis.trigger( 'remote:render' );\n\t},\n\n\tclone: function() {\n\t\tvar newModel = new this.constructor( kitbuilder.helpers.cloneObject( this.attributes ) );\n\n\t\tnewModel.set( 'id', kitbuilder.helpers.getUniqueID() );\n\n\t\tnewModel.setHtmlCache( this.getHtmlCache() );\n\n\t\tvar elements = this.get( 'elements' );\n\n\t\tif ( ! _.isEmpty( elements ) ) {\n\t\t\tnewModel.set( 'elements', elements.clone() );\n\t\t}\n\n\t\treturn newModel;\n\t},\n\n\ttoJSON: function( options ) {\n\t\toptions = _.extend( { copyHtmlCache: false }, options );\n\n\t\t// Call parent's toJSON method\n\t\tvar data = Backbone.Model.prototype.toJSON.call( this );\n\n\t\t_.each( data, function( attribute, key ) {\n\t\t\tif ( attribute && attribute.toJSON ) {\n\t\t\t\tdata[ key ] = attribute.toJSON( options );\n\t\t\t}\n\t\t} );\n\n\t\tif ( options.copyHtmlCache ) {\n\t\t\tdata.htmlCache = this.getHtmlCache();\n\t\t} else {\n\t\t\tdelete data.htmlCache;\n\t\t}\n\n\t\treturn data;\n\t}\n\n} );\n\nElementCollection = Backbone.Collection.extend( {\n\tadd: function( models, options, isCorrectSet ) {\n\t\tif ( ( ! options || ! options.silent ) && ! isCorrectSet ) {\n\t\t\tthrow 'Call Error: Adding model to element collection is allowed only by the dedicated addChildModel() method.';\n\t\t}\n\n\t\treturn Backbone.Collection.prototype.add.call( this, models, options );\n\t},\n\n\tmodel: function( attrs, options ) {\n\t\tvar ModelClass = Backbone.Model;\n\n\t\tif ( attrs.elType ) {\n\t\t\tModelClass = kitbuilder.hooks.applyFilters( 'element/model', ElementModel, attrs );\n\t\t}\n\n\t\treturn new ModelClass( attrs, options );\n\t},\n\n\tclone: function() {\n\t\tvar tempCollection = Backbone.Collection.prototype.clone.apply( this, arguments ),\n\t\t\tnewCollection = new ElementCollection();\n\n\t\ttempCollection.forEach( function( model ) {\n\t\t\tnewCollection.add( model.clone(), null, true );\n\t\t} );\n\n\t\treturn newCollection;\n\t}\n} );\n\nElementCollection.prototype.sync = function() {\n\treturn null;\n};\n\nElementCollection.prototype.fetch = function() {\n\treturn null;\n};\n\nElementCollection.prototype.save = function() {\n\treturn null;\n};\n\nElementModel.prototype.sync = function() {\n\treturn null;\n};\nElementModel.prototype.fetch = function() {\n\treturn null;\n};\nElementModel.prototype.save = function() {\n\treturn null;\n};\n\nmodule.exports = {\n\tModel: ElementModel,\n\tCollection: ElementCollection\n};\n",
    "var BaseSettingsModel = require( 'kitbuilder-models/base-settings' ),\n\tSectionSettingsModel;\n\nSectionSettingsModel = BaseSettingsModel.extend( {\n\tdefaults: {}\n} );\n\nmodule.exports = SectionSettingsModel;\n",
    "var BaseSettingsModel = require( 'kitbuilder-models/base-settings' ),\n\tWidgetSettingsModel;\n\nWidgetSettingsModel = BaseSettingsModel.extend( {\n\n} );\n\nmodule.exports = WidgetSettingsModel;\n",
    "var Ajax;\n\nAjax = {\n\tconfig: {},\n\n\tinitConfig: function() {\n\t\tthis.config = {\n\t\t\tajaxParams: {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: kitbuilder.config.ajaxurl,\n\t\t\t\tdata: {}\n\t\t\t},\n\t\t\tactionPrefix: 'kitbuilder_'\n\t\t};\n\t},\n\n\tinit: function() {\n\t\tthis.initConfig();\n\t},\n\n\tsend: function( action, options ) {\n\t\tvar ajaxParams = kitbuilder.helpers.cloneObject( this.config.ajaxParams );\n\n\t\toptions = options || {};\n\n\t\taction = this.config.actionPrefix + action;\n\n\t\tBackbone.$.extend( ajaxParams, options );\n\n\t\tif ( ajaxParams.data instanceof FormData ) {\n\t\t\tajaxParams.data.append( 'action', action );\n\t\t\tajaxParams.data.append( '_nonce', kitbuilder.config.nonce );\n\t\t} else {\n\t\t\tajaxParams.data.action = action;\n\t\t\tajaxParams.data._nonce = kitbuilder.config.nonce;\n\t\t}\n\n\t\tvar successCallback = ajaxParams.success,\n\t\t\terrorCallback = ajaxParams.error;\n\n\t\tif ( successCallback || errorCallback ) {\n\t\t\tajaxParams.success = function( response ) {\n\t\t\t\tif ( response.success && successCallback ) {\n\t\t\t\t\tsuccessCallback( response.data );\n\t\t\t\t}\n\n\t\t\t\tif ( ( ! response.success ) && errorCallback ) {\n\t\t\t\t\terrorCallback( response.data );\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif ( errorCallback ) {\n\t\t\t\tajaxParams.error = function( data ) {\n\t\t\t\t\terrorCallback( data );\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn Backbone.$.ajax( ajaxParams );\n\t}\n};\n\nmodule.exports = Ajax;\n",
    "var Conditions;\n\nConditions = function() {\n\tvar self = this;\n\n\tthis.compare = function( leftValue, rightValue, operator ) {\n\t\tswitch ( operator ) {\n\t\t\t/* jshint ignore:start */\n\t\t\tcase '==':\n\t\t\t\treturn leftValue == rightValue;\n\t\t\tcase '!=':\n\t\t\t\treturn leftValue != rightValue;\n\t\t\t/* jshint ignore:end */\n\t\t\tcase '!==':\n\t\t\t\treturn leftValue !== rightValue;\n\t\t\tcase 'in':\n\t\t\t\treturn -1 !== rightValue.indexOf( leftValue );\n\t\t\tcase '!in':\n\t\t\t\treturn -1 === rightValue.indexOf( leftValue );\n\t\t\tcase '<':\n\t\t\t\treturn leftValue < rightValue;\n\t\t\tcase '<=':\n\t\t\t\treturn leftValue <= rightValue;\n\t\t\tcase '>':\n\t\t\t\treturn leftValue > rightValue;\n\t\t\tcase '>=':\n\t\t\t\treturn leftValue >= rightValue;\n\t\t\tdefault:\n\t\t\t\treturn leftValue === rightValue;\n\t\t}\n\t};\n\n\tthis.check = function( conditions, comparisonObject ) {\n\t\tvar isOrCondition = 'or' === conditions.relation,\n\t\t\tconditionSucceed = ! isOrCondition;\n\n\t\tBackbone.$.each( conditions.terms, function() {\n\t\t\tvar term = this,\n\t\t\t\tcomparisonResult;\n\n\t\t\tif ( term.terms ) {\n\t\t\t\tcomparisonResult = self.check( term, comparisonObject );\n\t\t\t} else {\n\t\t\t\tvar parsedName = term.name.match( /(\\w+)(?:\\[(\\w+)])?/ ),\n\t\t\t\t\tvalue = comparisonObject[ parsedName[ 1 ] ];\n\n\t\t\t\tif ( parsedName[ 2 ] ) {\n\t\t\t\t\tvalue = value[ parsedName[ 2 ] ];\n\t\t\t\t}\n\n\t\t\t\tcomparisonResult = self.compare( value, term.value, term.operator );\n\t\t\t}\n\n\t\t\tif ( isOrCondition ) {\n\t\t\t\tif ( comparisonResult ) {\n\t\t\t\t\tconditionSucceed = true;\n\t\t\t\t}\n\n\t\t\t\treturn ! comparisonResult;\n\t\t\t}\n\n\t\t\tif ( ! comparisonResult ) {\n\t\t\t\treturn conditionSucceed = false;\n\t\t\t}\n\t\t} );\n\n\t\treturn conditionSucceed;\n\t};\n};\n\nmodule.exports = new Conditions();\n",
    "var ViewModule = require( 'kitbuilder-utils/view-module' ),\n\tStylesheet = require( 'kitbuilder-editor-utils/stylesheet' ),\n\tControlsCSSParser;\n\nControlsCSSParser = ViewModule.extend( {\n\tstylesheet: null,\n\n\tgetDefaultSettings: function() {\n\t\treturn {\n\t\t\tid: 0\n\t\t};\n\t},\n\n\tgetDefaultElements: function() {\n\t\treturn {\n\t\t\t$stylesheetElement: Backbone.$( '<style>', { id: 'kitbuilder-style-' + this.getSettings( 'id' ) } )\n\t\t};\n\t},\n\n\tinitStylesheet: function() {\n\t\tvar viewportBreakpoints = kitbuilder.config.viewportBreakpoints;\n\n\t\tthis.stylesheet = new Stylesheet();\n\n\t\tthis.stylesheet\n\t\t\t.addDevice( 'mobile', 0 )\n\t\t\t.addDevice( 'tablet', viewportBreakpoints.md )\n\t\t\t.addDevice( 'desktop', viewportBreakpoints.lg );\n\t},\n\n\taddStyleRules: function( controls, values, controlsStack, placeholders, replacements ) {\n\t\tvar self = this;\n\n\t\t_.each( controls, function( control ) {\n\t\t\tif ( control.styleFields ) {\n\t\t\t\tvalues[ control.name ].each( function( itemModel ) {\n\t\t\t\t\tself.addStyleRules(\n\t\t\t\t\t\tcontrol.styleFields,\n\t\t\t\t\t\titemModel.attributes,\n\t\t\t\t\t\tcontrolsStack,\n\t\t\t\t\t\tplaceholders.concat( [ '{{CURRENT_ITEM}}' ] ),\n\t\t\t\t\t\treplacements.concat( [ '.kitbuilder-repeater-item-' + itemModel.get( '_id' ) ] )\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tself.addControlStyleRules( control, values, controlsStack, placeholders, replacements );\n\t\t} );\n\t},\n\n\taddControlStyleRules: function( control, values, controlsStack, placeholders, replacements ) {\n\t\tvar self = this;\n\n\t\tControlsCSSParser.addControlStyleRules( self.stylesheet, control, controlsStack, function( control ) {\n\t\t\treturn self.getStyleControlValue( control, values );\n\t\t}, placeholders, replacements );\n\t},\n\n\tgetStyleControlValue: function( control, values ) {\n\t\tvar value = values[ control.name ];\n\n\t\tif ( control.selectors_dictionary ) {\n\t\t\tvalue = control.selectors_dictionary[ value ] || value;\n\t\t}\n\n\t\tif ( ! _.isNumber( value ) && _.isEmpty( value ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn value;\n\t},\n\n\taddStyleToDocument: function() {\n\t\tkitbuilder.$previewContents.find( 'head' ).append( this.elements.$stylesheetElement );\n\n\t\tthis.elements.$stylesheetElement.text( this.stylesheet );\n\t},\n\n\tremoveStyleFromDocument: function() {\n\t\tthis.elements.$stylesheetElement.remove();\n\t},\n\n\tonInit: function() {\n\t\tViewModule.prototype.onInit.apply( this, arguments );\n\n\t\tthis.initStylesheet();\n\t}\n} );\n\nControlsCSSParser.addControlStyleRules = function( stylesheet, control, controlsStack, valueCallback, placeholders, replacements ) {\n\tvar value = valueCallback( control );\n\n\tif ( undefined === value ) {\n\t\treturn;\n\t}\n\n\t_.each( control.selectors, function( cssProperty, selector ) {\n\t\tvar outputCssProperty;\n\n\t\ttry {\n\t\t\toutputCssProperty = cssProperty.replace( /\\{\\{(?:([^.}]+)\\.)?([^}]*)}}/g, function( originalPhrase, controlName, placeholder ) {\n\t\t\t\tvar parserControl = control,\n\t\t\t\t\tvalueToInsert = value;\n\n\t\t\t\tif ( controlName ) {\n\t\t\t\t\tparserControl = _.findWhere( controlsStack, { name: controlName } );\n\n\t\t\t\t\tvalueToInsert = valueCallback( parserControl );\n\t\t\t\t}\n\n\t\t\t\tvar parsedValue = kitbuilder.getControlView( parserControl.type ).getStyleValue( placeholder.toLowerCase(), valueToInsert );\n\n\t\t\t\tif ( '' === parsedValue ) {\n\t\t\t\t\tthrow '';\n\t\t\t\t}\n\n\t\t\t\treturn parsedValue;\n\t\t\t} );\n\t\t} catch ( e ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( _.isEmpty( outputCssProperty ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar devicePattern = /^(?:\\([^)]+\\)){1,2}/,\n\t\t\tdeviceRules = selector.match( devicePattern ),\n\t\t\tquery = {};\n\n\t\tif ( deviceRules ) {\n\t\t\tdeviceRules = deviceRules[0];\n\n\t\t\tselector = selector.replace( devicePattern, '' );\n\n\t\t\tvar pureDevicePattern = /\\(([^)]+)\\)/g,\n\t\t\t\tpureDeviceRules = [],\n\t\t\t\tmatches;\n\n\t\t\twhile ( matches = pureDevicePattern.exec( deviceRules ) ) {\n\t\t\t\tpureDeviceRules.push( matches[1] );\n\t\t\t}\n\n\t\t\t_.each( pureDeviceRules, function( deviceRule ) {\n\t\t\t\tif ( 'desktop' === deviceRule ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar device = deviceRule.replace( /\\+$/, '' ),\n\t\t\t\t\tendPoint = device === deviceRule ? 'max' : 'min';\n\n\t\t\t\tquery[ endPoint ] = device;\n\t\t\t} );\n\t\t}\n\n\t\t_.each( placeholders, function( placeholder, index ) {\n\t\t\tvar placeholderPattern = new RegExp( placeholder, 'g' );\n\n\t\t\tselector = selector.replace( placeholderPattern, replacements[ index ] );\n\t\t} );\n\n\t\tif ( ! Object.keys( query ).length && control.responsive ) {\n\t\t\tquery = kitbuilder.helpers.cloneObject( control.responsive );\n\n\t\t\tif ( 'desktop' === query.max ) {\n\t\t\t\tdelete query.max;\n\t\t\t}\n\t\t}\n\n\t\tstylesheet.addRules( selector, outputCssProperty, query );\n\t} );\n};\n\nmodule.exports = ControlsCSSParser;\n",
    "var heartbeat;\n\nheartbeat = {\n\n\tinit: function() {\n\t\tvar modal;\n\n\t\tthis.getModal = function() {\n\t\t\tif ( ! modal ) {\n\t\t\t\tmodal = this.initModal();\n\t\t\t}\n\n\t\t\treturn modal;\n\t\t};\n\n\t\tBackbone.$( document ).on( {\n\t\t\t'heartbeat-send': function( event, data ) {\n\t\t\t\tdata.kitbuilder_post_lock = {\n\t\t\t\t\tpost_ID: kitbuilder.config.post_id\n\t\t\t\t};\n\t\t\t},\n\t\t\t'heartbeat-tick': function( event, response ) {\n\t\t\t\tif ( response.locked_user ) {\n\t\t\t\t\tif ( kitbuilder.isEditorChanged() ) {\n\t\t\t\t\t\tkitbuilder.saveEditor( { status: 'autosave' } );\n\t\t\t\t\t}\n\n\t\t\t\t\theartbeat.showLockMessage( response.locked_user );\n\t\t\t\t} else {\n\t\t\t\t\theartbeat.getModal().hide();\n\t\t\t\t}\n\n\t\t\t\tkitbuilder.config.nonce = response.kitbuilder_nonce;\n\t\t\t}\n\t\t} );\n\n\t\tif ( kitbuilder.config.locked_user ) {\n\t\t\theartbeat.showLockMessage( kitbuilder.config.locked_user );\n\t\t}\n\t},\n\n\tinitModal: function() {\n\t\tvar modal = kitbuilder.dialogsManager.createWidget( 'options', {\n\t\t\theaderMessage: kitbuilder.translate( 'take_over' )\n\t\t} );\n\n\t\tmodal.addButton( {\n\t\t\tname: 'go_back',\n\t\t\ttext: kitbuilder.translate( 'go_back' ),\n\t\t\tcallback: function() {\n\t\t\t\tparent.history.go( -1 );\n\t\t\t}\n\t\t} );\n\n\t\tmodal.addButton( {\n\t\t\tname: 'take_over',\n\t\t\ttext: kitbuilder.translate( 'take_over' ),\n\t\t\tcallback: function() {\n\t\t\t\twp.heartbeat.enqueue( 'kitbuilder_force_post_lock', true );\n\t\t\t\twp.heartbeat.connectNow();\n\t\t\t}\n\t\t} );\n\n\t\treturn modal;\n\t},\n\n\tshowLockMessage: function( lockedUser ) {\n\t\tvar modal = heartbeat.getModal();\n\n\t\tmodal\n\t\t\t.setMessage( kitbuilder.translate( 'dialog_user_taken_over', [ lockedUser ] ) )\n\t\t    .show();\n\t}\n};\n\nmodule.exports = heartbeat;\n",
    "var helpers;\n\nhelpers = {\n\t_enqueuedFonts: [],\n\n\telementsHierarchy: {\n\t\tsection: {\n\t\t\tcolumn: {\n\t\t\t\twidget: null,\n\t\t\t\tsection: null\n\t\t\t}\n\t\t}\n\t},\n\n\tenqueueFont: function( font ) {\n\t\tif ( -1 !== this._enqueuedFonts.indexOf( font ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar fontType = kitbuilder.config.controls.font.fonts[ font ],\n\t\t\tfontUrl,\n\n\t\t\tsubsets = {\n\t\t\t\t'ru_RU': 'cyrillic',\n\t\t\t\t'uk': 'cyrillic',\n\t\t\t\t'bg_BG': 'cyrillic',\n\t\t\t\t'vi': 'vietnamese',\n\t\t\t\t'el': 'greek',\n\t\t\t\t'he_IL': 'hebrew'\n\t\t\t};\n\n\t\tswitch ( fontType ) {\n\t\t\tcase 'googlefonts' :\n\t\t\t\tfontUrl = 'https://fonts.googleapis.com/css?family=' + font + ':100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic';\n\n\t\t\t\tif ( subsets[ kitbuilder.config.locale ] ) {\n\t\t\t\t\tfontUrl += '&subset=' + subsets[ kitbuilder.config.locale ];\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'earlyaccess' :\n\t\t\t\tvar fontLowerString = font.replace( /\\s+/g, '' ).toLowerCase();\n\t\t\t\tfontUrl = 'https://fonts.googleapis.com/earlyaccess/' + fontLowerString + '.css';\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif ( ! _.isEmpty( fontUrl ) ) {\n\t\t\tkitbuilder.$previewContents.find( 'link:last' ).after( '<link href=\"' + fontUrl + '\" rel=\"stylesheet\" type=\"text/css\">' );\n\t\t}\n\t\tthis._enqueuedFonts.push( font );\n\t},\n\n\tgetElementChildType: function( elementType, container ) {\n\t\tif ( ! container ) {\n\t\t\tcontainer = this.elementsHierarchy;\n\t\t}\n\n\t\tif ( undefined !== container[ elementType ] ) {\n\n\t\t\tif ( Backbone.$.isPlainObject( container[ elementType ] ) ) {\n\t\t\t\treturn Object.keys( container[ elementType ] );\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\n\t\tfor ( var type in container ) {\n\n\t\t\tif ( ! container.hasOwnProperty( type ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( ! Backbone.$.isPlainObject( container[ type ] ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar result = this.getElementChildType( elementType, container[ type ] );\n\n\t\t\tif ( result ) {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\tgetUniqueID: function() {\n\t\tvar id;\n\n\t\t// TODO: Check conflict models\n\t\t//while ( true ) {\n\t\t\tid = Math.random().toString( 36 ).substr( 2, 7 );\n\t\t\t//if ( 1 > $( 'li.item-id-' + id ).length ) {\n\t\t\t\treturn id;\n\t\t\t//}\n\t\t//}\n\t},\n\n\tstringReplaceAll: function( string, replaces ) {\n\t\tvar re = new RegExp( Object.keys( replaces ).join( '|' ), 'gi' );\n\n\t\treturn string.replace( re, function( matched ) {\n\t\t\treturn replaces[ matched ];\n\t\t} );\n\t},\n\n\tisActiveControl: function( controlModel, values ) {\n\t\tvar condition;\n\n\t\t// TODO: Better way to get this?\n\t\tif ( _.isFunction( controlModel.get ) ) {\n\t\t\tcondition = controlModel.get( 'condition' );\n\t\t} else {\n\t\t\tcondition = controlModel.condition;\n\t\t}\n\n\t\t// Repeater items conditions\n\t\tif ( controlModel.conditions ) {\n\t\t\treturn kitbuilder.conditions.check( controlModel.conditions, values );\n\t\t}\n\n\t\tif ( _.isEmpty( condition ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tvar hasFields = _.filter( condition, function( conditionValue, conditionName ) {\n\t\t\tvar conditionNameParts = conditionName.match( /([a-z_0-9]+)(?:\\[([a-z_]+)])?(!?)$/i ),\n\t\t\t\tconditionRealName = conditionNameParts[1],\n\t\t\t\tconditionSubKey = conditionNameParts[2],\n\t\t\t\tisNegativeCondition = !! conditionNameParts[3],\n\t\t\t\tcontrolValue = values[ conditionRealName ];\n\n\t\t\tif ( conditionSubKey ) {\n\t\t\t\tcontrolValue = controlValue[ conditionSubKey ];\n\t\t\t}\n\n\t\t\t// If it's a non empty array - check if the conditionValue contains the controlValue,\n\t\t\t// If the controlValue is a non empty array - check if the controlValue contains the conditionValue\n\t\t\t// otherwise check if they are equal. ( and give the ability to check if the value is an empty array )\n\t\t\tvar isContains;\n\t\t\tif ( _.isArray( conditionValue ) && ! _.isEmpty( conditionValue ) ) {\n\t\t\t\tisContains = _.contains( conditionValue, controlValue );\n\t\t\t} else if ( _.isArray( controlValue ) && ! _.isEmpty( controlValue ) ) {\n\t\t\t\tisContains = _.contains( controlValue, conditionValue );\n\t\t\t} else {\n\t\t\t\tisContains = _.isEqual( conditionValue, controlValue );\n\t\t\t}\n\n\t\t\treturn isNegativeCondition ? isContains : ! isContains;\n\t\t} );\n\n\t\treturn _.isEmpty( hasFields );\n\t},\n\n\tcloneObject: function( object ) {\n\t\treturn JSON.parse( JSON.stringify( object ) );\n\t},\n\n\tgetYoutubeIDFromURL: function( url ) {\n\t\tvar videoIDParts = url.match( /^.*(?:youtu.be\\/|v\\/|e\\/|u\\/\\w+\\/|embed\\/|v=)([^#\\&\\?]*).*/ );\n\n\t\treturn videoIDParts && videoIDParts[1];\n\t},\n\n\tdisableElementEvents: function( $element ) {\n\t\t$element.each( function() {\n\t\t\tvar currentPointerEvents = this.style.pointerEvents;\n\n\t\t\tif ( 'none' === currentPointerEvents ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBackbone.$( this )\n\t\t\t\t.data( 'backup-pointer-events', currentPointerEvents )\n\t\t\t\t.css( 'pointer-events', 'none' );\n\t\t} );\n\t},\n\n\tenableElementEvents: function( $element ) {\n\t\t$element.each( function() {\n\t\t\tvar $this = Backbone.$( this ),\n\t\t\t\tbackupPointerEvents = $this.data( 'backup-pointer-events' );\n\n\t\t\tif ( undefined === backupPointerEvents ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$this\n\t\t\t\t.removeData( 'backup-pointer-events' )\n\t\t\t\t.css( 'pointer-events', backupPointerEvents );\n\t\t} );\n\t},\n\n\tgetColorPickerPaletteIndex: function( paletteKey ) {\n\t\treturn [ '7', '8', '1', '5', '2', '3', '6', '4' ].indexOf( paletteKey );\n\t},\n\n\twpColorPicker: function( $element, options ) {\n\t\tvar self = this,\n\t\t\tdefaultOptions = {\n\t\t\t\twidth: window.innerWidth >= 1440 ? 271 : 251\n\t\t\t};\n\n\t\tif ( options ) {\n\t\t\t_.extend( defaultOptions, options );\n\t\t}\n\n\t\treturn $element.wpColorPicker( defaultOptions );\n\t}\n};\n\nmodule.exports = helpers;\n",
    "var HotKeys = function( $ ) {\n\tvar self = this,\n\t\thotKeysHandlers = {};\n\n\tvar keysDictionary = {\n\t\tdel: 46,\n\t\td: 68,\n\t\tl: 76,\n\t\tm: 77,\n\t\tp: 80,\n\t\ts: 83\n\t};\n\n\tvar isMac = function() {\n\t\treturn -1 !== navigator.userAgent.indexOf( 'Mac OS X' );\n\t};\n\n\tvar initHotKeysHandlers = function() {\n\n\t\thotKeysHandlers[ keysDictionary.del ] = {\n\t\t\tdeleteElement: {\n\t\t\t\tisWorthHandling: function( event ) {\n\t\t\t\t\tvar isEditorOpen = 'editor' === kitbuilder.getPanelView().getCurrentPageName(),\n\t\t\t\t\t\tisInputTarget = $( event.target ).is( ':input' );\n\n\t\t\t\t\treturn isEditorOpen && ! isInputTarget;\n\t\t\t\t},\n\t\t\t\thandle: function() {\n\t\t\t\t\tkitbuilder.getPanelView().getCurrentPageView().getOption( 'editedElementView' ).confirmRemove();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\thotKeysHandlers[ keysDictionary.d ] = {\n\t\t\t/* Waiting for CTRL+Z / CTRL+Y\n\t\t\tduplicateElement: {\n\t\t\t\tisWorthHandling: function( event ) {\n\t\t\t\t\treturn self.isControlEvent( event );\n\t\t\t\t},\n\t\t\t\thandle: function() {\n\t\t\t\t\tvar panel = kitbuilder.getPanelView();\n\n\t\t\t\t\tif ( 'editor' !== panel.getCurrentPageName() ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tpanel.getCurrentPageView().getOption( 'editedElementView' ).duplicate();\n\t\t\t\t}\n\t\t\t}*/\n\t\t};\n\n\t\thotKeysHandlers[ keysDictionary.l ] = {\n\t\t\tshowTemplateLibrary: {\n\t\t\t\tisWorthHandling: function( event ) {\n\t\t\t\t\treturn self.isControlEvent( event ) && event.shiftKey;\n\t\t\t\t},\n\t\t\t\thandle: function() {\n\t\t\t\t\tkitbuilder.templates.showTemplatesModal();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\thotKeysHandlers[ keysDictionary.m ] = {\n\t\t\tchangeDeviceMode: {\n\t\t\t\tdevices: [ 'desktop', 'tablet', 'mobile' ],\n\t\t\t\tisWorthHandling: function( event ) {\n\t\t\t\t\treturn self.isControlEvent( event ) && event.shiftKey;\n\t\t\t\t},\n\t\t\t\thandle: function() {\n\t\t\t\t\tvar currentDeviceMode = kitbuilder.channels.deviceMode.request( 'currentMode' ),\n\t\t\t\t\t\tmodeIndex = this.devices.indexOf( currentDeviceMode );\n\n\t\t\t\t\tmodeIndex++;\n\n\t\t\t\t\tif ( modeIndex >= this.devices.length ) {\n\t\t\t\t\t\tmodeIndex = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tkitbuilder.changeDeviceMode( this.devices[ modeIndex ] );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\thotKeysHandlers[ keysDictionary.p ] = {\n\t\t\tchangeEditMode: {\n\t\t\t\tisWorthHandling: function( event ) {\n\t\t\t\t\treturn self.isControlEvent( event );\n\t\t\t\t},\n\t\t\t\thandle: function() {\n\t\t\t\t\tkitbuilder.getPanelView().modeSwitcher.currentView.toggleMode();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\thotKeysHandlers[ keysDictionary.s ] = {\n\t\t\tsaveEditor: {\n\t\t\t\tisWorthHandling: function( event ) {\n\t\t\t\t\treturn self.isControlEvent( event );\n\t\t\t\t},\n\t\t\t\thandle: function() {\n\t\t\t\t\tkitbuilder.getPanelView().getFooterView()._publishBuilder();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t};\n\n\tvar applyHotKey = function( event ) {\n\t\tvar handlers = hotKeysHandlers[ event.which ];\n\n\t\tif ( ! handlers ) {\n\t\t\treturn;\n\t\t}\n\n\t\t_.each( handlers, function( handler ) {\n\t\t\tif ( handler.isWorthHandling && ! handler.isWorthHandling( event ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Fix for some keyboard sources that consider alt key as ctrl key\n\t\t\tif ( ! handler.allowAltKey && event.altKey ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\n\t\t\thandler.handle( event );\n\t\t} );\n\t};\n\n\tvar bindEvents = function() {\n\t\tself.bindListener( kitbuilder.$window );\n\t};\n\n\tthis.isControlEvent = function( event ) {\n\t\treturn event[ isMac() ? 'metaKey' : 'ctrlKey' ];\n\t};\n\n\tthis.addHotKeyHandler = function( keyCode, handlerName, handler ) {\n\t\tif ( ! hotKeysHandlers[ keyCode ] ) {\n\t\t\thotKeysHandlers[ keyCode ] = {};\n\t\t}\n\n\t\thotKeysHandlers[ keyCode ][ handlerName ] = handler;\n\t};\n\n\tthis.bindListener = function( $listener ) {\n\t\t$listener.on( 'keydown', applyHotKey );\n\t};\n\n\tthis.init = function() {\n\t\tinitHotKeysHandlers();\n\n\t\tbindEvents();\n\t};\n};\n\nmodule.exports = new HotKeys( jQuery );\n",
    "var ImagesManager;\n\nImagesManager = function() {\n\tvar self = this;\n\n\tvar cache = {};\n\n\tvar debounceDelay = 300;\n\n\tvar registeredItems = [];\n\n\tvar getNormalizedSize = function( image ) {\n\t\tvar size,\n\t\t\timageSize = image.size;\n\n\t\tif ( 'custom' === imageSize ) {\n\t\t\tvar customDimension = image.dimension;\n\n\t\t\tif ( customDimension.width || customDimension.height ) {\n\t\t\t\tsize = 'custom_' + customDimension.width + 'x' + customDimension.height;\n\t\t\t} else {\n\t\t\t\treturn 'full';\n\t\t\t}\n\t\t} else {\n\t\t\tsize = imageSize;\n\t\t}\n\n\t\treturn size;\n\t};\n\n\tself.onceTriggerChange = _.once( function( model ) {\n\t\twindow.setTimeout( function() {\n\t\t\tmodel.get( 'settings' ).trigger( 'change' );\n\t\t}, 700 );\n\t} );\n\n\tself.getImageUrl = function( image ) {\n\t\t// Register for AJAX checking\n\t\tself.registerItem( image );\n\n\t\tvar imageUrl = self.getItem( image );\n\n\t\t// If it's not in cache, like a new dropped widget or a custom size - get from settings\n\t\tif ( ! imageUrl ) {\n\n\t\t\tif ( 'custom' === image.size ) {\n\n\t\t\t\tif ( kitbuilder.getPanelView() && 'editor' === kitbuilder.getPanelView().currentPageName && image.model ) {\n\t\t\t\t\t// Trigger change again, so it's will load from the cache\n\t\t\t\t\tself.onceTriggerChange( image.model );\n\t\t\t\t}\n\n\t\t\t\treturn ;\n\t\t\t}\n\n\t\t\t// If it's a new dropped widget\n\t\t\timageUrl = image.url;\n\t\t}\n\n\t\treturn imageUrl;\n\t};\n\n\tself.getItem = function( image ) {\n\t\tvar size = getNormalizedSize( image ),\n\t\t\tid =  image.id;\n\n\t\tif ( ! size ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( cache[ id ] && cache[ id ][ size ] ) {\n\t\t\treturn cache[ id ][ size ];\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tself.registerItem = function( image ) {\n\t\tif ( '' === image.id ) {\n\t\t\t// It's a new dropped widget\n\t\t\treturn;\n\t\t}\n\n\t\tif ( self.getItem( image ) ) {\n\t\t\t// It's already in cache\n\t\t\treturn;\n\t\t}\n\n\t\tregisteredItems.push( image );\n\n\t\tself.debounceGetRemoteItems();\n\t};\n\n\tself.getRemoteItems = function() {\n\t\tvar requestedItems = [],\n\t\tregisteredItemsLength = Object.keys( registeredItems ).length,\n\t\t\timage,\n\t\t\tindex;\n\n\t\t// It's one item, so we can render it from remote server\n\t\tif ( 0 === registeredItemsLength ) {\n\t\t\treturn;\n\t\t} else if ( 1 === registeredItemsLength ) {\n\t\t\tfor ( index in registeredItems ) {\n\t\t\t\timage = registeredItems[ index ];\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif ( image && image.model ) {\n\t\t\t\timage.model.renderRemoteServer();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tfor ( index in registeredItems ) {\n\t\t\timage = registeredItems[ index ];\n\n\t\t\tvar size = getNormalizedSize( image ),\n\t\t\t\tid = image.id,\n\t\t\t\tisFirstTime = ! cache[ id ] || 0 === Object.keys( cache[ id ] ).length;\n\n\t\t\trequestedItems.push( {\n\t\t\t\tid: id,\n\t\t\t\tsize: size,\n\t\t\t\tis_first_time: isFirstTime\n\t\t\t} );\n\t\t}\n\n\t\twindow.kitbuilder.ajax.send(\n\t\t\t'get_images_details', {\n\t\t\t\tdata: {\n\t\t\t\t\titems: requestedItems\n\t\t\t\t},\n\t\t\t\tsuccess: function( data ) {\n\t\t\t\t\tvar id,\n\t\t\t\t\t\tsize;\n\n\t\t\t\t\tfor ( id in data ) {\n\t\t\t\t\t\tif ( ! cache[ id ] ) {\n\t\t\t\t\t\t\tcache[ id ] = {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor ( size in data[ id ] ) {\n\t\t\t\t\t\t\tcache[ id ][ size ] = data[ id ][ size ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tregisteredItems = [];\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n\n\tself.debounceGetRemoteItems = _.debounce( self.getRemoteItems, debounceDelay );\n};\n\nmodule.exports = new ImagesManager();\n",
    "var Introduction;\n\nIntroduction = function() {\n\tvar self = this,\n\t\tmodal;\n\n\tvar initModal = function() {\n\t\tmodal = kitbuilder.dialogsManager.createWidget( 'lightbox', {\n\t\t\tid: 'kitbuilder-introduction',\n\t\t\tcloseButton: true\n\t\t} );\n\n\t\tmodal.getElements( 'closeButton' ).on( 'click', function() {\n\t\t\tself.setIntroductionViewed();\n\t\t} );\n\n\t\tmodal.on( 'hide', function() {\n\t\t\tmodal.getElements( 'message' ).empty(); // In order to stop the video\n\t\t} );\n\t};\n\n\tthis.getSettings = function() {\n\t\treturn kitbuilder.config.introduction;\n\t};\n\n\tthis.getModal = function() {\n\t\tif ( ! modal ) {\n\t\t\tinitModal();\n\t\t}\n\n\t\treturn modal;\n\t};\n\n\tthis.startIntroduction = function() {\n\t\tvar settings = this.getSettings();\n\n\t\tthis.getModal()\n\t\t    .setHeaderMessage( settings.title )\n\t\t    .setMessage( settings.content )\n\t\t    .show();\n\t};\n\n\tthis.startOnLoadIntroduction = function() {\n\t\tvar settings = this.getSettings();\n\n\t\tif ( ! settings.is_user_should_view ) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetTimeout( _.bind( function() {\n\t\t\tthis.startIntroduction();\n\t\t}, this ), settings.delay );\n\t};\n\n\tthis.setIntroductionViewed = function() {\n\t\tkitbuilder.ajax.send( 'introduction_viewed' );\n\t};\n};\n\nmodule.exports = new Introduction();\n",
    "/**\n * HTML5 - Drag and Drop\n */\n;(function( $ ) {\n\n\tvar hasFullDataTransferSupport = function( event ) {\n\t\ttry {\n\t\t\tevent.originalEvent.dataTransfer.setData( 'test', 'test' );\n\n\t\t\tevent.originalEvent.dataTransfer.clearData( 'test' );\n\n\t\t\treturn true;\n\t\t} catch ( e ) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tvar Draggable = function( userSettings ) {\n\t\tvar self = this,\n\t\t\tsettings = {},\n\t\t\telementsCache = {},\n\t\t\tdefaultSettings = {\n\t\t\t\telement: '',\n\t\t\t\tgroups: null,\n\t\t\t\tonDragStart: null,\n\t\t\t\tonDragEnd: null\n\t\t\t};\n\n\t\tvar initSettings = function() {\n\t\t\t$.extend( true, settings, defaultSettings, userSettings );\n\t\t};\n\n\t\tvar initElementsCache = function() {\n\t\t\telementsCache.$element = $( settings.element );\n\t\t};\n\n\t\tvar buildElements = function() {\n\t\t\telementsCache.$element.attr( 'draggable', true );\n\t\t};\n\n\t\tvar onDragEnd = function( event ) {\n\t\t\tif ( $.isFunction( settings.onDragEnd ) ) {\n\t\t\t\tsettings.onDragEnd.call( elementsCache.$element, event, self );\n\t\t\t}\n\t\t};\n\n\t\tvar onDragStart = function( event ) {\n\t\t\tvar groups = settings.groups || [],\n\t\t\t\tdataContainer = {\n\t\t\t\t\tgroups: groups\n\t\t\t\t};\n\n\t\t\tif ( hasFullDataTransferSupport( event ) ) {\n\t\t\t\tevent.originalEvent.dataTransfer.setData( JSON.stringify( dataContainer ), true );\n\t\t\t}\n\n\t\t\tif ( $.isFunction( settings.onDragStart ) ) {\n\t\t\t\tsettings.onDragStart.call( elementsCache.$element, event, self );\n\t\t\t}\n\t\t};\n\n\t\tvar attachEvents = function() {\n\t\t\telementsCache.$element\n\t\t\t\t.on( 'dragstart', onDragStart )\n\t\t\t\t.on( 'dragend', onDragEnd );\n\t\t};\n\n\t\tvar init = function() {\n\t\t\tinitSettings();\n\n\t\t\tinitElementsCache();\n\n\t\t\tbuildElements();\n\n\t\t\tattachEvents();\n\t\t};\n\n\t\tthis.destroy = function() {\n\t\t\telementsCache.$element.off( 'dragstart', onDragStart );\n\n\t\t\telementsCache.$element.removeAttr( 'draggable' );\n\t\t};\n\n\t\tinit();\n\t};\n\n\tvar Droppable = function( userSettings ) {\n\t\tvar self = this,\n\t\t\tsettings = {},\n\t\t\telementsCache = {},\n\t\t\tdefaultSettings = {\n\t\t\t\telement: '',\n\t\t\t\titems: '>',\n\t\t\t\thorizontalSensitivity: '10%',\n\t\t\t\taxis: [ 'vertical', 'horizontal' ],\n\t\t\t\tgroups: null,\n\t\t\t\tisDroppingAllowed: null,\n\t\t\t\tonDragEnter: null,\n\t\t\t\tonDragging: null,\n\t\t\t\tonDropping: null,\n\t\t\t\tonDragLeave: null\n\t\t\t};\n\n\t\tvar initSettings = function() {\n\t\t\t$.extend( settings, defaultSettings, userSettings );\n\t\t};\n\n\t\tvar initElementsCache = function() {\n\t\t\telementsCache.$element = $( settings.element );\n\t\t};\n\n\t\tvar hasHorizontalDetection = function() {\n\t\t\treturn -1 !== settings.axis.indexOf( 'horizontal' );\n\t\t};\n\n\t\tvar hasVerticalDetection = function() {\n\t\t\treturn -1 !== settings.axis.indexOf( 'vertical' );\n\t\t};\n\n\t\tvar checkHorizontal = function( offsetX, elementWidth ) {\n\t\t\tvar isPercentValue,\n\t\t\t\tsensitivity;\n\n\t\t\tif ( ! hasHorizontalDetection() ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif ( ! hasVerticalDetection() ) {\n\t\t\t\treturn offsetX > elementWidth / 2 ? 'right' : 'left';\n\t\t\t}\n\n\t\t\tsensitivity = settings.horizontalSensitivity.match( /\\d+/ );\n\n\t\t\tif ( ! sensitivity ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tsensitivity = sensitivity[ 0 ];\n\n\t\t\tisPercentValue = /%$/.test( settings.horizontalSensitivity );\n\n\t\t\tif ( isPercentValue ) {\n\t\t\t\tsensitivity = elementWidth / sensitivity;\n\t\t\t}\n\n\t\t\tif ( offsetX > elementWidth - sensitivity ) {\n\t\t\t\treturn 'right';\n\t\t\t} else if ( offsetX < sensitivity ) {\n\t\t\t\treturn 'left';\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tvar getSide = function( element, event ) {\n\t\t\tvar $element,\n\t\t\t\tthisHeight,\n\t\t\t\tthisWidth,\n\t\t\t\tside;\n\n\t\t\tevent = event.originalEvent;\n\n\t\t\t$element = $( element );\n\t\t\tthisHeight = $element.outerHeight();\n\t\t\tthisWidth = $element.outerWidth();\n\n\t\t\tif ( side = checkHorizontal( event.offsetX, thisWidth ) ) {\n\t\t\t\treturn side;\n\t\t\t}\n\n\t\t\tif ( ! hasVerticalDetection() ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif ( event.offsetY > thisHeight / 2 ) {\n\t\t\t\tside = 'bottom';\n\t\t\t} else {\n\t\t\t\tside = 'top';\n\t\t\t}\n\n\t\t\treturn side;\n\t\t};\n\n\t\tvar isDroppingAllowed = function( element, side, event ) {\n\t\t\tvar dataTransferTypes,\n\t\t\t\tdraggableGroups,\n\t\t\t\tisGroupMatch,\n\t\t\t\tisDroppingAllowed;\n\n\t\t\tif ( settings.groups && hasFullDataTransferSupport( event ) ) {\n\n\t\t\t\tdataTransferTypes = event.originalEvent.dataTransfer.types;\n\t\t\t\tisGroupMatch = false;\n\n\t\t\t\tdataTransferTypes = Array.prototype.slice.apply( dataTransferTypes ); // Convert to array, since Firefox hold him as DOMStringList\n\n\t\t\t\tdataTransferTypes.forEach( function( type ) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tdraggableGroups = JSON.parse( type );\n\n\t\t\t\t\t\tif ( ! draggableGroups.groups.slice ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsettings.groups.forEach( function( groupName ) {\n\n\t\t\t\t\t\t\tif ( -1 !== draggableGroups.groups.indexOf( groupName ) ) {\n\t\t\t\t\t\t\t\tisGroupMatch = true;\n\t\t\t\t\t\t\t\treturn false; // stops the forEach from extra loops\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tif ( ! isGroupMatch ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( $.isFunction( settings.isDroppingAllowed ) ) {\n\n\t\t\t\tisDroppingAllowed = settings.isDroppingAllowed.call( element, side, event, self );\n\n\t\t\t\tif ( ! isDroppingAllowed ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t};\n\n\t\tvar onDragEnter = function( event ) {\n\t\t\tif ( event.target !== this ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Avoid internal elements event firing\n\t\t\t$( this ).children().each( function() {\n\t\t\t\tvar currentPointerEvents = this.style.pointerEvents;\n\n\t\t\t\tif ( 'none' === currentPointerEvents ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t$( this )\n\t\t\t\t\t.data( 'backup-pointer-events', currentPointerEvents )\n\t\t\t\t\t.css( 'pointer-events', 'none' );\n\t\t\t} );\n\n\t\t\tvar side = getSide( this, event );\n\n\t\t\tif ( ! isDroppingAllowed( this, side, event ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( $.isFunction( settings.onDragEnter ) ) {\n\t\t\t\tsettings.onDragEnter.call( this, side, event, self );\n\t\t\t}\n\t\t};\n\n\t\tvar onDragOver = function( event ) {\n\t\t\tvar side = getSide( this, event );\n\n\t\t\tif ( ! isDroppingAllowed( this, side, event ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif ( $.isFunction( settings.onDragging ) ) {\n\t\t\t\tsettings.onDragging.call( this, side, event, self );\n\t\t\t}\n\t\t};\n\n\t\tvar onDrop = function( event ) {\n\t\t\tvar side = getSide( this, event );\n\n\t\t\tif ( ! isDroppingAllowed( this, side, event ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif ( $.isFunction( settings.onDropping ) ) {\n\t\t\t\tsettings.onDropping.call( this, side, event, self );\n\t\t\t}\n\t\t};\n\n\t\tvar onDragLeave = function( event ) {\n\t\t\t// Avoid internal elements event firing\n\t\t\t$( this ).children().each( function() {\n\t\t\t\tvar $this = $( this ),\n\t\t\t\t\tbackupPointerEvents = $this.data( 'backup-pointer-events' );\n\n\t\t\t\tif ( undefined === backupPointerEvents ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t$this\n\t\t\t\t\t.removeData( 'backup-pointer-events' )\n\t\t\t\t\t.css( 'pointer-events', backupPointerEvents );\n\t\t\t} );\n\n\t\t\tif ( $.isFunction( settings.onDragLeave ) ) {\n\t\t\t\tsettings.onDragLeave.call( this, event, self );\n\t\t\t}\n\t\t};\n\n\t\tvar attachEvents = function() {\n\t\t\telementsCache.$element\n\t\t\t\t.on( 'dragenter', settings.items, onDragEnter )\n\t\t\t\t.on( 'dragover', settings.items, onDragOver )\n\t\t\t\t.on( 'drop', settings.items, onDrop )\n\t\t\t\t.on( 'dragleave drop', settings.items, onDragLeave );\n\t\t};\n\n\t\tvar init = function() {\n\t\t\tinitSettings();\n\n\t\t\tinitElementsCache();\n\n\t\t\tattachEvents();\n\t\t};\n\n\t\tthis.destroy = function() {\n\t\t\telementsCache.$element\n\t\t\t\t.off( 'dragenter', settings.items, onDragEnter )\n\t\t\t\t.off( 'dragover', settings.items, onDragOver )\n\t\t\t\t.off( 'drop', settings.items, onDrop )\n\t\t\t\t.off( 'dragleave drop', settings.items, onDragLeave );\n\t\t};\n\n\t\tinit();\n\t};\n\n\tvar plugins = {\n\t\thtml5Draggable: Draggable,\n\t\thtml5Droppable: Droppable\n\t};\n\n\t$.each( plugins, function( pluginName, Plugin ) {\n\t\t$.fn[ pluginName ] = function( options ) {\n\t\t\toptions = options || {};\n\n\t\t\tthis.each( function() {\n\t\t\t\tvar instance = $.data( this, pluginName ),\n\t\t\t\t\thasInstance = instance instanceof Plugin;\n\n\t\t\t\tif ( hasInstance ) {\n\n\t\t\t\t\tif ( 'destroy' === options ) {\n\n\t\t\t\t\t\tinstance.destroy();\n\n\t\t\t\t\t\t$.removeData( this, pluginName );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\toptions.element = this;\n\n\t\t\t\t$.data( this, pluginName, new Plugin( options ) );\n\t\t\t} );\n\n\t\t\treturn this;\n\t\t};\n\t} );\n})( jQuery );\n",
    "/*!\n * jQuery Serialize Object v1.0.1\n */\n(function( $ ) {\n\t$.fn.kitbuilderSerializeObject = function() {\n\t\tvar serializedArray = this.serializeArray(),\n\t\t\tdata = {};\n\n\t\tvar parseObject = function( dataContainer, key, value ) {\n\t\t\tvar isArrayKey = /^[^\\[\\]]+\\[]/.test( key ),\n\t\t\t\tisObjectKey = /^[^\\[\\]]+\\[[^\\[\\]]+]/.test( key ),\n\t\t\t\tkeyName = key.replace( /\\[.*/, '' );\n\n\t\t\tif ( isArrayKey ) {\n\t\t\t\tif ( ! dataContainer[ keyName ] ) {\n\t\t\t\t\tdataContainer[ keyName ] = [];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( ! isObjectKey ) {\n\t\t\t\t\tif ( dataContainer.push ) {\n\t\t\t\t\t\tdataContainer.push( value );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdataContainer[ keyName ] = value;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( ! dataContainer[ keyName ] ) {\n\t\t\t\t\tdataContainer[ keyName ] = {};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar nextKeys = key.match( /\\[[^\\[\\]]*]/g );\n\n\t\t\tnextKeys[ 0 ] = nextKeys[ 0 ].replace( /\\[|]/g, '' );\n\n\t\t\treturn parseObject( dataContainer[ keyName ], nextKeys.join( '' ), value );\n\t\t};\n\n\t\t$.each( serializedArray, function() {\n\t\t\tparseObject( data, this.name, this.value );\n\t\t} );\n\t\treturn data;\n\t};\n})( jQuery );\n",
    "var ViewModule = require( 'kitbuilder-utils/view-module' ),\n\tSettingsModel = require( 'kitbuilder-models/base-settings' ),\n\tControlsCSSParser = require( 'kitbuilder-editor-utils/controls-css-parser' );\n\nmodule.exports = ViewModule.extend( {\n\tcontrolsCSS: null,\n\n\tmodel: null,\n\n\thasChange: false,\n\n\tchangeCallbacks: {\n\t\tpost_title: function( newValue ) {\n\t\t\tvar $title = kitbuilderFrontend.getElements( '$document' ).find( kitbuilder.config.page_title_selector );\n\n\t\t\t$title.text( newValue );\n\t\t},\n\n\t\ttemplate: function() {\n\t\t\tthis.save( function() {\n\t\t\t\tkitbuilder.reloadPreview();\n\n\t\t\t\tkitbuilder.once( 'preview:loaded', function() {\n\t\t\t\t\tkitbuilder.getPanelView().setPage( 'settingsPage' );\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\t},\n\n\taddChangeCallback: function( attribute, callback ) {\n\t\tthis.changeCallbacks[ attribute ] = callback;\n\t},\n\n\tgetDefaultSettings: function() {\n\t\treturn {\n\t\t\tsavedSettings: kitbuilder.config.page_settings.settings\n\t\t};\n\t},\n\n\tbindEvents: function() {\n\t\tkitbuilder.on( 'preview:loaded', this.updateStylesheet );\n\n\t\tthis.model.on( 'change', this.onModelChange );\n\t},\n\n\trenderStyles: function() {\n\t\tthis.controlsCSS.addStyleRules( this.model.getStyleControls(), this.model.attributes, this.model.controls, [ /\\{\\{WRAPPER}}/g ], [ 'body.kitbuilder-page-' + kitbuilder.config.post_id ] );\n\t},\n\n\tupdateStylesheet: function() {\n\t\tthis.renderStyles();\n\n\t\tthis.controlsCSS.addStyleToDocument();\n\t},\n\n\tinitModel: function() {\n\t\tthis.model = new SettingsModel( this.getSettings( 'savedSettings' ), {\n\t\t\tcontrols: kitbuilder.config.page_settings.controls\n\t\t} );\n\t},\n\n\tinitControlsCSSParser: function() {\n\t\tthis.controlsCSS = new ControlsCSSParser();\n\t},\n\n\tsave: function( callback ) {\n\t\tvar self = this;\n\n\t\tif ( ! self.hasChange ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar settings = self.model.toJSON();\n\n\t\tsettings.id = kitbuilder.config.post_id;\n\n\t\tNProgress.start();\n\n\t\tkitbuilder.ajax.send( 'save_page_settings', {\n\t\t\tdata: settings,\n\t\t\tsuccess: function() {\n\t\t\t\tNProgress.done();\n\n\t\t\t\tself.setSettings( 'savedSettings', settings );\n\n\t\t\t\tself.hasChange = false;\n\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback.apply( self, arguments );\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function() {\n\t\t\t\talert( 'An error occurred' );\n\t\t\t}\n\t\t} );\n\t},\n\n\tonInit: function() {\n\t\tthis.initModel();\n\n\t\tthis.initControlsCSSParser();\n\n\t\tthis.debounceSave = _.debounce( this.save, 3000 );\n\n\t\tViewModule.prototype.onInit.apply( this, arguments );\n\t},\n\n\tonModelChange: function( model ) {\n\t\tvar self = this;\n\n\t\tself.hasChange = true;\n\n\t\tthis.controlsCSS.stylesheet.empty();\n\n\t\t_.each( model.changed, function( value, key ) {\n\t\t\tif ( self.changeCallbacks[ key ] ) {\n\t\t\t\tself.changeCallbacks[ key ].call( self, value );\n\t\t\t}\n\t\t} );\n\n\t\tself.updateStylesheet();\n\n\t\tself.debounceSave();\n\t}\n} );\n",
    "var presetsFactory;\n\npresetsFactory = {\n\n\tgetPresetsDictionary: function() {\n\t\treturn {\n\t\t\t11: 100 / 9,\n\t\t\t12: 100 / 8,\n\t\t\t14: 100 / 7,\n\t\t\t16: 100 / 6,\n\t\t\t33: 100 / 3,\n\t\t\t66: 2 / 3 * 100,\n\t\t\t83: 5 / 6 * 100\n\t\t};\n\t},\n\n\tgetAbsolutePresetValues: function( preset ) {\n\t\tvar clonedPreset = kitbuilder.helpers.cloneObject( preset ),\n\t\t\tpresetDictionary = this.getPresetsDictionary();\n\n\t\t_.each( clonedPreset, function( unitValue, unitIndex ) {\n\t\t\tif ( presetDictionary[ unitValue ] ) {\n\t\t\t\tclonedPreset[ unitIndex ] = presetDictionary[ unitValue ];\n\t\t\t}\n\t\t} );\n\n\t\treturn clonedPreset;\n\t},\n\n\tgetPresets: function( columnsCount, presetIndex ) {\n\t\tvar presets = kitbuilder.helpers.cloneObject( kitbuilder.config.elements.section.presets );\n\n\t\tif ( columnsCount ) {\n\t\t\tpresets = presets[ columnsCount ];\n\t\t}\n\n\t\tif ( presetIndex ) {\n\t\t\tpresets = presets[ presetIndex ];\n\t\t}\n\n\t\treturn presets;\n\t},\n\n\tgetPresetByStructure: function( structure ) {\n\t\tvar parsedStructure = this.getParsedStructure( structure );\n\n\t\treturn this.getPresets( parsedStructure.columnsCount, parsedStructure.presetIndex );\n\t},\n\n\tgetParsedStructure: function( structure ) {\n\t\tstructure += ''; // Make sure this is a string\n\n\t\treturn {\n\t\t\tcolumnsCount: structure.slice( 0, -1 ),\n\t\t\tpresetIndex: structure.substr( -1 )\n\t\t};\n\t},\n\n\tgetPresetSVG: function( preset, svgWidth, svgHeight, separatorWidth ) {\n\t\tsvgWidth = svgWidth || 100;\n\t\tsvgHeight = svgHeight || 50;\n\t\tseparatorWidth = separatorWidth || 2;\n\n\t\tvar absolutePresetValues = this.getAbsolutePresetValues( preset ),\n\t\t\tpresetSVGPath = this._generatePresetSVGPath( absolutePresetValues, svgWidth, svgHeight, separatorWidth );\n\n\t\treturn this._createSVGPreset( presetSVGPath, svgWidth, svgHeight );\n\t},\n\n\t_createSVGPreset: function( presetPath, svgWidth, svgHeight ) {\n\t\tvar svg = document.createElementNS( 'http://www.w3.org/2000/svg', 'svg' );\n\n\t\tsvg.setAttributeNS( 'http://www.w3.org/2000/xmlns/', 'xmlns:xlink', 'http://www.w3.org/1999/xlink' );\n\t\tsvg.setAttribute( 'viewBox', '0 0 ' + svgWidth + ' ' + svgHeight );\n\n\t\tvar path = document.createElementNS( 'http://www.w3.org/2000/svg', 'path' );\n\n\t\tpath.setAttribute( 'd', presetPath );\n\n\t\tsvg.appendChild( path );\n\n\t\treturn svg;\n\t},\n\n\t_generatePresetSVGPath: function( preset, svgWidth, svgHeight, separatorWidth ) {\n\t\tvar DRAW_SIZE = svgWidth - separatorWidth * ( preset.length - 1 );\n\n\t\tvar xPointer = 0,\n\t\t\tdOutput = '';\n\n\t\tfor ( var i = 0; i < preset.length; i++ ) {\n\t\t\tif ( i ) {\n\t\t\t\tdOutput += ' ';\n\t\t\t}\n\n\t\t\tvar increment = preset[ i ] / 100 * DRAW_SIZE;\n\n\t\t\txPointer += increment;\n\n\t\t\tdOutput += 'M' + ( +xPointer.toFixed( 4 ) ) + ',0';\n\n\t\t\tdOutput += 'V' + svgHeight;\n\n\t\t\tdOutput += 'H' + ( +( xPointer - increment ).toFixed( 4 ) );\n\n\t\t\tdOutput += 'V0Z';\n\n\t\t\txPointer += separatorWidth;\n\t\t}\n\n\t\treturn dOutput;\n\t}\n};\n\nmodule.exports = presetsFactory;\n",
    "( function( $ ) {\n\n\tvar Stylesheet = function() {\n\t\tvar self = this,\n\t\t\trules = {},\n\t\t\trawCSS = {},\n\t\t\tdevices = {};\n\n\t\tvar getDeviceMaxValue = function( deviceName ) {\n\t\t\tvar deviceNames = Object.keys( devices ),\n\t\t\t\tdeviceNameIndex = deviceNames.indexOf( deviceName ),\n\t\t\t\tnextIndex = deviceNameIndex + 1;\n\n\t\t\tif ( nextIndex >= deviceNames.length ) {\n\t\t\t\tthrow new RangeError( 'Max value for this device is out of range.' );\n\t\t\t}\n\n\t\t\treturn devices[ deviceNames[ nextIndex ] ] - 1;\n\t\t};\n\n\t\tvar queryToHash = function( query ) {\n\t\t\tvar hash = [];\n\n\t\t\t$.each( query, function( endPoint ) {\n\t\t\t\thash.push( endPoint + '_' + this );\n\t\t\t} );\n\n\t\t\treturn hash.join( '-' );\n\t\t};\n\n\t\tvar hashToQuery = function( hash ) {\n\t\t\tvar query = {};\n\n\t\t\thash = hash.split( '-' ).filter( String );\n\n\t\t\thash.forEach( function( singleQuery ) {\n\t\t\t\tvar queryParts = singleQuery.split( '_' ),\n\t\t\t\t\tendPoint = queryParts[0],\n\t\t\t\t\tdeviceName = queryParts[1];\n\n\t\t\t\tquery[ endPoint ] = 'max' === endPoint ? getDeviceMaxValue( deviceName ) : devices[ deviceName ];\n\t\t\t} );\n\n\t\t\treturn query;\n\t\t};\n\n\t\tvar addQueryHash = function( queryHash ) {\n\t\t\trules[ queryHash ] = {};\n\n\t\t\tvar hashes = Object.keys( rules );\n\n\t\t\tif ( hashes.length < 2 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Sort the devices from narrowest to widest\n\t\t\thashes.sort( function( a, b ) {\n\t\t\t\tif ( 'all' === a ) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\n\t\t\t\tif ( 'all' === b ) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\n\t\t\t\tvar aQuery = hashToQuery( a ),\n\t\t\t\t\tbQuery = hashToQuery( b );\n\n\t\t\t\treturn bQuery.max - aQuery.max;\n\t\t\t} );\n\n\t\t\tvar sortedRules = {};\n\n\t\t\thashes.forEach( function( deviceName ) {\n\t\t\t\tsortedRules[ deviceName ] = rules[ deviceName ];\n\t\t\t} );\n\n\t\t\trules = sortedRules;\n\t\t};\n\n\t\tvar getQueryHashStyleFormat = function( queryHash ) {\n\t\t\tvar query = hashToQuery( queryHash ),\n\t\t\t\tstyleFormat = [];\n\n\t\t\t$.each( query, function( endPoint ) {\n\t\t\t\tstyleFormat.push( '(' + endPoint + '-width:' + this + 'px)' );\n\t\t\t} );\n\n\t\t\treturn '@media' + styleFormat.join( ' and ' );\n\t\t};\n\n\t\tthis.addDevice = function( deviceName, deviceValue ) {\n\t\t\tdevices[ deviceName ] = deviceValue;\n\n\t\t\tvar deviceNames = Object.keys( devices );\n\n\t\t\tif ( deviceNames.length < 2 ) {\n\t\t\t\treturn self;\n\t\t\t}\n\n\t\t\t// Sort the devices from narrowest to widest\n\t\t\tdeviceNames.sort( function( a, b ) {\n\t\t\t\treturn devices[ a ] - devices[ b ];\n\t\t\t} );\n\n\t\t\tvar sortedDevices = {};\n\n\t\t\tdeviceNames.forEach( function( deviceName ) {\n\t\t\t\tsortedDevices[ deviceName ] = devices[ deviceName ];\n\t\t\t} );\n\n\t\t\tdevices = sortedDevices;\n\n\t\t\treturn self;\n\t\t};\n\n\t\tthis.addRawCSS = function( key, css ) {\n\t\t\trawCSS[ key ] = css;\n\t\t},\n\n\t\tthis.addRules = function( selector, styleRules, query ) {\n\t\t\tvar queryHash = 'all';\n\n\t\t\tif ( ! _.isEmpty( query ) ) {\n\t\t\t\tqueryHash = queryToHash( query );\n\t\t\t}\n\n\t\t\tif ( ! rules[ queryHash ] ) {\n\t\t\t\taddQueryHash( queryHash );\n\t\t\t}\n\n\t\t\tif ( ! styleRules ) {\n\t\t\t\tvar parsedRules = selector.match( /[^{]+\\{[^}]+}/g );\n\n\t\t\t\t$.each( parsedRules, function() {\n\t\t\t\t\tvar parsedRule = this.match( /([^{]+)\\{([^}]+)}/ );\n\n\t\t\t\t\tif ( parsedRule ) {\n\t\t\t\t\t\tself.addRules( parsedRule[1].trim(), parsedRule[2].trim(), query );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( ! rules[ queryHash ][ selector ] ) {\n\t\t\t\trules[ queryHash ][ selector ] = {};\n\t\t\t}\n\n\t\t\tif ( 'string' === typeof styleRules ) {\n\t\t\t\tstyleRules = styleRules.split( ';' ).filter( String );\n\n\t\t\t\tvar orderedRules = {};\n\n\t\t\t\t$.each( styleRules, function() {\n\t\t\t\t\tvar property = this.split( /:(.*)?/ );\n\n\t\t\t\t\torderedRules[ property[0].trim() ] = property[1].trim().replace( ';', '' );\n\t\t\t\t} );\n\n\t\t\t\tstyleRules = orderedRules;\n\t\t\t}\n\n\t\t\t$.extend( rules[ queryHash ][ selector ], styleRules );\n\n\t\t\treturn self;\n\t\t};\n\n\t\tthis.getRules = function() {\n\t\t\treturn rules;\n\t\t};\n\n\t\tthis.empty = function() {\n\t\t\trules = {};\n\t\t\trawCSS = {};\n\t\t};\n\n\t\tthis.toString = function() {\n\t\t\tvar styleText = '';\n\n\t\t\t$.each( rules, function( queryHash ) {\n\t\t\t\tvar deviceText = Stylesheet.parseRules( this );\n\n\t\t\t\tif ( 'all' !== queryHash ) {\n\t\t\t\t\tdeviceText = getQueryHashStyleFormat( queryHash ) + '{' + deviceText + '}';\n\t\t\t\t}\n\n\t\t\t\tstyleText += deviceText;\n\t\t\t} );\n\n\t\t\t$.each( rawCSS, function() {\n\t\t\t\tstyleText += this;\n\t\t\t} );\n\n\t\t\treturn styleText;\n\t\t};\n\t};\n\n\tStylesheet.parseRules = function( rules ) {\n\t\tvar parsedRules = '';\n\n\t\t$.each( rules, function( selector ) {\n\t\t\tvar selectorContent = Stylesheet.parseProperties( this );\n\n\t\t\tif ( selectorContent ) {\n\t\t\t\tparsedRules += selector + '{' + selectorContent + '}';\n\t\t\t}\n\t\t} );\n\n\t\treturn parsedRules;\n\t};\n\n\tStylesheet.parseProperties = function( properties ) {\n\t\tvar parsedProperties = '';\n\n\t\t$.each( properties, function( propertyKey ) {\n\t\t\tif ( this ) {\n\t\t\t\tparsedProperties += propertyKey + ':' + this + ';';\n\t\t\t}\n\t\t} );\n\n\t\treturn parsedProperties;\n\t};\n\n\tmodule.exports = Stylesheet;\n} )( jQuery );\n",
    "var BaseSettingsModel = require( 'kitbuilder-models/base-settings' ),\n\tControlsCSSParser = require( 'kitbuilder-editor-utils/controls-css-parser' ),\n\tBaseElementView;\n\nBaseElementView = Marionette.CompositeView.extend( {\n\ttagName: 'div',\n\n\tcontrolsCSSParser: null,\n\n\tclassName: function() {\n\t\treturn this.getElementUniqueID();\n\t},\n\n\tattributes: function() {\n\t\tvar type = this.model.get( 'elType' );\n\n\t\tif ( 'widget'  === type ) {\n\t\t\ttype = this.model.get( 'widgetType' );\n\t\t}\n\n\t\treturn {\n\t\t\t'data-id': this.getID(),\n\t\t\t'data-element_type': type\n\t\t};\n\t},\n\n\tui: function() {\n\t\treturn {\n\t\t\tduplicateButton: '> .kitbuilder-editor-element-settings .kitbuilder-editor-element-duplicate',\n\t\t\tremoveButton: '> .kitbuilder-editor-element-settings .kitbuilder-editor-element-remove',\n\t\t\tsaveButton: '> .kitbuilder-editor-element-settings .kitbuilder-editor-element-save'\n\t\t};\n\t},\n\n\tevents: function() {\n\t\treturn {\n\t\t\t'click @ui.removeButton': 'onClickRemove',\n\t\t\t'click @ui.saveButton': 'onClickSave',\n\t\t\t'click @ui.duplicateButton': 'onClickDuplicate'\n\t\t};\n\t},\n\n\tgetElementType: function() {\n\t\treturn this.model.get( 'elType' );\n\t},\n\n\tgetChildType: function() {\n\t\treturn kitbuilder.helpers.getElementChildType( this.getElementType() );\n\t},\n\n\tgetChildView: function( model ) {\n\t\tvar ChildView,\n\t\t\telType = model.get( 'elType' );\n\n\t\tif ( 'section' === elType ) {\n\t\t\tChildView = require( 'kitbuilder-views/section' );\n\t\t} else if ( 'column' === elType ) {\n\t\t\tChildView = require( 'kitbuilder-views/column' );\n\t\t} else {\n\t\t\tChildView = kitbuilder.modules.WidgetView;\n\t\t}\n\n\t\treturn kitbuilder.hooks.applyFilters( 'element/view', ChildView, model, this );\n\t},\n\n\ttemplateHelpers: function() {\n\t\treturn {\n\t\t\telementModel: this.model,\n\t\t\teditModel: this.getEditModel()\n\t\t};\n\t},\n\n\tgetTemplateType: function() {\n\t\treturn 'js';\n\t},\n\n\tgetEditModel: function() {\n\t\treturn this.model;\n\t},\n\n\tinitialize: function() {\n\t\t// grab the child collection from the parent model\n\t\t// so that we can render the collection as children\n\t\t// of this parent element\n\t\tthis.collection = this.model.get( 'elements' );\n\n\t\tif ( this.collection ) {\n\t\t\tthis.listenTo( this.collection, 'add remove reset', this.onCollectionChanged, this );\n\t\t}\n\n\t\tvar editModel = this.getEditModel();\n\n\t\tthis.listenTo( editModel.get( 'settings' ), 'change', this.onSettingsChanged, this );\n\t\tthis.listenTo( editModel.get( 'editSettings' ), 'change', this.onEditSettingsChanged, this );\n\n\t\tthis.on( 'render', function() {\n\t\t\tthis.renderUI();\n\t\t\tthis.runReadyTrigger();\n\t\t} );\n\n\t\tthis.initRemoveDialog();\n\n\t\tthis.initControlsCSSParser();\n\t},\n\n\tedit: function() {\n\t\tkitbuilder.getPanelView().openEditor( this.getEditModel(), this );\n\t},\n\n\taddChildModel: function( model, options ) {\n\t\treturn this.collection.add( model, options, true );\n\t},\n\n\taddChildElement: function( itemData, options ) {\n\t\toptions = options || {};\n\n\t\tvar myChildType = this.getChildType();\n\n\t\tif ( -1 === myChildType.indexOf( itemData.elType ) ) {\n\t\t\tdelete options.at;\n\n\t\t\treturn this.children.last().addChildElement( itemData, options );\n\t\t}\n\n\t\tvar newModel = this.addChildModel( itemData, options ),\n\t\t\tnewView = this.children.findByModel( newModel );\n\n\t\tif ( 'section' === newView.getElementType() && newView.isInner() ) {\n\t\t\tnewView.addEmptyColumn();\n\t\t}\n\n\t\tnewView.edit();\n\n\t\treturn newView;\n\t},\n\n\taddElementFromPanel: function( options ) {\n\t\tvar elementView = kitbuilder.channels.panelElements.request( 'element:selected' );\n\n\t\tvar itemData = {\n\t\t\tid: kitbuilder.helpers.getUniqueID(),\n\t\t\telType: elementView.model.get( 'elType' )\n\t\t};\n\n\t\tif ( 'widget' === itemData.elType ) {\n\t\t\titemData.widgetType = elementView.model.get( 'widgetType' );\n\t\t} else if ( 'section' === itemData.elType ) {\n\t\t\titemData.elements = [];\n\t\t\titemData.isInner = true;\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\tvar customData = elementView.model.get( 'custom' );\n\n\t\tif ( customData ) {\n\t\t\t_.extend( itemData, customData );\n\t\t}\n\n\t\tthis.addChildElement( itemData, options );\n\t},\n\n\tisCollectionFilled: function() {\n\t\treturn false;\n\t},\n\n\tisInner: function() {\n\t\treturn !! this.model.get( 'isInner' );\n\t},\n\n\tinitRemoveDialog: function() {\n\t\tvar removeDialog;\n\n\t\tthis.getRemoveDialog = function() {\n\t\t\tif ( ! removeDialog ) {\n\t\t\t\tvar elementTitle = this.model.getTitle();\n\n\t\t\t\tremoveDialog = kitbuilder.dialogsManager.createWidget( 'confirm', {\n\t\t\t\t\tmessage: kitbuilder.translate( 'dialog_confirm_delete', [ elementTitle.toLowerCase() ] ),\n\t\t\t\t\theaderMessage: kitbuilder.translate( 'delete_element', [ elementTitle ] ),\n\t\t\t\t\tstrings: {\n\t\t\t\t\t\tconfirm: kitbuilder.translate( 'delete' ),\n\t\t\t\t\t\tcancel: kitbuilder.translate( 'cancel' )\n\t\t\t\t\t},\n\t\t\t\t\tdefaultOption: 'confirm',\n\t\t\t\t\tonConfirm: _.bind( function() {\n\t\t\t\t\t\tvar parent = this._parent;\n\n\t\t\t\t\t\tparent.isManualRemoving = true;\n\n\t\t\t\t\t\tthis.model.destroy();\n\n\t\t\t\t\t\tparent.isManualRemoving = false;\n\t\t\t\t\t}, this )\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn removeDialog;\n\t\t};\n\t},\n\n\tinitControlsCSSParser: function() {\n\t\tthis.controlsCSSParser = new ControlsCSSParser( { id: this.model.cid } );\n\t},\n\n\tenqueueFonts: function() {\n\t\tvar editModel = this.getEditModel(),\n\t\t\tsettings = editModel.get( 'settings' );\n\n\t\t_.each( settings.getFontControls(), _.bind( function( control ) {\n\t\t\tvar fontFamilyName = editModel.getSetting( control.name );\n\n\t\t\tif ( _.isEmpty( fontFamilyName ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tkitbuilder.helpers.enqueueFont( fontFamilyName );\n\t\t}, this ) );\n\t},\n\n\trenderStyles: function() {\n\t\tvar self = this,\n\t\t\tsettings = self.getEditModel().get( 'settings' );\n\n\t\tself.controlsCSSParser.stylesheet.empty();\n\n\t\tself.controlsCSSParser.addStyleRules( settings.getStyleControls(), settings.attributes, self.getEditModel().get( 'settings' ).controls, [ /\\{\\{ID}}/g, /\\{\\{WRAPPER}}/g ], [ self.getID(), '#kitbuilder .' + self.getElementUniqueID() ] );\n\n\t\tif ( 'column' === self.model.get( 'elType' ) ) {\n\t\t\tvar inlineSize = settings.get( '_inline_size' );\n\n\t\t\tif ( ! _.isEmpty( inlineSize ) ) {\n\t\t\t\tself.controlsCSSParser.stylesheet.addRules( '#kitbuilder .' + self.getElementUniqueID(), { width: inlineSize + '%' }, { min: 'tablet' } );\n\t\t\t}\n\t\t}\n\n\t\tself.controlsCSSParser.addStyleToDocument();\n\n\t\tvar extraCSS = kitbuilder.hooks.applyFilters( 'editor/style/styleText', '', this );\n\n\t\tif ( extraCSS ) {\n\t\t\tself.controlsCSSParser.elements.$stylesheetElement.append( extraCSS );\n\t\t}\n\t},\n\n\trenderCustomClasses: function() {\n\t\tvar self = this;\n\n\t\tself.$el.addClass( 'kitbuilder-element' );\n\n\t\tvar settings = self.getEditModel().get( 'settings' ),\n\t\t\tclassControls = settings.getClassControls();\n\n\t\t// Remove all previous classes\n\t\t_.each( classControls, function( control ) {\n\t\t\tvar previousClassValue = settings.previous( control.name );\n\n\t\t\tif ( control.classes_dictionary ) {\n\t\t\t\tif ( undefined !== control.classes_dictionary[ previousClassValue ] ) {\n\t\t\t\t\tpreviousClassValue = control.classes_dictionary[ previousClassValue ];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tself.$el.removeClass( control.prefix_class + previousClassValue );\n\t\t} );\n\n\t\t// Add new classes\n\t\t_.each( classControls, function( control ) {\n\t\t\tvar value = settings.attributes[ control.name ],\n\t\t\t\tclassValue = value;\n\n\t\t\tif ( control.classes_dictionary ) {\n\t\t\t\tif ( undefined !== control.classes_dictionary[ value ] ) {\n\t\t\t\t\tclassValue = control.classes_dictionary[ value ];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar isVisible = kitbuilder.helpers.isActiveControl( control, settings.attributes );\n\n\t\t\tif ( isVisible && ! _.isEmpty( classValue ) ) {\n\t\t\t\tself.$el\n\t\t\t\t\t.addClass( control.prefix_class + classValue )\n\t\t\t\t\t.addClass( _.result( self, 'className' ) );\n\t\t\t}\n\t\t} );\n\t},\n\n\trenderCustomElementID: function() {\n\t\tvar customElementID = this.getEditModel().get( 'settings' ).get( '_element_id' );\n\n\t\tthis.$el.attr( 'id', customElementID );\n\t},\n\n\trenderUI: function() {\n\t\tthis.renderStyles();\n\t\tthis.renderCustomClasses();\n\t\tthis.renderCustomElementID();\n\t\tthis.enqueueFonts();\n\t},\n\n\trunReadyTrigger: function() {\n\t\t_.defer( _.bind( function() {\n\t\t\tkitbuilderFrontend.elementsHandler.runReadyTrigger( this.$el );\n\t\t}, this ) );\n\t},\n\n\tgetID: function() {\n\t\treturn this.model.get( 'id' );\n\t},\n\n\tgetElementUniqueID: function() {\n\t\treturn 'kitbuilder-element-' + this.getID();\n\t},\n\n\tduplicate: function() {\n\t\tthis.trigger( 'request:duplicate' );\n\t},\n\n\tconfirmRemove: function() {\n\t\tthis.getRemoveDialog().show();\n\t},\n\n\trenderOnChange: function( settings ) {\n\t\t// Make sure is correct model\n\t\tif ( settings instanceof BaseSettingsModel ) {\n\t\t\tvar hasChanged = settings.hasChanged(),\n\t\t\t\tisContentChanged = ! hasChanged,\n\t\t\t\tisRenderRequired = ! hasChanged;\n\n\t\t\t_.each( settings.changedAttributes(), function( settingValue, settingKey ) {\n\t\t\t\tvar control = settings.getControl( settingKey );\n\n\t\t\t\tif ( ! control ) {\n\t\t\t\t\tisRenderRequired = true;\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( 'none' !== control.render_type ) {\n\t\t\t\t\tisRenderRequired = true;\n\t\t\t\t}\n\n\t\t\t\tif ( -1 !== [ 'none', 'ui' ].indexOf( control.render_type ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( 'template' === control.render_type || ! settings.isStyleControl( settingKey ) && ! settings.isClassControl( settingKey ) && '_element_id' !== settingKey ) {\n\t\t\t\t\tisContentChanged = true;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tif ( ! isRenderRequired ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( ! isContentChanged ) {\n\t\t\t\tthis.renderUI();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Re-render the template\n\t\tvar templateType = this.getTemplateType(),\n\t\t\teditModel = this.getEditModel();\n\n\t\tif ( 'js' === templateType ) {\n\t\t\tthis.getEditModel().setHtmlCache();\n\t\t\tthis.render();\n\t\t\teditModel.renderOnLeave = true;\n\t\t} else {\n\t\t\teditModel.renderRemoteServer();\n\t\t}\n\t},\n\n\tonCollectionChanged: function() {\n\t\tkitbuilder.setFlagEditorChange( true );\n\t},\n\n\tonEditSettingsChanged: function( changedModel ) {\n\t\tthis.renderOnChange( changedModel );\n\t},\n\n\tonSettingsChanged: function( changedModel ) {\n\t\tkitbuilder.setFlagEditorChange( true );\n\n\t\tthis.renderOnChange( changedModel );\n\t},\n\n\tonClickEdit: function( event ) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar activeMode = kitbuilder.channels.dataEditMode.request( 'activeMode' );\n\n\t\tif ( 'edit' !== activeMode ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.edit();\n\t},\n\n\tonClickDuplicate: function( event ) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tthis.duplicate();\n\t},\n\n\tonClickRemove: function( event ) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tthis.confirmRemove();\n\t},\n\n\tonClickSave: function( event ) {\n\t\tevent.preventDefault();\n\n\t\tvar model = this.model;\n\n\t\tkitbuilder.templates.startModal( function() {\n\t\t\tkitbuilder.templates.getLayout().showSaveTemplateView( model );\n\t\t} );\n\t},\n\n\tonDestroy: function() {\n\t\tthis.controlsCSSParser.removeStyleFromDocument();\n\t}\n} );\n\nmodule.exports = BaseElementView;\n",
    "var SectionView = require( 'kitbuilder-views/section' ),\n\tBaseSectionsContainerView;\n\nBaseSectionsContainerView = Marionette.CompositeView.extend( {\n\tchildView: SectionView,\n\n\tbehaviors: {\n\t\tSortable: {\n\t\t\tbehaviorClass: require( 'kitbuilder-behaviors/sortable' ),\n\t\t\telChildType: 'section'\n\t\t},\n\t\tHandleDuplicate: {\n\t\t\tbehaviorClass: require( 'kitbuilder-behaviors/handle-duplicate' )\n\t\t},\n\t\tHandleAdd: {\n\t\t\tbehaviorClass: require( 'kitbuilder-behaviors/duplicate' )\n\t\t}\n\t},\n\n\tgetSortableOptions: function() {\n\t\treturn {\n\t\t\thandle: '> .kitbuilder-container > .kitbuilder-row > .kitbuilder-column > .kitbuilder-element-overlay .kitbuilder-editor-section-settings-list .kitbuilder-editor-element-trigger',\n\t\t\titems: '> .kitbuilder-section'\n\t\t};\n\t},\n\n\tgetChildType: function() {\n\t\treturn [ 'section' ];\n\t},\n\n\tisCollectionFilled: function() {\n\t\treturn false;\n\t},\n\n\tinitialize: function() {\n\t\tthis\n\t\t\t.listenTo( this.collection, 'add remove reset', this.onCollectionChanged )\n\t\t\t.listenTo( kitbuilder.channels.panelElements, 'element:drag:start', this.onPanelElementDragStart )\n\t\t\t.listenTo( kitbuilder.channels.panelElements, 'element:drag:end', this.onPanelElementDragEnd );\n\t},\n\n\taddChildModel: function( model, options ) {\n\t\treturn this.collection.add( model, options, true );\n\t},\n\n\taddSection: function( properties ) {\n\t\tvar newSection = {\n\t\t\tid: kitbuilder.helpers.getUniqueID(),\n\t\t\telType: 'section',\n\t\t\tsettings: {},\n\t\t\telements: []\n\t\t};\n\n\t\tif ( properties ) {\n\t\t\t_.extend( newSection, properties );\n\t\t}\n\n\t\tvar newModel = this.addChildModel( newSection );\n\n\t\treturn this.children.findByModelCid( newModel.cid );\n\t},\n\n\tonCollectionChanged: function() {\n\t\tkitbuilder.setFlagEditorChange( true );\n\t},\n\n\tonPanelElementDragStart: function() {\n\t\tkitbuilder.helpers.disableElementEvents( this.$el.find( 'iframe' ) );\n\t},\n\n\tonPanelElementDragEnd: function() {\n\t\tkitbuilder.helpers.enableElementEvents( this.$el.find( 'iframe' ) );\n\t}\n} );\n\nmodule.exports = BaseSectionsContainerView;\n",
    "var BaseElementView = require( 'kitbuilder-views/base-element' ),\n\tElementEmptyView = require( 'kitbuilder-views/element-empty' ),\n\tColumnView;\n\nColumnView = BaseElementView.extend( {\n\ttemplate: Marionette.TemplateCache.get( '#tmpl-kitbuilder-element-column-content' ),\n\n\temptyView: ElementEmptyView,\n\n\tchildViewContainer: '> .kitbuilder-column-wrap > .kitbuilder-widget-wrap',\n\n\tbehaviors: {\n\t\tSortable: {\n\t\t\tbehaviorClass: require( 'kitbuilder-behaviors/sortable' ),\n\t\t\telChildType: 'widget'\n\t\t},\n\t\tResizable: {\n\t\t\tbehaviorClass: require( 'kitbuilder-behaviors/resizable' )\n\t\t},\n\t\tHandleDuplicate: {\n\t\t\tbehaviorClass: require( 'kitbuilder-behaviors/handle-duplicate' )\n\t\t},\n\t\tHandleAddMode: {\n\t\t\tbehaviorClass: require( 'kitbuilder-behaviors/duplicate' )\n\t\t}\n\t},\n\n\tclassName: function() {\n\t\tvar classes = BaseElementView.prototype.className.apply( this, arguments ),\n\t\t\ttype = this.isInner() ? 'inner' : 'top';\n\n\t\treturn classes + ' kitbuilder-column kitbuilder-' + type + '-column';\n\t},\n\n\tui: function() {\n\t\tvar ui = BaseElementView.prototype.ui.apply( this, arguments );\n\n\t\tui.duplicateButton = '> .kitbuilder-element-overlay .kitbuilder-editor-column-settings-list .kitbuilder-editor-element-duplicate';\n\t\tui.removeButton = '> .kitbuilder-element-overlay .kitbuilder-editor-column-settings-list .kitbuilder-editor-element-remove';\n\t\tui.saveButton = '> .kitbuilder-element-overlay .kitbuilder-editor-column-settings-list .kitbuilder-editor-element-save';\n\t\tui.triggerButton = '> .kitbuilder-element-overlay .kitbuilder-editor-column-settings-list .kitbuilder-editor-element-edit-trigger';\n\t\tui.addButton = '> .kitbuilder-element-overlay .kitbuilder-editor-column-settings-list .kitbuilder-editor-element-add';\n\t\tui.columnTitle = '.column-title';\n\t\tui.columnInner = '> .kitbuilder-column-wrap';\n\t\tui.listTriggers = '> .kitbuilder-element-overlay .kitbuilder-editor-element-trigger';\n\n\t\treturn ui;\n\t},\n\n\ttriggers: {\n\t\t'click @ui.addButton': 'click:new'\n\t},\n\n\tevents: function() {\n\t\tvar events = BaseElementView.prototype.events.apply( this, arguments );\n\n\t\tevents[ 'click @ui.listTriggers' ] = 'onClickTrigger';\n\t\tevents[ 'click @ui.triggerButton' ] = 'onClickEdit';\n\n\t\treturn events;\n\t},\n\n\tinitialize: function() {\n\t\tBaseElementView.prototype.initialize.apply( this, arguments );\n\n\t\tthis.listenTo( kitbuilder.channels.data, 'widget:drag:start', this.onWidgetDragStart );\n\t\tthis.listenTo( kitbuilder.channels.data, 'widget:drag:end', this.onWidgetDragEnd );\n\t},\n\n\tisDroppingAllowed: function() {\n\t\tvar elementView = kitbuilder.channels.panelElements.request( 'element:selected' ),\n\t\t\telType = elementView.model.get( 'elType' );\n\n\t\tif ( 'section' === elType ) {\n\t\t\treturn ! this.isInner();\n\t\t}\n\n\t\treturn 'widget' === elType;\n\t},\n\n\tchangeSizeUI: function() {\n\t\tvar columnSize = this.model.getSetting( '_column_size' ),\n\t\t\tinlineSize = this.model.getSetting( '_inline_size' ),\n\t\t\tcolumnSizeTitle = parseFloat( inlineSize || columnSize ).toFixed( 1 ) + '%';\n\n\t\tthis.$el.attr( 'data-col', columnSize );\n\n\t\tthis.ui.columnTitle.html( columnSizeTitle );\n\t},\n\n\tgetSortableOptions: function() {\n\t\treturn {\n\t\t\tconnectWith: '.kitbuilder-widget-wrap',\n\t\t\titems: '> .kitbuilder-element'\n\t\t};\n\t},\n\n\t// Events\n\tonCollectionChanged: function() {\n\t\tBaseElementView.prototype.onCollectionChanged.apply( this, arguments );\n\n\t\tthis.changeChildContainerClasses();\n\t},\n\n\tchangeChildContainerClasses: function() {\n\t\tvar emptyClass = 'kitbuilder-element-empty',\n\t\t\tpopulatedClass = 'kitbuilder-element-populated';\n\n\t\tif ( this.collection.isEmpty() ) {\n\t\t\tthis.ui.columnInner.removeClass( populatedClass ).addClass( emptyClass );\n\t\t} else {\n\t\t\tthis.ui.columnInner.removeClass( emptyClass ).addClass( populatedClass );\n\t\t}\n\t},\n\n\tonRender: function() {\n\t\tvar self = this;\n\n\t\tself.changeChildContainerClasses();\n\t\tself.changeSizeUI();\n\n\t\tself.$el.html5Droppable( {\n\t\t\titems: ' > .kitbuilder-column-wrap > .kitbuilder-widget-wrap > .kitbuilder-element, >.kitbuilder-column-wrap > .kitbuilder-widget-wrap > .kitbuilder-empty-view > .kitbuilder-first-add',\n\t\t\taxis: [ 'vertical' ],\n\t\t\tgroups: [ 'kitbuilder-element' ],\n\t\t\tisDroppingAllowed: _.bind( self.isDroppingAllowed, self ),\n\t\t\tonDragEnter: function() {\n\t\t\t\tself.$el.addClass( 'kitbuilder-dragging-on-child' );\n\t\t\t},\n\t\t\tonDragging: function( side, event ) {\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\tif ( this.dataset.side !== side ) {\n\t\t\t\t\tBackbone.$( this ).attr( 'data-side', side );\n\t\t\t\t}\n\t\t\t},\n\t\t\tonDragLeave: function() {\n\t\t\t\tself.$el.removeClass( 'kitbuilder-dragging-on-child' );\n\n\t\t\t\tBackbone.$( this ).removeAttr( 'data-side' );\n\t\t\t},\n\t\t\tonDropping: function( side, event ) {\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\tvar newIndex = Backbone.$( this ).index();\n\n\t\t\t\tif ( 'bottom' === side ) {\n\t\t\t\t\tnewIndex++;\n\t\t\t\t}\n\n\t\t\t\tself.addElementFromPanel( { at: newIndex } );\n\t\t\t}\n\t\t} );\n\t},\n\n\tonClickTrigger: function( event ) {\n\t\tevent.preventDefault();\n\n\t\tvar $trigger = this.$( event.currentTarget ),\n\t\t\tisTriggerActive = $trigger.hasClass( 'kitbuilder-active' );\n\n\t\tthis.ui.listTriggers.removeClass( 'kitbuilder-active' );\n\n\t\tif ( ! isTriggerActive ) {\n\t\t\t$trigger.addClass( 'kitbuilder-active' );\n            kitbuilder.getPanelView().hideContentPanel();\n\t\t}\n\t},\n\n\tonWidgetDragStart: function() {\n\t\tthis.$el.addClass( 'kitbuilder-dragging' );\n\t},\n\n\tonWidgetDragEnd: function() {\n\t\tthis.$el.removeClass( 'kitbuilder-dragging' );\n\t}\n} );\n\nmodule.exports = ColumnView;\n",
    "var ControlsStack;\n\nControlsStack = Marionette.CompositeView.extend( {\n\tclassName: 'kitbuilder-panel-controls-stack',\n\n\ttemplateHelpers: function() {\n\t\treturn {\n\t\t\telementData: kitbuilder.getElementData( this.model )\n\t\t};\n\t},\n\n\tui: function() {\n\t\treturn {\n\t\t\ttabs: '.kitbuilder-panel-navigation-tab',\n\t\t\treloadButton: '.kitbuilder-update-preview-button'\n\t\t};\n\t},\n\n\tevents: function() {\n\t\treturn {\n\t\t\t'click @ui.tabs': 'onClickTabControl',\n\t\t\t'click @ui.reloadButton': 'onReloadButtonClick'\n\t\t};\n\t},\n\n\tmodelEvents: {\n\t\t'destroy': 'onModelDestroy'\n\t},\n\n\tbehaviors: {\n\t\tHandleInnerTabs: {\n\t\t\tbehaviorClass: require( 'kitbuilder-behaviors/inner-tabs' )\n\t\t}\n\t},\n\n\tactiveTab: null,\n\n\tactiveSection: null,\n\n\tinitialize: function() {\n\t\tthis.listenTo( kitbuilder.channels.deviceMode, 'change', this.onDeviceModeChange );\n\t},\n\n\tfilter: function( model ) {\n\t\tif ( model.get( 'tab' ) !== this.activeTab ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( 'section' === model.get( 'type' ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tvar section = model.get( 'section' );\n\n\t\treturn ! section || section === this.activeSection;\n\t},\n\n\tactivateTab: function( $tab ) {\n\t\tvar activeTab = this.activeTab = $tab.data( 'tab' );\n\n\t\tthis.ui.tabs.removeClass( 'active' );\n\n\t\t$tab.addClass( 'active' );\n\n\t\tvar sectionControls = this.collection.filter( function( model ) {\n\t\t\treturn 'section' === model.get( 'type' ) && activeTab === model.get( 'tab' );\n\t\t} );\n\n\t\tif ( sectionControls[0] ) {\n\t\t\tthis.activateSection( sectionControls[0].get( 'name' ) );\n\t\t}\n\t},\n\n\tactivateSection: function( sectionName ) {\n\t\tthis.activeSection = sectionName;\n\t},\n\n\tgetChildView: function( item ) {\n\t\tvar controlType = item.get( 'type' );\n\n\t\treturn kitbuilder.getControlView( controlType );\n\t},\n\n\topenActiveSection: function() {\n\t\tvar activeSection = this.activeSection,\n\t\t\tactiveSectionView = this.children.filter( function( view ) {\n\t\t\t\treturn activeSection === view.model.get( 'name' );\n\t\t\t} );\n\n\t\tif ( activeSectionView[0] ) {\n\t\t\tactiveSectionView[0].ui.heading.addClass( 'kitbuilder-open' );\n\t\t}\n\t},\n\n\tonRenderCollection: function() {\n\t\t// Create tooltip on controls\n\t\tthis.$( '.tooltip-target' ).tipsy( {\n\t\t\tgravity: function() {\n\t\t\t\t// `n` for down, `s` for up\n\t\t\t\tvar gravity = Backbone.$( this ).data( 'tooltip-pos' );\n\n\t\t\t\tif ( undefined !== gravity ) {\n\t\t\t\t\treturn gravity;\n\t\t\t\t} else {\n\t\t\t\t\treturn 'n';\n\t\t\t\t}\n\t\t\t},\n\t\t\ttitle: function() {\n\t\t\t\treturn this.getAttribute( 'data-tooltip' );\n\t\t\t}\n\t\t} );\n\n\t\tthis.openActiveSection();\n\t},\n\n\tonRenderTemplate: function() {\n\t\tthis.activateTab( this.ui.tabs.eq( 0 ) );\n\t},\n\n\tonModelDestroy: function() {\n\t\tthis.destroy();\n\t},\n\n\tonClickTabControl: function( event ) {\n\t\tevent.preventDefault();\n\n\t\tvar $tab = this.$( event.currentTarget );\n\n\t\tif ( this.activeTab === $tab.data( 'tab' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.activateTab( $tab );\n\n\t\tthis._renderChildren();\n\t},\n\n\tonReloadButtonClick: function() {\n\t\tkitbuilder.reloadPreview();\n\t},\n\n\tonDeviceModeChange: function() {\n\t\tthis.$el.removeClass( 'kitbuilder-responsive-switchers-open' );\n\t},\n\n\tonChildviewControlSectionClicked: function( childView ) {\n\t\tvar isSectionOpen = childView.ui.heading.hasClass( 'kitbuilder-open' );\n\n\t\tthis.activateSection( isSectionOpen ? null : childView.model.get( 'name' ) );\n\n\t\tthis._renderChildren();\n\t},\n\n\tonChildviewResponsiveSwitcherClick: function( childView, device ) {\n\t\tif ( 'desktop' === device ) {\n\t\t\tthis.$el.toggleClass( 'kitbuilder-responsive-switchers-open' );\n\t\t}\n\t}\n} );\n\nmodule.exports = ControlsStack;\n",
    "var ControlBaseItemView = require( 'kitbuilder-views/controls/base' ),\n\tControlBaseMultipleItemView;\n\nControlBaseMultipleItemView = ControlBaseItemView.extend( {\n\n\tapplySavedValue: function() {\n\t\tvar values = this.getControlValue(),\n\t\t\t$inputs = this.$( '[data-setting]' ),\n\t\t\tself = this;\n\n\t\t_.each( values, function( value, key ) {\n\t\t\tvar $input = $inputs.filter( function() {\n\t\t\t\treturn key === this.dataset.setting;\n\t\t\t} );\n\n\t\t\tself.setInputValue( $input, value );\n\t\t} );\n\t},\n\n\tgetControlValue: function( key ) {\n\t\tvar values = this.elementSettingsModel.get( this.model.get( 'name' ) );\n\n\t\tif ( ! Backbone.$.isPlainObject( values ) ) {\n\t\t\treturn {};\n\t\t}\n\n\t\tif ( key ) {\n\t\t\treturn values[ key ] || '';\n\t\t}\n\n\t\treturn kitbuilder.helpers.cloneObject( values );\n\t},\n\n\tsetValue: function( key, value ) {\n\t\tvar values = this.getControlValue();\n\n\t\tif ( 'object' === typeof key ) {\n\t\t\t_.each( key, function( internalValue, internalKey ) {\n\t\t\t\tvalues[ internalKey ] = internalValue;\n\t\t\t} );\n\t\t} else {\n\t\t\tvalues[ key ] = value;\n\t\t}\n\n\t\tthis.setSettingsModel( values );\n\t},\n\n\tupdateElementModel: function( event ) {\n\t\tvar inputValue = this.getInputValue( event.currentTarget ),\n\t\t\tkey = event.currentTarget.dataset.setting;\n\n\t\tthis.setValue( key, inputValue );\n\t}\n}, {\n\t// Static methods\n\tgetStyleValue: function( placeholder, controlValue ) {\n\t\tif ( ! _.isObject( controlValue ) ) {\n\t\t\treturn ''; // invalid\n\t\t}\n\n\t\treturn controlValue[ placeholder ];\n\t}\n} );\n\nmodule.exports = ControlBaseMultipleItemView;\n",
    "var ControlBaseMultipleItemView = require( 'kitbuilder-views/controls/base-multiple' ),\n\tControlBaseUnitsItemView;\n\nControlBaseUnitsItemView = ControlBaseMultipleItemView.extend( {\n\n\tgetCurrentRange: function() {\n\t\treturn this.getUnitRange( this.getControlValue( 'unit' ) );\n\t},\n\n\tgetUnitRange: function( unit ) {\n\t\tvar ranges = this.model.get( 'range' );\n\n\t\tif ( ! ranges || ! ranges[ unit ] ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn ranges[ unit ];\n\t}\n} );\n\nmodule.exports = ControlBaseUnitsItemView;\n",
    "var ControlBaseItemView;\n\nControlBaseItemView = Marionette.CompositeView.extend( {\n\tui: function() {\n\t\treturn {\n\t\t\tinput: 'input[data-setting][type!=\"checkbox\"][type!=\"radio\"]',\n\t\t\tcheckbox: 'input[data-setting][type=\"checkbox\"]',\n\t\t\tradio: 'input[data-setting][type=\"radio\"]',\n\t\t\tselect: 'select[data-setting]',\n\t\t\ttextarea: 'textarea[data-setting]',\n\t\t\tcontrolTitle: '.kitbuilder-control-title',\n\t\t\tresponsiveSwitchers: '.kitbuilder-responsive-switcher'\n\t\t};\n\t},\n\n\tclassName: function() {\n\t\t// TODO: Any better classes for that?\n\t\tvar classes = 'kitbuilder-control kitbuilder-control-' + this.model.get( 'name' ) + ' kitbuilder-control-type-' + this.model.get( 'type' ),\n\t\t\tmodelClasses = this.model.get( 'classes' ),\n\t\t\tresponsive = this.model.get( 'responsive' );\n\n\t\tif ( ! _.isEmpty( modelClasses ) ) {\n\t\t\tclasses += ' ' + modelClasses;\n\t\t}\n\n\t\tif ( ! _.isEmpty( this.model.get( 'section' ) ) ) {\n\t\t\tclasses += ' kitbuilder-control-under-section';\n\t\t}\n\n\t\tif ( ! _.isEmpty( responsive ) ) {\n\t\t\t_.each( responsive, function( device ) {\n\t\t\t\tclasses += ' kitbuilder-control-responsive-' + device;\n\t\t\t} );\n\t\t}\n\n\t\treturn classes;\n\t},\n\n\tgetTemplate: function() {\n\t\treturn Marionette.TemplateCache.get( '#tmpl-kitbuilder-control-' + this.model.get( 'type' ) + '-content' );\n\t},\n\n\ttemplateHelpers: function() {\n\t\tvar controlData = {\n\t\t\tcontrolValue: this.getControlValue(),\n\t\t\t_cid: this.model.cid\n\t\t};\n\n\t\treturn {\n\t\t\tdata: _.extend( {}, this.model.toJSON(), controlData )\n\t\t};\n\t},\n\n\tbaseEvents: {\n\t\t'input @ui.input': 'onBaseInputChange',\n\t\t'change @ui.checkbox': 'onBaseInputChange',\n\t\t'change @ui.radio': 'onBaseInputChange',\n\t\t'input @ui.textarea': 'onBaseInputChange',\n\t\t'change @ui.select': 'onBaseInputChange',\n\t\t'click @ui.responsiveSwitchers': 'onSwitcherClick'\n\t},\n\n\tchildEvents: {},\n\n\tevents: function() {\n\t\treturn _.extend( {}, this.baseEvents, this.childEvents );\n\t},\n\n\tinitialize: function( options ) {\n\t\tthis.elementSettingsModel = options.elementSettingsModel;\n\n\t\tvar controlType = this.model.get( 'type' ),\n\t\t\tcontrolSettings = Backbone.$.extend( true, {}, kitbuilder.config.controls[ controlType ], this.model.attributes );\n\n\t\tthis.model.set( controlSettings );\n\n\t\tthis.listenTo( this.elementSettingsModel, 'change', this.toggleControlVisibility );\n\t},\n\n\tgetControlValue: function() {\n\t\treturn this.elementSettingsModel.get( this.model.get( 'name' ) );\n\t},\n\n\tisValidValue: function( value ) {\n\t\treturn true;\n\t},\n\n\tsetValue: function( value ) {\n\t\tthis.setSettingsModel( value );\n\t},\n\n\tsetSettingsModel: function( value ) {\n\t\tif ( true !== this.isValidValue( value ) ) {\n\t\t\tthis.triggerMethod( 'settings:error' );\n\t\t\treturn;\n\t\t}\n\n\t\tthis.elementSettingsModel.set( this.model.get( 'name' ), value );\n\n\t\tthis.triggerMethod( 'settings:change' );\n\n\t\tvar elementType = this.elementSettingsModel.get( 'elType' );\n\n\t\t// TODO: The following is a temp fallback from 1.2.0\n\t\tif ( 'widget' === elementType ) {\n\t\t\telementType = this.elementSettingsModel.get( 'widgetType' );\n\t\t}\n\n\t\tif ( undefined === elementType ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Do not use with this action\n\t\t// It's here for tests and maybe later will be publish\n\t\tkitbuilder.hooks.doAction( 'panel/editor/element/' + elementType + '/' + this.model.get( 'name' ) + '/changed' );\n\t},\n\n\tapplySavedValue: function() {\n\t\tthis.setInputValue( '[data-setting=\"' + this.model.get( 'name' ) + '\"]', this.getControlValue() );\n\t},\n\n\tgetEditSettings: function( setting ) {\n\t\tvar settings = this.getOption( 'elementEditSettings' ).toJSON();\n\n\t\tif ( setting ) {\n\t\t\treturn settings[ setting ];\n\t\t}\n\n\t\treturn settings;\n\t},\n\n\tsetEditSetting: function( settingKey, settingValue ) {\n\t\tvar settings = this.getOption( 'elementEditSettings' );\n\n\t\tsettings.set( settingKey, settingValue );\n\t},\n\n\tgetInputValue: function( input ) {\n\t\tvar $input = this.$( input ),\n\t\t\tinputValue = $input.val(),\n\t\t\tinputType = $input.attr( 'type' );\n\n\t\tif ( -1 !== [ 'radio', 'checkbox' ].indexOf( inputType ) ) {\n\t\t\treturn $input.prop( 'checked' ) ? inputValue : '';\n\t\t}\n\n\t\t// Temp fix for jQuery (< 3.0) that return null instead of empty array\n\t\tif ( 'SELECT' === input.tagName && $input.prop( 'multiple' ) && null === inputValue ) {\n\t\t\tinputValue = [];\n\t\t}\n\n\t\treturn inputValue;\n\t},\n\n\tsetInputValue: function( input, value ) {\n\t\tvar $input = this.$( input ),\n\t\t\tinputType = $input.attr( 'type' );\n\n\t\tif ( 'checkbox' === inputType ) {\n\t\t\t$input.prop( 'checked', !! value );\n\t\t} else if ( 'radio' === inputType ) {\n\t\t\t$input.filter( '[value=\"' + value + '\"]' ).prop( 'checked', true );\n\t\t} else {\n\t\t\t$input.val( value );\n\t\t}\n\t},\n\n\tonSettingsError: function() {\n\t\tthis.$el.addClass( 'kitbuilder-error' );\n\t},\n\n\tonSettingsChange: function() {\n\t\tthis.$el.removeClass( 'kitbuilder-error' );\n\t},\n\n\tonRender: function() {\n\t\tthis.applySavedValue();\n\n\t\tvar layoutType = this.model.get( 'label_block' ) ? 'block' : 'inline',\n\t\t\tshowLabel = this.model.get( 'show_label' ),\n\t\t\telClasses = 'kitbuilder-label-' + layoutType;\n\n\t\telClasses += ' kitbuilder-control-separator-' + this.model.get( 'separator' );\n\n\t\tif ( ! showLabel ) {\n\t\t\telClasses += ' kitbuilder-control-hidden-label';\n\t\t}\n\n\t\tthis.$el.addClass( elClasses );\n\t\tthis.renderResponsiveSwitchers();\n\n\t\tthis.triggerMethod( 'ready' );\n\t\tthis.toggleControlVisibility();\n\t},\n\n\tonBaseInputChange: function( event ) {\n\t\tthis.updateElementModel( event );\n\n\t\tthis.triggerMethod( 'input:change', event );\n\t},\n\n\tonSwitcherClick: function( event ) {\n\t\tvar device = Backbone.$( event.currentTarget ).data( 'device' );\n\n\t\tkitbuilder.changeDeviceMode( device );\n\n\t\tthis.triggerMethod( 'responsive:switcher:click', device );\n\t},\n\n\trenderResponsiveSwitchers: function() {\n\t\tif ( _.isEmpty( this.model.get( 'responsive' ) ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar templateHtml = Backbone.$( '#tmpl-kitbuilder-control-responsive-switchers' ).html();\n\n\t\tthis.ui.controlTitle.after( templateHtml );\n\t},\n\n\ttoggleControlVisibility: function() {\n\t\tvar isVisible = kitbuilder.helpers.isActiveControl( this.model, this.elementSettingsModel.attributes );\n\n\t\tthis.$el.toggleClass( 'kitbuilder-hidden-control', ! isVisible );\n\n\t\tkitbuilder.channels.data.trigger( 'scrollbar:update' );\n\t},\n\n\tonReady: function() {},\n\n\tupdateElementModel: function( event ) {\n\t\tthis.setValue( this.getInputValue( event.currentTarget ) );\n\t}\n}, {\n\t// Static methods\n\tgetStyleValue: function( placeholder, controlValue ) {\n\t\treturn controlValue;\n\t}\n} );\n\nmodule.exports = ControlBaseItemView;\n",
    "var ControlMultipleBaseItemView = require( 'kitbuilder-views/controls/base-multiple' ),\n\tControlBoxShadowItemView;\n\nControlBoxShadowItemView = ControlMultipleBaseItemView.extend( {\n\tui: function() {\n\t\tvar ui = ControlMultipleBaseItemView.prototype.ui.apply( this, arguments );\n\n\t\tui.sliders = '.kitbuilder-slider';\n\t\tui.colors = '.kitbuilder-box-shadow-color-picker';\n\n\t\treturn ui;\n\t},\n\n\tchildEvents: {\n\t\t'slide @ui.sliders': 'onSlideChange'\n\t},\n\n\tinitSliders: function() {\n\t\tvar value = this.getControlValue();\n\n\t\tthis.ui.sliders.each( function() {\n\t\t\tvar $slider = Backbone.$( this ),\n\t\t\t\t$input = $slider.next( '.kitbuilder-slider-input' ).find( 'input' );\n\n\t\t\t$slider.slider( {\n\t\t\t\tvalue: value[ this.dataset.input ],\n\t\t\t\tmin: +$input.attr( 'min' ),\n\t\t\t\tmax: +$input.attr( 'max' )\n\t\t\t} );\n\t\t} );\n\t},\n\n\tinitColors: function() {\n\t\tvar self = this;\n\n\t\tkitbuilder.helpers.wpColorPicker( this.ui.colors, {\n\t\t\tchange: function() {\n\t\t\t\tvar $this = Backbone.$( this ),\n\t\t\t\t\ttype = $this.data( 'setting' );\n\n\t\t\t\tself.setValue( type, $this.wpColorPicker( 'color' ) );\n\t\t\t},\n\n\t\t\tclear: function() {\n\t\t\t\tself.setValue( this.dataset.setting, '' );\n\t\t\t}\n\t\t} );\n\t},\n\n\tonInputChange: function( event ) {\n\t\tvar type = event.currentTarget.dataset.setting,\n\t\t\t$slider = this.ui.sliders.filter( '[data-input=\"' + type + '\"]' );\n\n\t\t$slider.slider( 'value', this.getControlValue( type ) );\n\t},\n\n\tonReady: function() {\n\t\tthis.initSliders();\n\t\tthis.initColors();\n\t},\n\n\tonSlideChange: function( event, ui ) {\n\t\tvar type = event.currentTarget.dataset.input,\n\t\t\t$input = this.ui.input.filter( '[data-setting=\"' + type + '\"]' );\n\n\t\t$input.val( ui.value );\n\t\tthis.setValue( type, ui.value );\n\t},\n\n\tonBeforeDestroy: function() {\n\t\tthis.ui.colors.each( function() {\n\t\t\tvar $color = Backbone.$( this );\n\n\t\t\tif ( $color.wpColorPicker( 'instance' ) ) {\n\t\t\t\t$color.wpColorPicker( 'close' );\n\t\t\t}\n\t\t} );\n\n\t\tthis.$el.remove();\n\t}\n} );\n\nmodule.exports = ControlBoxShadowItemView;\n",
    "var ControlBaseItemView = require( 'kitbuilder-views/controls/base' ),\n\tControlChooseItemView;\n\nControlChooseItemView = ControlBaseItemView.extend( {\n\tui: function() {\n\t\tvar ui = ControlBaseItemView.prototype.ui.apply( this, arguments );\n\n\t\tui.inputs = '[type=\"radio\"]';\n\n\t\treturn ui;\n\t},\n\n\tchildEvents: {\n\t\t'mousedown label': 'onMouseDownLabel',\n\t\t'click @ui.inputs': 'onClickInput',\n\t\t'change @ui.inputs': 'updateElementModel'\n\t},\n\n\tonMouseDownLabel: function( event ) {\n\t\tvar $clickedLabel = this.$( event.currentTarget ),\n\t\t\t$selectedInput = this.$( '#' + $clickedLabel.attr( 'for' ) );\n\n\t\t$selectedInput.data( 'checked', $selectedInput.prop( 'checked' ) );\n\t},\n\n\tonClickInput: function( event ) {\n\t\tif ( ! this.model.get( 'toggle' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar $selectedInput = this.$( event.currentTarget );\n\n\t\tif ( $selectedInput.data( 'checked' ) ) {\n\t\t\t$selectedInput.prop( 'checked', false ).trigger( 'change' );\n\t\t}\n\t},\n\n\tonRender: function() {\n\t\tControlBaseItemView.prototype.onRender.apply( this, arguments );\n\n\t\tvar currentValue = this.getControlValue();\n\n\t\tif ( currentValue ) {\n\t\t\tthis.ui.inputs.filter( '[value=\"' + currentValue + '\"]' ).prop( 'checked', true );\n\t\t} else if ( ! this.model.get( 'toggle' ) ) {\n\t\t\tthis.ui.inputs.first().prop( 'checked', true ).trigger( 'change' );\n\t\t}\n\t}\n} );\n\nmodule.exports = ControlChooseItemView;\n",
    "var ControlBaseItemView = require( 'kitbuilder-views/controls/base' ),\n\tControlCodeEditorItemView;\n\nControlCodeEditorItemView = ControlBaseItemView.extend( {\n\n\tui: function() {\n\t\tvar ui = ControlBaseItemView.prototype.ui.apply( this, arguments );\n\n\t\tui.editor = '.kitbuilder-code-editor';\n\n\t\treturn ui;\n\t},\n\n\tonReady: function() {\n\t\tvar self = this;\n\n\t\tif ( 'undefined' === typeof ace ) {\n\t\t\treturn;\n\t\t}\n\n\t\tself.editor = ace.edit( this.ui.editor[0] );\n\n\t\tBackbone.$( self.editor.container ).addClass( 'kitbuilder-input-style kitbuilder-code-editor' );\n\n\t\tself.editor.setOptions( {\n\t\t\tmode: 'ace/mode/' + self.model.attributes.language,\n\t\t\tminLines: 10,\n\t\t\tmaxLines: Infinity,\n\t\t\tshowGutter: true,\n\t\t\tuseWorker: true\n\t\t} );\n\n\t\tself.editor.setValue( self.getControlValue(), -1 ); // -1 =  move cursor to the start\n\n\t\tself.editor.on( 'change', function() {\n\t\t\tself.setValue( self.editor.getValue() );\n\t\t} );\n\n\t\tif ( 'html' === self.model.attributes.language ) {\n\t\t\t// Remove the `doctype` annotation\n\t\t\tvar session = self.editor.getSession();\n\n\t\t\tsession.on( 'changeAnnotation', function() {\n\t\t\t\tvar annotations = session.getAnnotations() || [],\n\t\t\t\t\tannotationsLength = annotations.length,\n\t\t\t\t\tindex = annotations.length;\n\n\t\t\t\twhile ( index-- ) {\n\t\t\t\t\tif ( /doctype first\\. Expected/.test( annotations[ index ].text ) ) {\n\t\t\t\t\t\tannotations.splice( index, 1 );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( annotationsLength > annotations.length ) {\n\t\t\t\t\tsession.setAnnotations( annotations );\n\t\t\t\t}\n\t\t\t}) ;\n\t\t}\n\t}\n} );\n\nmodule.exports = ControlCodeEditorItemView;\n",
    "var ControlBaseItemView = require( 'kitbuilder-views/controls/base' ),\n\tControlColorItemView;\n\nControlColorItemView = ControlBaseItemView.extend( {\n\tui: function() {\n\t\tvar ui = ControlBaseItemView.prototype.ui.apply( this, arguments );\n\n\t\tui.picker = '.color-picker-hex';\n\n\t\treturn ui;\n\t},\n\n\tonReady: function() {\n\t\tkitbuilder.helpers.wpColorPicker( this.ui.picker, {\n            width: 250,\n\t\t\tchange: _.bind( function() {\n\t\t\t\tthis.setValue( this.ui.picker.wpColorPicker( 'color' ) );\n\t\t\t}, this ),\n\n\t\t\tclear: _.bind( function() {\n\t\t\t\tthis.setValue( '' );\n\t\t\t}, this )\n\t\t} ).wpColorPicker( 'instance' )\n\t\t\t.wrap.find( '> .wp-picker-input-wrap > .wp-color-picker' )\n\t\t\t.removeAttr( 'maxlength' );\n\t},\n\n\tonBeforeDestroy: function() {\n\t\tif ( this.ui.picker.wpColorPicker( 'instance' ) ) {\n\t\t\tthis.ui.picker.wpColorPicker( 'close' );\n\t\t}\n\t\tthis.$el.remove();\n\t}\n} );\n\nmodule.exports = ControlColorItemView;\n",
    "var ControlBaseItemView = require( 'kitbuilder-views/controls/base' ),\n\tControlDateTimePickerItemView;\n\nControlDateTimePickerItemView = ControlBaseItemView.extend( {\n\tui: function() {\n\t\tvar ui = ControlBaseItemView.prototype.ui.apply( this, arguments );\n\n\t\tui.picker = '.kitbuilder-date-time-picker';\n\n\t\treturn ui;\n\t},\n\n\tonReady: function() {\n\t\tvar self = this;\n\n\t\tvar options = _.extend( this.model.get( 'picker_options' ), {\n\t\t\tonHide: function() {\n\t\t\t\tself.saveValue();\n\t\t\t}\n\t\t} );\n\n\t\tthis.ui.picker.appendDtpicker( options ).handleDtpicker( 'setDate', new Date( this.getControlValue() ) );\n\t},\n\n\tsaveValue: function() {\n\t\tthis.setValue( this.ui.input.val() );\n\t},\n\n\tonBeforeDestroy: function() {\n\t\tthis.saveValue();\n\t\tthis.ui.picker.dtpicker( 'destroy' );\n\t}\n} );\n\nmodule.exports = ControlDateTimePickerItemView;\n",
    "var ControlBaseUnitsItemView = require( 'kitbuilder-views/controls/base-units' ),\n\tControlDimensionsItemView;\n\nControlDimensionsItemView = ControlBaseUnitsItemView.extend( {\n\tui: function() {\n\t\tvar ui = ControlBaseUnitsItemView.prototype.ui.apply( this, arguments );\n\n\t\tui.controls = '.kitbuilder-control-dimension > input:enabled';\n\t\tui.link = 'button.kitbuilder-link-dimensions';\n\n\t\treturn ui;\n\t},\n\n\tchildEvents: {\n\t\t'click @ui.link': 'onLinkDimensionsClicked'\n\t},\n\n\tdefaultDimensionValue: 0,\n\n\tinitialize: function() {\n\t\tControlBaseUnitsItemView.prototype.initialize.apply( this, arguments );\n\n\t\t// TODO: Need to be in helpers, and not in variable\n\t\tthis.model.set( 'allowed_dimensions', this.filterDimensions( this.model.get( 'allowed_dimensions' ) ) );\n\t},\n\n\tgetPossibleDimensions: function() {\n\t\treturn [\n\t\t\t'top',\n\t\t\t'right',\n\t\t\t'bottom',\n\t\t\t'left'\n\t\t];\n\t},\n\n\tfilterDimensions: function( filter ) {\n\t\tfilter = filter || 'all';\n\n\t\tvar dimensions = this.getPossibleDimensions();\n\n\t\tif ( 'all' === filter ) {\n\t\t\treturn dimensions;\n\t\t}\n\n\t\tif ( ! _.isArray( filter ) ) {\n\t\t\tif ( 'horizontal' === filter ) {\n\t\t\t\tfilter = [ 'right', 'left' ];\n\t\t\t} else if ( 'vertical' === filter ) {\n\t\t\t\tfilter = [ 'top', 'bottom' ];\n\t\t\t}\n\t\t}\n\n\t\treturn filter;\n\t},\n\n\tonReady: function() {\n\t\tvar currentValue = this.getControlValue();\n\n\t\tif ( ! this.isLinkedDimensions() ) {\n\t\t\tthis.ui.link.addClass( 'unlinked' );\n\n\t\t\tthis.ui.controls.each( _.bind( function( index, element ) {\n\t\t\t\tvar value = currentValue[ element.dataset.setting ];\n\n\t\t\t\tif ( _.isEmpty( value ) ) {\n\t\t\t\t\tvalue = this.defaultDimensionValue;\n\t\t\t\t}\n\n\t\t\t\tthis.$( element ).val( value );\n\t\t\t}, this ) );\n\t\t}\n\n\t\tthis.fillEmptyDimensions();\n\t},\n\n\tupdateDimensionsValue: function() {\n\t\tvar currentValue = {},\n\t\t\tdimensions = this.getPossibleDimensions(),\n\t\t\t$controls = this.ui.controls;\n\n\t\tdimensions.forEach( _.bind( function( dimension ) {\n\t\t\tvar $element = $controls.filter( '[data-setting=\"' + dimension + '\"]' );\n\n\t\t\tcurrentValue[ dimension ] = $element.length ? $element.val() : this.defaultDimensionValue;\n\t\t}, this ) );\n\n\t\tthis.setValue( currentValue );\n\t},\n\n\tfillEmptyDimensions: function() {\n\t\tvar dimensions = this.getPossibleDimensions(),\n\t\t\tallowedDimensions = this.model.get( 'allowed_dimensions' ),\n\t\t\t$controls = this.ui.controls;\n\n\t\tif ( this.isLinkedDimensions() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdimensions.forEach( _.bind( function( dimension ) {\n\t\t\tvar $element = $controls.filter( '[data-setting=\"' + dimension + '\"]' ),\n\t\t\t\tisAllowedDimension = -1 !== _.indexOf( allowedDimensions, dimension );\n\n\t\t\tif ( isAllowedDimension && $element.length && _.isEmpty( $element.val() ) ) {\n\t\t\t\t$element.val( this.defaultDimensionValue );\n\t\t\t}\n\n\t\t}, this ) );\n\t},\n\n\tupdateDimensions: function() {\n\t\tthis.fillEmptyDimensions();\n\t\tthis.updateDimensionsValue();\n\t},\n\n\tresetDimensions: function() {\n\t\tthis.ui.controls.val( '' );\n\n\t\tthis.updateDimensionsValue();\n\t},\n\n\tonInputChange: function( event ) {\n\t\tvar inputSetting = event.target.dataset.setting;\n\n\t\tif ( 'unit' === inputSetting ) {\n\t\t\tthis.resetDimensions();\n\t\t}\n\n\t\tif ( ! _.contains( this.getPossibleDimensions(), inputSetting ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.isLinkedDimensions() ) {\n\t\t\tvar $thisControl = this.$( event.target );\n\n\t\t\tthis.ui.controls.val( $thisControl.val() );\n\t\t}\n\n\t\tthis.updateDimensions();\n\t},\n\n\tonLinkDimensionsClicked: function( event ) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tthis.ui.link.toggleClass( 'unlinked' );\n\n\t\tthis.setValue( 'isLinked', ! this.ui.link.hasClass( 'unlinked' ) );\n\n\t\tif ( this.isLinkedDimensions() ) {\n\t\t\t// Set all controls value from the first control.\n\t\t\tthis.ui.controls.val( this.ui.controls.eq( 0 ).val() );\n\t\t}\n\n\t\tthis.updateDimensions();\n\t},\n\n\tisLinkedDimensions: function() {\n\t\treturn this.getControlValue( 'isLinked' );\n\t}\n} );\n\nmodule.exports = ControlDimensionsItemView;\n",
    "var ControlSelect2View = require( 'kitbuilder-views/controls/select2' );\n\nmodule.exports = ControlSelect2View.extend( {\n\tgetSelect2Options: function() {\n\t\treturn {\n\t\t\tdir: kitbuilder.config.is_rtl ? 'rtl' : 'ltr'\n\t\t};\n\t},\n\n\ttemplateHelpers: function() {\n\t\tvar helpers = ControlSelect2View.prototype.templateHelpers.apply( this, arguments );\n\n\t\thelpers.getFontsByGroups = _.bind( function( groups ) {\n\t\t\tvar fonts = this.model.get( 'fonts' ),\n\t\t\t\tfilteredFonts = {};\n\n\t\t\t_.each( fonts, function( fontType, fontName ) {\n\t\t\t\tif ( _.isArray( groups ) && _.contains( groups, fontType ) || fontType === groups ) {\n\t\t\t\t\tfilteredFonts[ fontName ] = fontType;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\treturn filteredFonts;\n\t\t}, this );\n\n\t\treturn helpers;\n\t}\n} );\n",
    "var ControlBaseItemView = require( 'kitbuilder-views/controls/base' ),\n\tControlMediaItemView;\n\nControlMediaItemView = ControlBaseItemView.extend( {\n\tui: function() {\n\t\tvar ui = ControlBaseItemView.prototype.ui.apply( this, arguments );\n\n\t\tui.addImages = '.kitbuilder-control-gallery-add';\n\t\tui.clearGallery = '.kitbuilder-control-gallery-clear';\n\t\tui.galleryThumbnails = '.kitbuilder-control-gallery-thumbnails';\n\n\t\treturn ui;\n\t},\n\n\tchildEvents: {\n\t\t'click @ui.addImages': 'onAddImagesClick',\n\t\t'click @ui.clearGallery': 'onClearGalleryClick',\n\t\t'click @ui.galleryThumbnails': 'onGalleryThumbnailsClick'\n\t},\n\n\tonReady: function() {\n\t\tvar hasImages = this.hasImages();\n\n\t\tthis.$el\n\t\t    .toggleClass( 'kitbuilder-gallery-has-images', hasImages )\n\t\t    .toggleClass( 'kitbuilder-gallery-empty', ! hasImages );\n\n\t\tthis.initRemoveDialog();\n\t},\n\n\thasImages: function() {\n\t\treturn !! this.getControlValue().length;\n\t},\n\n\topenFrame: function( action ) {\n\t\tthis.initFrame( action );\n\n\t\tthis.frame.open();\n\t},\n\n\tinitFrame: function( action ) {\n\t\tvar frameStates = {\n\t\t\tcreate: 'gallery',\n\t\t\tadd: 'gallery-library',\n\t\t\tedit: 'gallery-edit'\n\t\t};\n\n\t\tvar options = {\n\t\t\tframe:  'post',\n\t\t\tmultiple: true,\n\t\t\tstate: frameStates[ action ],\n\t\t\tbutton: {\n\t\t\t\ttext: kitbuilder.translate( 'insert_media' )\n\t\t\t}\n\t\t};\n\n\t\tif ( this.hasImages() ) {\n\t\t\toptions.selection = this.fetchSelection();\n\t\t}\n\n\t\tthis.frame = wp.media( options );\n\n\t\t// When a file is selected, run a callback.\n\t\tthis.frame.on( {\n\t\t\t'update': this.select,\n\t\t\t'menu:render:default': this.menuRender,\n\t\t\t'content:render:browse': this.gallerySettings\n\t\t}, this );\n\t},\n\n\tmenuRender: function( view ) {\n\t\tview.unset( 'insert' );\n\t\tview.unset( 'featured-image' );\n\t},\n\n\tgallerySettings: function( browser ) {\n\t\tbrowser.sidebar.on( 'ready', function() {\n\t\t\tbrowser.sidebar.unset( 'gallery' );\n\t\t} );\n\t},\n\n\tfetchSelection: function() {\n\t\tvar attachments = wp.media.query( {\n\t\t\torderby: 'post__in',\n\t\t\torder: 'ASC',\n\t\t\ttype: 'image',\n\t\t\tperPage: -1,\n\t\t\tpost__in: _.pluck( this.getControlValue(), 'id' )\n\t\t} );\n\n\t\treturn new wp.media.model.Selection( attachments.models, {\n\t\t\tprops: attachments.props.toJSON(),\n\t\t\tmultiple: true\n\t\t} );\n\t},\n\n\t/**\n\t * Callback handler for when an attachment is selected in the media modal.\n\t * Gets the selected image information, and sets it within the control.\n\t */\n\tselect: function( selection ) {\n\t\tvar images = [];\n\n\t\tselection.each( function( image ) {\n\t\t\timages.push( {\n\t\t\t\tid: image.get( 'id' ),\n\t\t\t\turl: image.get( 'url' )\n\t\t\t} );\n\t\t} );\n\n\t\tthis.setValue( images );\n\n\t\tthis.render();\n\t},\n\n\tonBeforeDestroy: function() {\n\t\tif ( this.frame ) {\n\t\t\tthis.frame.off();\n\t\t}\n\n\t\tthis.$el.remove();\n\t},\n\n\tresetGallery: function() {\n\t\tthis.setValue( '' );\n\n\t\tthis.render();\n\t},\n\n\tinitRemoveDialog: function() {\n\t\tvar removeDialog;\n\n\t\tthis.getRemoveDialog = function() {\n\t\t\tif ( ! removeDialog ) {\n\t\t\t\tremoveDialog = kitbuilder.dialogsManager.createWidget( 'confirm', {\n\t\t\t\t\tmessage: kitbuilder.translate( 'dialog_confirm_gallery_delete' ),\n\t\t\t\t\theaderMessage: kitbuilder.translate( 'delete_gallery' ),\n\t\t\t\t\tstrings: {\n\t\t\t\t\t\tconfirm: kitbuilder.translate( 'delete' ),\n\t\t\t\t\t\tcancel: kitbuilder.translate( 'cancel' )\n\t\t\t\t\t},\n\t\t\t\t\tdefaultOption: 'confirm',\n\t\t\t\t\tonConfirm: _.bind( this.resetGallery, this )\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn removeDialog;\n\t\t};\n\t},\n\n\tonAddImagesClick: function() {\n\t\tthis.openFrame( this.hasImages() ? 'add' : 'create' );\n\t},\n\n\tonClearGalleryClick: function() {\n\t\tthis.getRemoveDialog().show();\n\t},\n\n\tonGalleryThumbnailsClick: function() {\n\t\tthis.openFrame( 'edit' );\n\t}\n} );\n\nmodule.exports = ControlMediaItemView;\n",
    "var ControlSelect2View = require( 'kitbuilder-views/controls/select2' ),\n\tControlIconView;\n\nControlIconView = ControlSelect2View.extend( {\n\n\tinitialize: function() {\n\t\tControlSelect2View.prototype.initialize.apply( this, arguments );\n\n\t\tthis.filterIcons();\n\t},\n\n\tfilterIcons: function() {\n\t\tvar icons = this.model.get( 'icons' ),\n\t\t\tinclude = this.model.get( 'include' ),\n\t\t\texclude = this.model.get( 'exclude' );\n\n\t\tif ( include ) {\n\t\t\tvar filteredIcons = {};\n\n\t\t\t_.each( include, function( iconKey ) {\n\t\t\t\tfilteredIcons[ iconKey ] = icons[ iconKey ];\n\t\t\t} );\n\n\t\t\tthis.model.set( 'icons', filteredIcons );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( exclude ) {\n\t\t\t_.each( exclude, function( iconKey ) {\n\t\t\t\tdelete icons[ iconKey ];\n\t\t\t} );\n\t\t}\n\t},\n\n\ticonsList: function( icon ) {\n\t\tif ( ! icon.id ) {\n\t\t\treturn icon.text;\n\t\t}\n\n\t\treturn Backbone.$(\n\t\t\t'<span><i class=\"' + icon.id + '\"></i> ' + icon.text + '</span>'\n\t\t);\n\t},\n\n\tgetSelect2Options: function() {\n\t\treturn {\n\t\t\tallowClear: true,\n\t\t\ttemplateResult: _.bind( this.iconsList, this ),\n\t\t\ttemplateSelection: _.bind( this.iconsList, this )\n\t\t};\n\t}\n} );\n\nmodule.exports = ControlIconView;\n",
    "var ControlMultipleBaseItemView = require( 'kitbuilder-views/controls/base-multiple' ),\n\tControlImageDimensionsItemView;\n\nControlImageDimensionsItemView = ControlMultipleBaseItemView.extend( {\n\tui: function() {\n\t\treturn {\n\t\t\tinputWidth: 'input[data-setting=\"width\"]',\n\t\t\tinputHeight: 'input[data-setting=\"height\"]',\n\n\t\t\tbtnApply: 'button.kitbuilder-image-dimensions-apply-button'\n\t\t};\n\t},\n\n\t// Override the base events\n\tbaseEvents: {\n\t\t'click @ui.btnApply': 'onApplyClicked'\n\t},\n\n\tonApplyClicked: function( event ) {\n\t\tevent.preventDefault();\n\n\t\tthis.setValue( {\n\t\t\twidth: this.ui.inputWidth.val(),\n\t\t\theight: this.ui.inputHeight.val()\n\t\t} );\n\t}\n} );\n\nmodule.exports = ControlImageDimensionsItemView;\n",
    "var ControlMultipleBaseItemView = require( 'kitbuilder-views/controls/base-multiple' ),\n\tControlMediaItemView;\n\nControlMediaItemView = ControlMultipleBaseItemView.extend( {\n\tui: function() {\n\t\tvar ui = ControlMultipleBaseItemView.prototype.ui.apply( this, arguments );\n\n\t\tui.controlMedia = '.kitbuilder-control-media';\n\t\tui.frameOpeners = '.kitbuilder-control-media-upload-button, .kitbuilder-control-media-image';\n\t\tui.deleteButton = '.kitbuilder-control-media-delete';\n\n\t\treturn ui;\n\t},\n\n\tchildEvents: {\n\t\t'click @ui.frameOpeners': 'openFrame',\n\t\t'click @ui.deleteButton': 'deleteImage'\n\t},\n\n\tonReady: function() {\n\t\tif ( _.isEmpty( this.getControlValue( 'url' ) ) ) {\n\t\t\tthis.ui.controlMedia.addClass( 'media-empty' );\n\t\t}\n\t},\n\n\topenFrame: function() {\n\t\tif ( ! this.frame ) {\n\t\t\tthis.initFrame();\n\t\t}\n\n\t\tthis.frame.open();\n\t},\n\n\tdeleteImage: function() {\n\t\tthis.setValue( {\n\t\t\turl: '',\n\t\t\tid: ''\n\t\t} );\n\n\t\tthis.render();\n\t},\n\n\t/**\n\t * Create a media modal select frame, and store it so the instance can be reused when needed.\n\t */\n\tinitFrame: function() {\n\t\tthis.frame = wp.media( {\n\t\t\tbutton: {\n\t\t\t\ttext: kitbuilder.translate( 'insert_media' )\n\t\t\t},\n\t\t\tstates: [\n\t\t\t\tnew wp.media.controller.Library( {\n\t\t\t\t\ttitle: kitbuilder.translate( 'insert_media' ),\n\t\t\t\t\tlibrary: wp.media.query( { type: 'image' } ),\n\t\t\t\t\tmultiple: false,\n\t\t\t\t\tdate: false\n\t\t\t\t} )\n\t\t\t]\n\t\t} );\n\n\t\t// When a file is selected, run a callback.\n\t\tthis.frame.on( 'insert select', _.bind( this.select, this ) );\n\t},\n\n\t/**\n\t * Callback handler for when an attachment is selected in the media modal.\n\t * Gets the selected image information, and sets it within the control.\n\t */\n\tselect: function() {\n\t\t// Get the attachment from the modal frame.\n\t\tvar attachment = this.frame.state().get( 'selection' ).first().toJSON();\n\n\t\tif ( attachment.url ) {\n\t\t\tthis.setValue( {\n\t\t\t\turl: attachment.url,\n\t\t\t\tid: attachment.id\n\t\t\t} );\n\n\t\t\tthis.render();\n\t\t}\n\t},\n\n\tonBeforeDestroy: function() {\n\t\tthis.$el.remove();\n\t}\n} );\n\nmodule.exports = ControlMediaItemView;\n",
    "var ControlMultipleBaseItemView = require( 'kitbuilder-views/controls/base-multiple' ),\n\tControlOrderItemView;\n\nControlOrderItemView = ControlMultipleBaseItemView.extend( {\n\tui: function() {\n\t\tvar ui = ControlMultipleBaseItemView.prototype.ui.apply( this, arguments );\n\n\t\tui.reverseOrderLabel = '.kitbuilder-control-order-label';\n\n\t\treturn ui;\n\t},\n\n\tchangeLabelTitle: function() {\n\t\tvar reverseOrder = this.getControlValue( 'reverse_order' );\n\n\t\tthis.ui.reverseOrderLabel.attr( 'title', kitbuilder.translate( reverseOrder ? 'asc' : 'desc' ) );\n\t},\n\n\tonRender: function() {\n\t\tControlMultipleBaseItemView.prototype.onRender.apply( this, arguments );\n\n\t\tthis.changeLabelTitle();\n\t},\n\n\tonInputChange: function() {\n\t\tthis.changeLabelTitle();\n\t}\n} );\n\nmodule.exports = ControlOrderItemView;\n",
    "var RepeaterRowView;\n\nRepeaterRowView = Marionette.CompositeView.extend( {\n\ttemplate: Marionette.TemplateCache.get( '#tmpl-kitbuilder-repeater-row' ),\n\n\tclassName: 'repeater-fields',\n\n\tui: {\n\t\tduplicateButton: '.kitbuilder-repeater-tool-duplicate',\n\t\teditButton: '.kitbuilder-repeater-tool-edit',\n\t\tremoveButton: '.kitbuilder-repeater-tool-remove',\n\t\titemTitle: '.kitbuilder-repeater-row-item-title'\n\t},\n\n\tbehaviors: {\n\t\tHandleInnerTabs: {\n\t\t\tbehaviorClass: require( 'kitbuilder-behaviors/inner-tabs' )\n\t\t}\n\t},\n\n\ttriggers: {\n\t\t'click @ui.removeButton': 'click:remove',\n\t\t'click @ui.duplicateButton': 'click:duplicate',\n\t\t'click @ui.itemTitle': 'click:edit'\n\t},\n\n\ttemplateHelpers: function() {\n\t\treturn {\n\t\t\titemIndex: this.getOption( 'itemIndex' )\n\t\t};\n\t},\n\n\tchildViewContainer: '.kitbuilder-repeater-row-controls',\n\n\tgetChildView: function( item ) {\n\t\tvar controlType = item.get( 'type' );\n\n\t\treturn kitbuilder.getControlView( controlType );\n\t},\n\n\tchildViewOptions: function() {\n\t\treturn {\n\t\t\telementSettingsModel: this.model\n\t\t};\n\t},\n\n\tcheckConditions: function() {\n\t\tvar self = this;\n\n\t\tself.collection.each( function( model ) {\n\t\t\tvar conditions = model.get( 'conditions' ),\n\t\t\t\tparentConditions = model.get( 'parent_conditions' ),\n\t\t\t\tisVisible = true;\n\n\t\t\tif ( conditions ) {\n\t\t\t\tisVisible = kitbuilder.conditions.check( conditions, self.model.attributes );\n\t\t\t}\n\n\t\t\tif ( parentConditions ) {\n\t\t\t\tisVisible = kitbuilder.conditions.check( parentConditions, self.getOption( 'parentModel' ).attributes );\n\t\t\t}\n\n\t\t\tvar child = self.children.findByModelCid( model.cid );\n\n\t\t\tchild.$el.toggleClass( 'kitbuilder-panel-hide', ! isVisible );\n\t\t} );\n\t},\n\n\tupdateIndex: function( newIndex ) {\n\t\tthis.itemIndex = newIndex;\n\t\tthis.setTitle();\n\t},\n\n\tsetTitle: function() {\n\t\tvar self = this,\n\t\t\ttitleField = self.getOption( 'titleField' ),\n\t\t\ttitle = '';\n\n\t\tif ( titleField ) {\n\t\t\tvar values = {};\n\n\t\t\tself.children.each( function( child ) {\n\t\t\t\tvalues[ child.model.get( 'name' ) ] = child.getControlValue();\n\t\t\t} );\n\n\t\t\ttitle = Marionette.TemplateCache.prototype.compileTemplate( titleField )( values );\n\t\t}\n\n\t\tif ( ! title ) {\n\t\t\ttitle = kitbuilder.translate( 'Item #{0}', [ self.getOption( 'itemIndex' ) ] );\n\t\t}\n\n\t\tself.ui.itemTitle.html( title );\n\t},\n\n\tinitialize: function( options ) {\n\t\tvar self = this;\n\n\t\tself.elementSettingsModel = options.elementSettingsModel;\n\n\t\tself.itemIndex = 0;\n\n\t\t// Collection for Controls list\n\t\tself.collection = new Backbone.Collection( options.controlFields );\n\n\t\tself.listenTo( self.model, 'change', self.checkConditions );\n\t\tself.listenTo( self.getOption( 'parentModel' ), 'change', self.checkConditions );\n\n\t\tif ( options.titleField ) {\n\t\t\tself.listenTo( self.model, 'change', self.setTitle );\n\t\t}\n\t},\n\n\tonRender: function() {\n\t\tthis.setTitle();\n\t\tthis.checkConditions();\n\t},\n\n\tonChildviewResponsiveSwitcherClick: function( childView, device ) {\n\t\tif ( 'desktop' === device ) {\n\t\t\tkitbuilder.getPanelView().getCurrentPageView().$el.toggleClass( 'kitbuilder-responsive-switchers-open' );\n\t\t}\n\t}\n} );\n\nmodule.exports = RepeaterRowView;\n",
    "var ControlBaseItemView = require( 'kitbuilder-views/controls/base' ),\n\tRepeaterRowView = require( 'kitbuilder-views/controls/repeater-row' ),\n\tControlRepeaterItemView;\n\nControlRepeaterItemView = ControlBaseItemView.extend( {\n\tui: {\n\t\tbtnAddRow: '.kitbuilder-repeater-add',\n\t\tfieldContainer: '.kitbuilder-repeater-fields'\n\t},\n\n\tevents: {\n\t\t'click @ui.btnAddRow': 'onButtonAddRowClick',\n\t\t'sortstart @ui.fieldContainer': 'onSortStart',\n\t\t'sortupdate @ui.fieldContainer': 'onSortUpdate',\n\t\t'sortstop @ui.fieldContainer': 'onSortStop'\n\t},\n\n\tchildView: RepeaterRowView,\n\n\tchildViewContainer: '.kitbuilder-repeater-fields',\n\n\ttemplateHelpers: function() {\n\t\treturn {\n\t\t\tdata: _.extend( {}, this.model.toJSON(), { controlValue: [] } )\n\t\t};\n\t},\n\n\tchildViewOptions: function() {\n\t\treturn {\n\t\t\tcontrolFields: this.model.get( 'fields' ),\n\t\t\ttitleField: this.model.get( 'title_field' ),\n\t\t\tparentModel: this.elementSettingsModel // For parentConditions in repeaterRow\n\t\t};\n\t},\n\n\tinitialize: function( options ) {\n\t\tControlBaseItemView.prototype.initialize.apply( this, arguments );\n\n\t\tthis.collection = this.elementSettingsModel.get( this.model.get( 'name' ) );\n\n\t\tthis.listenTo( this.collection, 'change', this.onRowControlChange );\n\t\tthis.listenTo( this.collection, 'add remove reset', this.onRowChange, this );\n\t},\n\n\taddRow: function( data, options ) {\n\t\tvar id = kitbuilder.helpers.getUniqueID();\n\n\t\tif ( data instanceof Backbone.Model ) {\n\t\t\tdata.set( '_id', id );\n\t\t} else {\n\t\t\tdata._id = id;\n\t\t}\n\n\t\treturn this.collection.add( data, options );\n\t},\n\n\teditRow: function( rowView ) {\n\t\tif ( this.currentEditableChild ) {\n\t\t\tvar currentEditable = this.currentEditableChild.getChildViewContainer( this.currentEditableChild );\n\t\t\tcurrentEditable.removeClass( 'editable' );\n\n\t\t\t// If the repeater contains TinyMCE editors, fire the `hide` trigger to hide floated toolbars\n\t\t\tcurrentEditable.find( '.kitbuilder-wp-editor' ).each( function() {\n\t\t\t\ttinymce.get( this.id ).fire( 'hide' );\n\t\t\t} );\n\t\t}\n\n\t\tif ( this.currentEditableChild === rowView ) {\n\t\t\tdelete this.currentEditableChild;\n\t\t\treturn;\n\t\t}\n\n\t\trowView.getChildViewContainer( rowView ).addClass( 'editable' );\n\n\t\tthis.currentEditableChild = rowView;\n\n\t\tthis.updateActiveRow();\n\t},\n\n\ttoggleMinRowsClass: function() {\n\t\tif ( ! this.model.get( 'prevent_empty' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.$el.toggleClass( 'kitbuilder-repeater-has-minimum-rows', 1 >= this.collection.length );\n\t},\n\n\tupdateActiveRow: function() {\n\t\tvar activeItemIndex = 0;\n\n\t\tif ( this.currentEditableChild ) {\n\t\t\tactiveItemIndex = this.currentEditableChild.itemIndex;\n\t\t}\n\n\t\tthis.setEditSetting( 'activeItemIndex', activeItemIndex );\n\t},\n\n\tupdateChildIndexes: function() {\n\t\tthis.children.each( _.bind( function( view ) {\n\t\t\tview.updateIndex( this.collection.indexOf( view.model ) + 1 );\n\t\t}, this ) );\n\t},\n\n\tonRender: function() {\n\t\tControlBaseItemView.prototype.onRender.apply( this, arguments );\n\n\t\tthis.ui.fieldContainer.sortable( { axis: 'y', handle: '.kitbuilder-repeater-row-tools' } );\n\n\t\tthis.toggleMinRowsClass();\n\t},\n\n\tonSortStart: function( event, ui ) {\n\t\tui.item.data( 'oldIndex', ui.item.index() );\n\t},\n\n\tonSortStop: function( event, ui ) {\n\t\t// Reload TinyMCE editors (if exist), it's a bug that TinyMCE content is missing after stop dragging\n\t\tui.item.find( '.kitbuilder-wp-editor' ).each( function() {\n\t\t\tvar editor = tinymce.get( this.id ),\n\t\t\t\tsettings = editor.settings;\n\n\t\t\tsettings.height = Backbone.$( editor.getContainer() ).height();\n\t\t\ttinymce.execCommand( 'mceRemoveEditor', true, this.id );\n\t\t\ttinymce.init( settings );\n\t\t} );\n\t},\n\n\tonSortUpdate: function( event, ui ) {\n\t\tvar oldIndex = ui.item.data( 'oldIndex' ),\n\t\t\tmodel = this.collection.at( oldIndex ),\n\t\t\tnewIndex = ui.item.index();\n\n\t\tthis.collection.remove( model );\n\n\t\tthis.addRow( model, { at: newIndex } );\n\t},\n\n\tonAddChild: function() {\n\t\tthis.updateChildIndexes();\n\t\tthis.updateActiveRow();\n\t},\n\n\tonRemoveChild: function( childView ) {\n\t\tif ( childView === this.currentEditableChild ) {\n\t\t\tdelete this.currentEditableChild;\n\t\t}\n\n\t\tthis.updateChildIndexes();\n\t\tthis.updateActiveRow();\n\t},\n\n\tonRowChange: function() {\n\t\tvar model = this.elementSettingsModel;\n\n\t\tmodel.changed = {};\n\n\t\tmodel.trigger( 'change', model, model._pending );\n\n\t\tthis.toggleMinRowsClass();\n\t},\n\n\tonRowControlChange: function( model ) {\n\t\tthis.elementSettingsModel.trigger( 'change', model, model._pending );\n\t},\n\n\tonButtonAddRowClick: function() {\n\t\tvar defaults = {};\n\t\t_.each( this.model.get( 'fields' ), function( field ) {\n\t\t\tdefaults[ field.name ] = field['default'];\n\t\t} );\n\n\t\tvar newModel = this.addRow( defaults ),\n\t\t\tnewChildView = this.children.findByModel( newModel );\n\n\t\tthis.editRow( newChildView );\n\t},\n\n\tonChildviewClickRemove: function( childView ) {\n\t\tchildView.model.destroy();\n\t},\n\n\tonChildviewClickDuplicate: function( childView ) {\n\t\tthis.addRow( childView.model.clone(), { at: childView.itemIndex } );\n\t},\n\n\tonChildviewClickEdit: function( childView ) {\n\t\tthis.editRow( childView );\n\t}\n} );\n\nmodule.exports = ControlRepeaterItemView;\n",
    "var ControlBaseItemView = require( 'kitbuilder-views/controls/base' ),\n\tControlSectionItemView;\n\nControlSectionItemView = ControlBaseItemView.extend( {\n\tui: function() {\n\t\tvar ui = ControlBaseItemView.prototype.ui.apply( this, arguments );\n\n\t\tui.heading = '.kitbuilder-panel-heading';\n\n\t\treturn ui;\n\t},\n\n\ttriggers: {\n\t\t'click': 'control:section:clicked'\n\t}\n} );\n\nmodule.exports = ControlSectionItemView;\n",
    "var ControlBaseItemView = require( 'kitbuilder-views/controls/base' ),\n\tControlSelect2ItemView;\n\nControlSelect2ItemView = ControlBaseItemView.extend( {\n\tgetSelect2Options: function() {\n\t\tvar placeholder = this.ui.select.children( 'option:first[value=\"\"]' ).text();\n\n\t\treturn {\n\t\t\tallowClear: true,\n\t\t\tplaceholder: placeholder\n\t\t};\n\t},\n\n\tonReady: function() {\n\t\tthis.ui.select.select2( this.getSelect2Options() );\n\t},\n\n\tonBeforeDestroy: function() {\n\t\tif ( this.ui.select.data( 'select2' ) ) {\n\t\t\tthis.ui.select.select2( 'destroy' );\n\t\t}\n\n\t\tthis.$el.remove();\n\t}\n} );\n\nmodule.exports = ControlSelect2ItemView;\n",
    "var ControlBaseUnitsItemView = require( 'kitbuilder-views/controls/base-units' ),\n\tControlSliderItemView;\n\nControlSliderItemView = ControlBaseUnitsItemView.extend( {\n\tui: function() {\n\t\tvar ui = ControlBaseUnitsItemView.prototype.ui.apply( this, arguments );\n\n\t\tui.slider = '.kitbuilder-slider';\n\n\t\treturn ui;\n\t},\n\n\tchildEvents: {\n\t\t'slide @ui.slider': 'onSlideChange'\n\t},\n\n\tinitSlider: function() {\n\t\tvar size = this.getControlValue( 'size' ),\n\t\t\tunitRange = this.getCurrentRange();\n\n\t\tthis.ui.input.attr( unitRange ).val( size );\n\n\t\tthis.ui.slider.slider( _.extend( {}, unitRange, { value: size, range: \"min\" } ) );\n\t},\n\n\tresetSize: function() {\n\t\tthis.setValue( 'size', '' );\n\n\t\tthis.initSlider();\n\t},\n\n\tonReady: function() {\n\t\tthis.initSlider();\n\t},\n\n\tonSlideChange: function( event, ui ) {\n\t\tthis.setValue( 'size', ui.value );\n\n\t\tthis.ui.input.val( ui.value );\n\t},\n\n\tonInputChange: function( event ) {\n\t\tvar dataChanged = event.currentTarget.dataset.setting;\n\n\t\tif ( 'size' === dataChanged ) {\n\t\t\tthis.ui.slider.slider( 'value', this.getControlValue( 'size' ) );\n\t\t} else if ( 'unit' === dataChanged ) {\n\t\t\tthis.resetSize();\n\t\t}\n\t},\n\n\tonBeforeDestroy: function() {\n\t\tthis.ui.slider.slider( 'destroy' );\n\t\tthis.$el.remove();\n\t}\n} );\n\nmodule.exports = ControlSliderItemView;\n",
    "var ControlBaseItemView = require( 'kitbuilder-views/controls/base' ),\n\tControlStructureItemView;\n\nControlStructureItemView = ControlBaseItemView.extend( {\n\tui: function() {\n\t\tvar ui = ControlBaseItemView.prototype.ui.apply( this, arguments );\n\n\t\tui.resetStructure = '.kitbuilder-control-structure-reset';\n\n\t\treturn ui;\n\t},\n\n\tchildEvents: {\n\t\t'click @ui.resetStructure': 'onResetStructureClick'\n\t},\n\n\ttemplateHelpers: function() {\n\t\tvar helpers = ControlBaseItemView.prototype.templateHelpers.apply( this, arguments );\n\n\t\thelpers.getMorePresets = _.bind( this.getMorePresets, this );\n\n\t\treturn helpers;\n\t},\n\n\tgetCurrentEditedSection: function() {\n\t\tvar editor = kitbuilder.getPanelView().getCurrentPageView();\n\n\t\treturn editor.getOption( 'editedElementView' );\n\t},\n\n\tgetMorePresets: function() {\n\t\tvar parsedStructure = kitbuilder.presetsFactory.getParsedStructure( this.getControlValue() );\n\n\t\treturn kitbuilder.presetsFactory.getPresets( parsedStructure.columnsCount );\n\t},\n\n\tonInputChange: function() {\n\t\tthis.getCurrentEditedSection().redefineLayout();\n\n\t\tthis.render();\n\t},\n\n\tonResetStructureClick: function() {\n\t\tthis.getCurrentEditedSection().resetColumnsCustomSize();\n\t}\n} );\n\nmodule.exports = ControlStructureItemView;\n",
    "var ControlBaseItemView = require( 'kitbuilder-views/controls/base' );\n\nmodule.exports = ControlBaseItemView.extend( {\n\tsetInputValue: function( input, value ) {\n\t\t// Make sure is string value\n\t\t// TODO: Remove in v1.6\n\t\tvalue = '' + value;\n\n\t\tthis.$( input ).prop( 'checked', this.model.get( 'return_value' ) === value );\n\t}\n} );\n",
    "var ControlBaseItemView = require( 'kitbuilder-views/controls/base' ),\n\tControlTabItemView;\n\nControlTabItemView = ControlBaseItemView.extend( {\n\ttriggers: {\n\t\t'click': 'control:tab:clicked'\n\t}\n} );\n\nmodule.exports = ControlTabItemView;\n",
    "var ControlMultipleBaseItemView = require( 'kitbuilder-views/controls/base-multiple' ),\n\tControlUrlItemView;\n\nControlUrlItemView = ControlMultipleBaseItemView.extend( {\n\tui: function() {\n\t\tvar ui = ControlMultipleBaseItemView.prototype.ui.apply( this, arguments );\n\n\t\tui.btnExternal = 'button.kitbuilder-control-url-target';\n\n\t\treturn ui;\n\t},\n\n\t// Override the base events\n\tchildEvents: {\n\t\t'click @ui.btnExternal': 'onExternalClicked'\n\t},\n\n\tonReady: function() {\n\t\tif ( this.getControlValue( 'is_external' ) ) {\n\t\t\tthis.ui.btnExternal.addClass( 'active' );\n\t\t}\n\t},\n\n\tonExternalClicked: function( event ) {\n\t\tevent.preventDefault();\n\n\t\tthis.ui.btnExternal.toggleClass( 'active' );\n\t\tthis.setValue( 'is_external', this.isExternal() );\n\t},\n\n\tisExternal: function() {\n\t\treturn this.ui.btnExternal.hasClass( 'active' );\n\t}\n} );\n\nmodule.exports = ControlUrlItemView;\n",
    "var ControlBaseItemView = require( 'kitbuilder-views/controls/base' ),\n\tControlWPWidgetItemView;\n\nControlWPWidgetItemView = ControlBaseItemView.extend( {\n\tui: function() {\n\t\tvar ui = ControlBaseItemView.prototype.ui.apply( this, arguments );\n\n\t\tui.form = 'form';\n\t\tui.loading = '.wp-widget-form-loading';\n\n\t\treturn ui;\n\t},\n\n\tevents: {\n\t\t'keyup @ui.form :input': 'onFormChanged',\n\t\t'change @ui.form :input': 'onFormChanged'\n\t},\n\n\tonFormChanged: function() {\n\t\tvar idBase = 'widget-' + this.model.get( 'id_base' ),\n\t\t\tsettings = this.ui.form.kitbuilderSerializeObject()[ idBase ].REPLACE_TO_ID;\n\n\t\tthis.setValue( settings );\n\t},\n\n\tonReady: function() {\n\t\tkitbuilder.ajax.send( 'editor_get_wp_widget_form', {\n\t\t\tdata: {\n\t\t\t\t// Fake Widget ID\n\t\t\t\tid: this.model.cid,\n\t\t\t\twidget_type: this.model.get( 'widget' ),\n\t\t\t\tdata: JSON.stringify( this.elementSettingsModel.toJSON() )\n\t\t\t},\n\t\t\tsuccess: _.bind( function( data ) {\n\t\t\t\tthis.ui.form.html( data );\n\t\t\t}, this )\n\t\t} );\n\t}\n} );\n\nmodule.exports = ControlWPWidgetItemView;\n",
    "var ControlBaseItemView = require( 'kitbuilder-views/controls/base' ),\n\tControlWysiwygItemView;\n\nControlWysiwygItemView = ControlBaseItemView.extend( {\n\tchildEvents: {\n\t\t'keyup textarea.kitbuilder-wp-editor': 'updateElementModel'\n\t},\n\n\t// List of buttons to move {buttonToMove: afterButton}\n\tbuttons: {\n\t\tmoveToAdvanced: {\n\t\t\tblockquote: 'removeformat',\n\t\t\talignleft: 'blockquote',\n\t\t\taligncenter: 'alignleft',\n\t\t\talignright: 'aligncenter'\n\t\t},\n\t\tmoveToBasic: {},\n\t\tremoveFromBasic: [ 'unlink', 'wp_more' ],\n\t\tremoveFromAdvanced: []\n\t},\n\n\tinitialize: function() {\n\t\tControlBaseItemView.prototype.initialize.apply( this, arguments );\n\n\t\tvar self = this;\n\n\t\tself.editorID = 'kitbuilderwpeditor' + self.cid;\n\n\t\t// Wait a cycle before initializing the editors.\n\t\t_.defer( function() {\n\t\t\t// Initialize QuickTags, and set as the default mode.\n\t\t\tquicktags( {\n\t\t\t\tbuttons: 'strong,em,del,link,img,close',\n\t\t\t\tid: self.editorID\n\t\t\t} );\n\n\t\t\tif ( kitbuilder.config.rich_editing_enabled ) {\n\t\t\t\tswitchEditors.go( self.editorID, 'tmce' );\n\t\t\t}\n\n\t\t\tdelete QTags.instances[ 0 ];\n\t\t} );\n\n\t\tif ( ! kitbuilder.config.rich_editing_enabled ) {\n\t\t\tself.$el.addClass( 'kitbuilder-rich-editing-disabled' );\n\n\t\t\treturn;\n\t\t}\n\n\t\tvar editorConfig = {\n\t\t\tid: self.editorID,\n\t\t\tselector: '#' + self.editorID,\n\t\t\tsetup: function( editor ) {\n\t\t\t\teditor.on( 'keyup change undo redo SetContent', function() {\n\t\t\t\t\teditor.save();\n\n\t\t\t\t\tself.setValue( editor.getContent() );\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\n\t\ttinyMCEPreInit.mceInit[ self.editorID ] = _.extend( _.clone( tinyMCEPreInit.mceInit.kitbuilderwpeditor ), editorConfig );\n\n\t\tif ( ! kitbuilder.config.tinymceHasCustomConfig ) {\n\t\t\tself.rearrangeButtons();\n\t\t}\n\t},\n\n\tattachElContent: function() {\n\t\tvar editorTemplate = kitbuilder.config.wp_editor.replace( /kitbuilderwpeditor/g, this.editorID ).replace( '%%EDITORCONTENT%%', this.getControlValue() );\n\n\t\tthis.$el.html( editorTemplate );\n\n\t\treturn this;\n\t},\n\n\tmoveButtons: function( buttonsToMove, from, to ) {\n\t\t_.each( buttonsToMove, function( afterButton, button ) {\n\t\t\tvar buttonIndex = from.indexOf( button ),\n\t\t\t\tafterButtonIndex = to.indexOf( afterButton );\n\n\t\t\tif ( -1 === buttonIndex ) {\n\t\t\t\tthrow new ReferenceError( 'Trying to move non-existing button `' + button + '`' );\n\t\t\t}\n\n\t\t\tif ( -1 === afterButtonIndex ) {\n\t\t\t\tthrow new ReferenceError( 'Trying to move button after non-existing button `' + afterButton + '`' );\n\t\t\t}\n\n\t\t\tfrom.splice( buttonIndex, 1 );\n\n\t\t\tto.splice( afterButtonIndex + 1, 0, button );\n\t\t} );\n\t},\n\n\trearrangeButtons: function() {\n\t\tvar editorProps = tinyMCEPreInit.mceInit[ this.editorID ],\n\t\t\teditorBasicToolbarButtons = editorProps.toolbar1.split( ',' ),\n\t\t\teditorAdvancedToolbarButtons = editorProps.toolbar2.split( ',' );\n\n\t\teditorBasicToolbarButtons = _.difference( editorBasicToolbarButtons, this.buttons.removeFromBasic );\n\n\t\teditorAdvancedToolbarButtons = _.difference( editorAdvancedToolbarButtons, this.buttons.removeFromAdvanced );\n\n\t\tthis.moveButtons( this.buttons.moveToBasic, editorAdvancedToolbarButtons, editorBasicToolbarButtons );\n\n\t\tthis.moveButtons( this.buttons.moveToAdvanced, editorBasicToolbarButtons, editorAdvancedToolbarButtons );\n\n\t\teditorProps.toolbar1 = editorBasicToolbarButtons.join( ',' );\n\t\teditorProps.toolbar2 = editorAdvancedToolbarButtons.join( ',' );\n\t},\n\n\tonBeforeDestroy: function() {\n\t\t// Remove TinyMCE and QuickTags instances\n\t\tdelete QTags.instances[ this.editorID ];\n\n\t\tif ( ! kitbuilder.config.rich_editing_enabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\ttinymce.EditorManager.execCommand( 'mceRemoveEditor', true, this.editorID );\n\n\t\t// Cleanup PreInit data\n\t\tdelete tinyMCEPreInit.mceInit[ this.editorID ];\n\t\tdelete tinyMCEPreInit.qtInit[ this.editorID ];\n\t}\n} );\n\nmodule.exports = ControlWysiwygItemView;\n",
    "var ElementEmptyView;\n\nElementEmptyView = Marionette.ItemView.extend( {\n\ttemplate: '#tmpl-kitbuilder-empty-preview',\n\n\tclassName: 'kitbuilder-empty-view',\n\n\tevents: {\n\t\t'click': 'onClickAdd'\n\t},\n\n\tonClickAdd: function() {\n\t\tkitbuilder.getPanelView().setPage( 'elements' );\n\t}\n} );\n\nmodule.exports = ElementEmptyView;\n",
    "var BaseSectionsContainerView = require( 'kitbuilder-views/base-sections-container' ),\n\tPreview;\n\nPreview = BaseSectionsContainerView.extend( {\n\ttemplate: Marionette.TemplateCache.get( '#tmpl-kitbuilder-preview' ),\n\n\tclassName: 'kitbuilder-inner',\n\n\tchildViewContainer: '.kitbuilder-section-wrap',\n\n\tui: {\n\t\taddSectionArea: '#kitbuilder-add-section',\n\t\taddNewSection: '#kitbuilder-add-new-section',\n\t\tclosePresetsIcon: '#kitbuilder-select-preset-close',\n\t\taddSectionButton: '#kitbuilder-add-section-button',\n\t\taddTemplateButton: '#kitbuilder-add-template-button',\n\t\tselectPreset: '#kitbuilder-select-preset',\n\t\tpresets: '.kitbuilder-preset'\n\t},\n\n\tevents: {\n\t\t'click @ui.addSectionButton': 'onAddSectionButtonClick',\n\t\t'click @ui.addTemplateButton': 'onAddTemplateButtonClick',\n\t\t'click @ui.closePresetsIcon': 'closeSelectPresets',\n\t\t'click @ui.presets': 'onPresetSelected'\n\t},\n\n\tcloseSelectPresets: function() {\n\t\tthis.ui.addNewSection.show();\n\t\tthis.ui.selectPreset.hide();\n\t},\n\n\tonAddSectionButtonClick: function() {\n\t\tthis.ui.addNewSection.hide();\n\t\tthis.ui.selectPreset.show();\n\t},\n\n\tonAddTemplateButtonClick: function() {\n\t\tkitbuilder.templates.startModal( function() {\n\t\t\tkitbuilder.templates.showTemplates();\n\t\t} );\n\t},\n\n\tonRender: function() {\n\t\tvar self = this;\n\n\t\tself.ui.addSectionArea.html5Droppable( {\n\t\t\taxis: [ 'vertical' ],\n\t\t\tgroups: [ 'kitbuilder-element' ],\n\t\t\tonDragEnter: function( side ) {\n\t\t\t\tself.ui.addSectionArea.attr( 'data-side', side );\n\t\t\t},\n\t\t\tonDragLeave: function() {\n\t\t\t\tself.ui.addSectionArea.removeAttr( 'data-side' );\n\t\t\t},\n\t\t\tonDropping: function() {\n\t\t\t\tself.addSection().addElementFromPanel();\n\t\t\t}\n\t\t} );\n\t},\n\n\tonPresetSelected: function( event ) {\n\t\tthis.closeSelectPresets();\n\n\t\tvar selectedStructure = event.currentTarget.dataset.structure,\n\t\t\tparsedStructure = kitbuilder.presetsFactory.getParsedStructure( selectedStructure ),\n\t\t\telements = [],\n\t\t\tloopIndex;\n\n\t\tfor ( loopIndex = 0; loopIndex < parsedStructure.columnsCount; loopIndex++ ) {\n\t\t\telements.push( {\n\t\t\t\tid: kitbuilder.helpers.getUniqueID(),\n\t\t\t\telType: 'column',\n\t\t\t\tsettings: {},\n\t\t\t\telements: []\n\t\t\t} );\n\t\t}\n\n\t\tvar newSection = this.addSection( { elements: elements } );\n\n\t\tnewSection.setStructure( selectedStructure );\n\t\tnewSection.redefineLayout();\n\t}\n} );\n\nmodule.exports = Preview;\n",
    "var BaseElementView = require( 'kitbuilder-views/base-element' ),\n\tSectionView;\n\nSectionView = BaseElementView.extend( {\n\ttemplate: Marionette.TemplateCache.get( '#tmpl-kitbuilder-element-section-content' ),\n\n\tclassName: function() {\n\t\tvar classes = BaseElementView.prototype.className.apply( this, arguments ),\n\t\t\ttype = this.isInner() ? 'inner' : 'top';\n\n\t\treturn classes + ' kitbuilder-section kitbuilder-' + type + '-section';\n\t},\n\n\ttagName: 'section',\n\n\tchildViewContainer: '> .kitbuilder-container > .kitbuilder-row',\n\n\tbehaviors: {\n\t\tSortable: {\n\t\t\tbehaviorClass: require( 'kitbuilder-behaviors/sortable' ),\n\t\t\telChildType: 'column'\n\t\t},\n\t\tHandleDuplicate: {\n\t\t\tbehaviorClass: require( 'kitbuilder-behaviors/handle-duplicate' )\n\t\t},\n\t\tHandleAddMode: {\n\t\t\tbehaviorClass: require( 'kitbuilder-behaviors/duplicate' )\n\t\t}\n\t},\n\n\tui: function() {\n\t\tvar ui = BaseElementView.prototype.ui.apply( this, arguments );\n\n\t\tui.duplicateButton = '.kitbuilder-editor-section-settings-list .kitbuilder-editor-element-duplicate';\n\t\tui.removeButton = '.kitbuilder-editor-section-settings-list .kitbuilder-editor-element-remove';\n\t\tui.saveButton = '.kitbuilder-editor-section-settings-list .kitbuilder-editor-element-save';\n\t\tui.triggerButton = '.kitbuilder-editor-section-settings-list .kitbuilder-editor-element-trigger';\n        ui.editButton = '.kitbuilder-editor-section-settings-list .kitbuilder-editor-element-edit-trigger';\n\n\t\treturn ui;\n\t},\n\n\tevents: function() {\n\t\tvar events = BaseElementView.prototype.events.apply( this, arguments );\n\n\t\tevents[ 'click @ui.editButton' ] = 'onClickEdit';\n\n\t\treturn events;\n\t},\n\n\tinitialize: function() {\n\t\tBaseElementView.prototype.initialize.apply( this, arguments );\n\n\t\tthis.listenTo( this.collection, 'add remove reset', this._checkIsFull )\n\t\t\t.listenTo( this.model, 'change:settings:structure', this.onStructureChanged );\n\t},\n\n\taddEmptyColumn: function() {\n\t\tthis.addChildModel( {\n\t\t\tid: kitbuilder.helpers.getUniqueID(),\n\t\t\telType: 'column',\n\t\t\tsettings: {},\n\t\t\telements: []\n\t\t} );\n\t},\n\n\taddChildModel: function( model, options ) {\n\t\tvar isModelInstance = model instanceof Backbone.Model,\n\t\t\tisInner = this.isInner();\n\n\t\tif ( isModelInstance ) {\n\t\t\tmodel.set( 'isInner', isInner );\n\t\t} else {\n\t\t\tmodel.isInner = isInner;\n\t\t}\n\n\t\treturn BaseElementView.prototype.addChildModel.apply( this, arguments );\n\t},\n\n\tgetSortableOptions: function() {\n\t\tvar sectionConnectClass = this.isInner() ? '.kitbuilder-inner-section' : '.kitbuilder-top-section';\n\n\t\treturn {\n\t\t\tconnectWith: sectionConnectClass + ' > .kitbuilder-container > .kitbuilder-row',\n\t\t\thandle: '> .kitbuilder-element-overlay .kitbuilder-editor-column-settings-list .kitbuilder-editor-element-trigger',\n\t\t\titems: '> .kitbuilder-column'\n\t\t};\n\t},\n\n\tgetColumnPercentSize: function( element, size ) {\n\t\treturn size / element.parent().width() * 100;\n\t},\n\n\tgetDefaultStructure: function() {\n\t\treturn this.collection.length + '0';\n\t},\n\n\tgetStructure: function() {\n\t\treturn this.model.getSetting( 'structure' );\n\t},\n\n\tsetStructure: function( structure ) {\n\t\tvar parsedStructure = kitbuilder.presetsFactory.getParsedStructure( structure );\n\n\t\tif ( +parsedStructure.columnsCount !== this.collection.length ) {\n\t\t\tthrow new TypeError( 'The provided structure doesn\\'t match the columns count.' );\n\t\t}\n\n\t\tthis.model.setSetting( 'structure', structure, true );\n\t},\n\n\tredefineLayout: function() {\n\t\tvar preset = kitbuilder.presetsFactory.getPresetByStructure( this.getStructure() );\n\n\t\tthis.collection.each( function( model, index ) {\n\t\t\tmodel.setSetting( '_column_size', preset.preset[ index ] );\n\t\t\tmodel.setSetting( '_inline_size', null );\n\t\t} );\n\n\t\tthis.children.invoke( 'changeSizeUI' );\n\t},\n\n\tresetLayout: function() {\n\t\tthis.setStructure( this.getDefaultStructure() );\n\t},\n\n\tresetColumnsCustomSize: function() {\n\t\tthis.collection.each( function( model ) {\n\t\t\tmodel.setSetting( '_inline_size', null );\n\t\t} );\n\n\t\tthis.children.invoke( 'changeSizeUI' );\n\t},\n\n\tisCollectionFilled: function() {\n\t\tvar MAX_SIZE = 10,\n\t\t\tcolumnsCount = this.collection.length;\n\n\t\treturn ( MAX_SIZE <= columnsCount );\n\t},\n\n\t_checkIsFull: function() {\n\t\tthis.$el.toggleClass( 'kitbuilder-section-filled', this.isCollectionFilled() );\n\t},\n\n\t_checkIsEmpty: function() {\n\t\tif ( ! this.collection.length ) {\n\t\t\tthis.addEmptyColumn();\n\t\t}\n\t},\n\n\tgetNextColumn: function( columnView ) {\n\t\tvar modelIndex = this.collection.indexOf( columnView.model ),\n\t\t\tnextModel = this.collection.at( modelIndex + 1 );\n\n\t\treturn this.children.findByModelCid( nextModel.cid );\n\t},\n\n\tonBeforeRender: function() {\n\t\tthis._checkIsEmpty();\n\t},\n\n\tonRender: function() {\n\t\tthis._checkIsFull();\n\t},\n\n\tonAddChild: function() {\n\t\tif ( ! this.isBuffering ) {\n\t\t\t// Reset the layout just when we have really add/remove element.\n\t\t\tthis.resetLayout();\n\t\t}\n\t},\n\n\tonRemoveChild: function() {\n\t\tif ( ! this.isManualRemoving ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If it's the last column, please create new one.\n\t\tthis._checkIsEmpty();\n\n\t\tthis.resetLayout();\n\t},\n\n\tonChildviewRequestResizeStart: function( childView ) {\n\t\tvar nextChildView = this.getNextColumn( childView );\n\n\t\tif ( ! nextChildView ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar $iframes = childView.$el.find( 'iframe' ).add( nextChildView.$el.find( 'iframe' ) );\n\n\t\tkitbuilder.helpers.disableElementEvents( $iframes );\n\t},\n\n\tonChildviewRequestResizeStop: function( childView ) {\n\t\tvar nextChildView = this.getNextColumn( childView );\n\n\t\tif ( ! nextChildView ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar $iframes = childView.$el.find( 'iframe' ).add( nextChildView.$el.find( 'iframe' ) );\n\n\t\tkitbuilder.helpers.enableElementEvents( $iframes );\n\t},\n\n\tonChildviewRequestResize: function( childView, ui ) {\n\t\t// Get current column details\n\t\tvar currentSize = childView.model.getSetting( '_inline_size' );\n\n\t\tif ( ! currentSize ) {\n\t\t\tcurrentSize = this.getColumnPercentSize( ui.element, ui.originalSize.width );\n\t\t}\n\n\t\tvar newSize = this.getColumnPercentSize( ui.element, ui.size.width ),\n\t\t\tdifference = newSize - currentSize;\n\n\t\tui.element.css( {\n\t\t\t//width: currentSize + '%',\n\t\t\twidth: '',\n\t\t\tleft: 'initial' // Fix for RTL resizing\n\t\t} );\n\n\t\t// Get next column details\n\t\tvar nextChildView = this.getNextColumn( childView );\n\n\t\tif ( ! nextChildView ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar MINIMUM_COLUMN_SIZE = 10,\n\n\t\t\t$nextElement = nextChildView.$el,\n\t\t\tnextElementCurrentSize = this.getColumnPercentSize( $nextElement, $nextElement.width() ),\n\t\t\tnextElementNewSize = nextElementCurrentSize - difference;\n\n\t\tif ( newSize < MINIMUM_COLUMN_SIZE || newSize > 100 || ! difference || nextElementNewSize < MINIMUM_COLUMN_SIZE || nextElementNewSize > 100 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Set the current column size\n\t\tchildView.model.setSetting( '_inline_size', newSize.toFixed( 3 ) );\n\t\tchildView.changeSizeUI();\n\n\t\t// Set the next column size\n\t\tnextChildView.model.setSetting( '_inline_size', nextElementNewSize.toFixed( 3 ) );\n\t\tnextChildView.changeSizeUI();\n\t},\n\n\tonStructureChanged: function() {\n\t\tthis.redefineLayout();\n\t}\n} );\n\nmodule.exports = SectionView;\n",
    "var BaseElementView = require( 'kitbuilder-views/base-element' ),\n\tWidgetView;\n\nWidgetView = BaseElementView.extend( {\n\t_templateType: null,\n\n\tgetTemplate: function() {\n\t\tvar editModel = this.getEditModel();\n\n\t\tif ( 'remote' !== this.getTemplateType() ) {\n\t\t\treturn Marionette.TemplateCache.get( '#tmpl-kitbuilder-' + editModel.get( 'elType' ) + '-' + editModel.get( 'widgetType' ) + '-content' );\n\t\t} else {\n\t\t\treturn _.template( '' );\n\t\t}\n\t},\n\n\tclassName: function() {\n\t\treturn BaseElementView.prototype.className.apply( this, arguments ) + ' kitbuilder-widget';\n\t},\n\n\tevents: function() {\n\t\tvar events = BaseElementView.prototype.events.apply( this, arguments );\n\n\t\tevents.click = 'onClickEdit';\n\n\t\treturn events;\n\t},\n\n\tinitialize: function() {\n\t\tBaseElementView.prototype.initialize.apply( this, arguments );\n\n\t\tvar editModel = this.getEditModel();\n\n\t\teditModel.on( {\n\t\t\t'before:remote:render': _.bind( this.onModelBeforeRemoteRender, this ),\n\t\t\t'remote:render': _.bind( this.onModelRemoteRender, this )\n\t\t} );\n\n\t\tif ( 'remote' === this.getTemplateType() && ! this.getEditModel().getHtmlCache() ) {\n\t\t\teditModel.renderRemoteServer();\n\t\t}\n\t},\n\n\trender: function() {\n\t\tif ( this.model.isRemoteRequestActive() ) {\n\t\t\tthis.handleEmptyWidget();\n\n\t\t\tthis.$el.addClass( 'kitbuilder-element' );\n\n\t\t\treturn;\n\t\t}\n\n\t\tMarionette.CompositeView.prototype.render.apply( this, arguments );\n\t},\n\n\thandleEmptyWidget: function() {\n\t\t// TODO: REMOVE THIS !!\n\t\t// TEMP CODING !!\n\t\tthis.$el\n\t\t\t.addClass( 'kitbuilder-widget-empty' )\n\t\t\t.append( '<i class=\"kitbuilder-widget-empty-icon ' + this.getEditModel().getIcon() + '\"></i>' );\n\t},\n\n\tgetTemplateType: function() {\n\t\tif ( null === this._templateType ) {\n\t\t\tvar editModel = this.getEditModel(),\n\t\t\t\t$template = Backbone.$( '#tmpl-kitbuilder-' + editModel.get( 'elType' ) + '-' + editModel.get( 'widgetType' ) + '-content' );\n\n\t\t\tthis._templateType = $template.length ? 'js' : 'remote';\n\t\t}\n\n\t\treturn this._templateType;\n\t},\n\n\tonModelBeforeRemoteRender: function() {\n\t\tthis.$el.addClass( 'kitbuilder-loading' );\n\t},\n\n\tonBeforeDestroy: function() {\n\t\t// Remove old style from the DOM.\n\t\tkitbuilder.$previewContents.find( '#kitbuilder-style-' + this.model.cid ).remove();\n\t},\n\n\tonModelRemoteRender: function() {\n\t\tif ( this.isDestroyed ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.$el.removeClass( 'kitbuilder-loading' );\n\t\tthis.render();\n\t},\n\n\tgetHTMLContent: function( html ) {\n\t\tvar htmlCache = this.getEditModel().getHtmlCache();\n\n\t\treturn htmlCache || html;\n\t},\n\n\tattachElContent: function( html ) {\n\t\tvar htmlContent = this.getHTMLContent( html ),\n\t\t\tel = this.$el[0];\n\n\t\t_.defer( function() {\n\t\t\tkitbuilderFrontend.getScopeWindow().jQuery( el ).html( htmlContent );\n\t\t} );\n\n\t\treturn this;\n\t},\n\n\tonClickEdit: function( event ) {\n\t\tif ( Backbone.$( event.target ).closest( '.kitbuilder-event-save-default' ).length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tBaseElementView.prototype.onClickEdit.apply( this, arguments );\n\t},\n\n\tonRender: function() {\n        var self = this,\n\t        editModel = self.getEditModel(),\n\t        skinType = editModel.getSetting( '_skin' ) || 'default';\n\n        self.$el\n\t        .attr( 'data-element_type', editModel.get( 'widgetType' ) + '.' + skinType )\n            .removeClass( 'kitbuilder-widget-empty' )\n\t        .addClass( 'kitbuilder-widget-' + editModel.get( 'widgetType' ) + ' kitbuilder-widget-can-edit' )\n            .children( '.kitbuilder-widget-empty-icon' )\n            .remove();\n\n\t\t// TODO: Find better way to detect if all images are loaded\n\t\t_.defer( function() {\n\t\t\tself.$el.imagesLoaded().always( function() {\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\tif ( 1 > self.$el.height() ) {\n\t\t\t\t\t\tself.handleEmptyWidget();\n\t\t\t\t\t}\n\t\t\t\t}, 200 );\n\t\t\t\t// Is element empty?\n\t\t\t} );\n\t\t} );\n\t}\n} );\n\nmodule.exports = WidgetView;\n",
    "'use strict';\n\n/**\n * Handles managing all events for whatever you plug it into. Priorities for hooks are based on lowest to highest in\n * that, lowest priority hooks are fired first.\n */\nvar EventManager = function() {\n\tvar slice = Array.prototype.slice,\n\t\tMethodsAvailable;\n\n\t/**\n\t * Contains the hooks that get registered with this EventManager. The array for storage utilizes a \"flat\"\n\t * object literal such that looking up the hook utilizes the native object literal hash.\n\t */\n\tvar STORAGE = {\n\t\tactions: {},\n\t\tfilters: {}\n\t};\n\n\t/**\n\t * Removes the specified hook by resetting the value of it.\n\t *\n\t * @param type Type of hook, either 'actions' or 'filters'\n\t * @param hook The hook (namespace.identifier) to remove\n\t *\n\t * @private\n\t */\n\tfunction _removeHook( type, hook, callback, context ) {\n\t\tvar handlers, handler, i;\n\n\t\tif ( ! STORAGE[ type ][ hook ] ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( ! callback ) {\n\t\t\tSTORAGE[ type ][ hook ] = [];\n\t\t} else {\n\t\t\thandlers = STORAGE[ type ][ hook ];\n\t\t\tif ( ! context ) {\n\t\t\t\tfor ( i = handlers.length; i--; ) {\n\t\t\t\t\tif ( handlers[ i ].callback === callback ) {\n\t\t\t\t\t\thandlers.splice( i, 1 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( i = handlers.length; i--; ) {\n\t\t\t\t\thandler = handlers[ i ];\n\t\t\t\t\tif ( handler.callback === callback && handler.context === context ) {\n\t\t\t\t\t\thandlers.splice( i, 1 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Use an insert sort for keeping our hooks organized based on priority. This function is ridiculously faster\n\t * than bubble sort, etc: http://jsperf.com/javascript-sort\n\t *\n\t * @param hooks The custom array containing all of the appropriate hooks to perform an insert sort on.\n\t * @private\n\t */\n\tfunction _hookInsertSort( hooks ) {\n\t\tvar tmpHook, j, prevHook;\n\t\tfor ( var i = 1, len = hooks.length; i < len; i++ ) {\n\t\t\ttmpHook = hooks[ i ];\n\t\t\tj = i;\n\t\t\twhile ( ( prevHook = hooks[ j - 1 ] ) && prevHook.priority > tmpHook.priority ) {\n\t\t\t\thooks[ j ] = hooks[ j - 1 ];\n\t\t\t\t--j;\n\t\t\t}\n\t\t\thooks[ j ] = tmpHook;\n\t\t}\n\n\t\treturn hooks;\n\t}\n\n\t/**\n\t * Adds the hook to the appropriate storage container\n\t *\n\t * @param type 'actions' or 'filters'\n\t * @param hook The hook (namespace.identifier) to add to our event manager\n\t * @param callback The function that will be called when the hook is executed.\n\t * @param priority The priority of this hook. Must be an integer.\n\t * @param [context] A value to be used for this\n\t * @private\n\t */\n\tfunction _addHook( type, hook, callback, priority, context ) {\n\t\tvar hookObject = {\n\t\t\tcallback: callback,\n\t\t\tpriority: priority,\n\t\t\tcontext: context\n\t\t};\n\n\t\t// Utilize 'prop itself' : http://jsperf.com/hasownproperty-vs-in-vs-undefined/19\n\t\tvar hooks = STORAGE[ type ][ hook ];\n\t\tif ( hooks ) {\n\t\t\t// TEMP FIX BUG\n\t\t\tvar hasSameCallback = false;\n\t\t\tjQuery.each( hooks, function() {\n\t\t\t\tif ( this.callback === callback ) {\n\t\t\t\t\thasSameCallback = true;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tif ( hasSameCallback ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// END TEMP FIX BUG\n\n\t\t\thooks.push( hookObject );\n\t\t\thooks = _hookInsertSort( hooks );\n\t\t} else {\n\t\t\thooks = [ hookObject ];\n\t\t}\n\n\t\tSTORAGE[ type ][ hook ] = hooks;\n\t}\n\n\t/**\n\t * Runs the specified hook. If it is an action, the value is not modified but if it is a filter, it is.\n\t *\n\t * @param type 'actions' or 'filters'\n\t * @param hook The hook ( namespace.identifier ) to be ran.\n\t * @param args Arguments to pass to the action/filter. If it's a filter, args is actually a single parameter.\n\t * @private\n\t */\n\tfunction _runHook( type, hook, args ) {\n\t\tvar handlers = STORAGE[ type ][ hook ], i, len;\n\n\t\tif ( ! handlers ) {\n\t\t\treturn ( 'filters' === type ) ? args[ 0 ] : false;\n\t\t}\n\n\t\tlen = handlers.length;\n\t\tif ( 'filters' === type ) {\n\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\targs[ 0 ] = handlers[ i ].callback.apply( handlers[ i ].context, args );\n\t\t\t}\n\t\t} else {\n\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\thandlers[ i ].callback.apply( handlers[ i ].context, args );\n\t\t\t}\n\t\t}\n\n\t\treturn ( 'filters' === type ) ? args[ 0 ] : true;\n\t}\n\n\t/**\n\t * Adds an action to the event manager.\n\t *\n\t * @param action Must contain namespace.identifier\n\t * @param callback Must be a valid callback function before this action is added\n\t * @param [priority=10] Used to control when the function is executed in relation to other callbacks bound to the same hook\n\t * @param [context] Supply a value to be used for this\n\t */\n\tfunction addAction( action, callback, priority, context ) {\n\t\tif ( 'string' === typeof action && 'function' === typeof callback ) {\n\t\t\tpriority = parseInt( ( priority || 10 ), 10 );\n\t\t\t_addHook( 'actions', action, callback, priority, context );\n\t\t}\n\n\t\treturn MethodsAvailable;\n\t}\n\n\t/**\n\t * Performs an action if it exists. You can pass as many arguments as you want to this function; the only rule is\n\t * that the first argument must always be the action.\n\t */\n\tfunction doAction( /* action, arg1, arg2, ... */ ) {\n\t\tvar args = slice.call( arguments );\n\t\tvar action = args.shift();\n\n\t\tif ( 'string' === typeof action ) {\n\t\t\t_runHook( 'actions', action, args );\n\t\t}\n\n\t\treturn MethodsAvailable;\n\t}\n\n\t/**\n\t * Removes the specified action if it contains a namespace.identifier & exists.\n\t *\n\t * @param action The action to remove\n\t * @param [callback] Callback function to remove\n\t */\n\tfunction removeAction( action, callback ) {\n\t\tif ( 'string' === typeof action ) {\n\t\t\t_removeHook( 'actions', action, callback );\n\t\t}\n\n\t\treturn MethodsAvailable;\n\t}\n\n\t/**\n\t * Adds a filter to the event manager.\n\t *\n\t * @param filter Must contain namespace.identifier\n\t * @param callback Must be a valid callback function before this action is added\n\t * @param [priority=10] Used to control when the function is executed in relation to other callbacks bound to the same hook\n\t * @param [context] Supply a value to be used for this\n\t */\n\tfunction addFilter( filter, callback, priority, context ) {\n\t\tif ( 'string' === typeof filter && 'function' === typeof callback ) {\n\t\t\tpriority = parseInt( ( priority || 10 ), 10 );\n\t\t\t_addHook( 'filters', filter, callback, priority, context );\n\t\t}\n\n\t\treturn MethodsAvailable;\n\t}\n\n\t/**\n\t * Performs a filter if it exists. You should only ever pass 1 argument to be filtered. The only rule is that\n\t * the first argument must always be the filter.\n\t */\n\tfunction applyFilters( /* filter, filtered arg, arg2, ... */ ) {\n\t\tvar args = slice.call( arguments );\n\t\tvar filter = args.shift();\n\n\t\tif ( 'string' === typeof filter ) {\n\t\t\treturn _runHook( 'filters', filter, args );\n\t\t}\n\n\t\treturn MethodsAvailable;\n\t}\n\n\t/**\n\t * Removes the specified filter if it contains a namespace.identifier & exists.\n\t *\n\t * @param filter The action to remove\n\t * @param [callback] Callback function to remove\n\t */\n\tfunction removeFilter( filter, callback ) {\n\t\tif ( 'string' === typeof filter ) {\n\t\t\t_removeHook( 'filters', filter, callback );\n\t\t}\n\n\t\treturn MethodsAvailable;\n\t}\n\n\t/**\n\t * Maintain a reference to the object scope so our public methods never get confusing.\n\t */\n\tMethodsAvailable = {\n\t\tremoveFilter: removeFilter,\n\t\tapplyFilters: applyFilters,\n\t\taddFilter: addFilter,\n\t\tremoveAction: removeAction,\n\t\tdoAction: doAction,\n\t\taddAction: addAction\n\t};\n\n\t// return all of the publicly available methods\n\treturn MethodsAvailable;\n};\n\nmodule.exports = EventManager;\n",
    "var Module = function() {\n\tvar $ = jQuery,\n\t\tinstanceParams = arguments,\n\t\tself = this,\n\t\tsettings,\n\t\tevents = {};\n\n\tvar ensureClosureMethods = function() {\n\t\t$.each( self, function( methodName ) {\n\t\t\tvar oldMethod = self[ methodName ];\n\n\t\t\tif ( 'function' !== typeof oldMethod ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tself[ methodName ] = function() {\n\t\t\t\treturn oldMethod.apply( self, arguments );\n\t\t\t};\n\t\t});\n\t};\n\n\tvar initSettings = function() {\n\t\tsettings = self.getDefaultSettings();\n\n\t\tvar instanceSettings = instanceParams[0];\n\n\t\tif ( instanceSettings ) {\n\t\t\t$.extend( settings, instanceSettings );\n\t\t}\n\t};\n\n\tvar init = function() {\n\t\tself.__construct.apply( self, instanceParams );\n\n\t\tensureClosureMethods();\n\n\t\tinitSettings();\n\n\t\tself.trigger( 'init' );\n\t};\n\n\tthis.getItems = function( items, itemKey ) {\n\t\tif ( itemKey ) {\n\t\t\tvar keyStack = itemKey.split( '.' ),\n\t\t\t\tcurrentKey = keyStack.splice( 0, 1 );\n\n\t\t\tif ( ! keyStack.length ) {\n\t\t\t\treturn items[ currentKey ];\n\t\t\t}\n\n\t\t\tif ( ! items[ currentKey ] ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn this.getItems(  items[ currentKey ], keyStack.join( '.' ) );\n\t\t}\n\n\t\treturn items;\n\t};\n\n\tthis.getSettings = function( setting ) {\n\t\treturn this.getItems( settings, setting );\n\t};\n\n\tthis.setSettings = function( settingKey, value, settingsContainer ) {\n\t\tif ( ! settingsContainer ) {\n\t\t\tsettingsContainer = settings;\n\t\t}\n\n\t\tif ( 'object' === typeof settingKey ) {\n\t\t\t$.extend( settingsContainer, settingKey );\n\n\t\t\treturn self;\n\t\t}\n\n\t\tvar keyStack = settingKey.split( '.' ),\n\t\t\tcurrentKey = keyStack.splice( 0, 1 );\n\n\t\tif ( ! keyStack.length ) {\n\t\t\tsettingsContainer[ currentKey ] = value;\n\n\t\t\treturn self;\n\t\t}\n\n\t\tif ( ! settingsContainer[ currentKey ] ) {\n\t\t\tsettingsContainer[ currentKey ] = {};\n\t\t}\n\n\t\treturn self.setSettings( keyStack.join( '.' ), value, settingsContainer[ currentKey ] );\n\t};\n\n\tthis.on = function( eventName, callback ) {\n\t\tif ( ! events[ eventName ] ) {\n\t\t\tevents[ eventName ] = [];\n\t\t}\n\n\t\tevents[ eventName ].push( callback );\n\n\t\treturn self;\n\t};\n\n\tthis.off = function( eventName, callback ) {\n\t\tif ( ! events[ eventName ] ) {\n\t\t\treturn self;\n\t\t}\n\n\t\tif ( ! callback ) {\n\t\t\tdelete events[ eventName ];\n\n\t\t\treturn self;\n\t\t}\n\n\t\tvar callbackIndex = events[ eventName ].indexOf( callback );\n\n\t\tif ( -1 !== callbackIndex ) {\n\t\t\tdelete events[ eventName ][ callbackIndex ];\n\t\t}\n\n\t\treturn self;\n\t};\n\n\tthis.trigger = function( eventName ) {\n\t\tvar methodName = 'on' + eventName[ 0 ].toUpperCase() + eventName.slice( 1 ),\n\t\t\tparams = Array.prototype.slice.call( arguments, 1 );\n\n\t\tif ( self[ methodName ] ) {\n\t\t\tself[ methodName ].apply( self, params );\n\t\t}\n\n\t\tvar callbacks = events[ eventName ];\n\n\t\tif ( ! callbacks ) {\n\t\t\treturn;\n\t\t}\n\n\t\t$.each( callbacks, function( index, callback ) {\n\t\t\tcallback.apply( self, params );\n\t\t} );\n\t};\n\n\tinit();\n};\n\nModule.prototype.__construct = function() {};\n\nModule.prototype.getDefaultSettings = function() {\n\treturn {};\n};\n\nModule.extend = function( properties ) {\n\tvar $ = jQuery,\n\t\tparent = this;\n\n\tvar child = function() {\n\t\treturn parent.apply( this, arguments );\n\t};\n\n\t$.extend( child, parent );\n\n\tchild.prototype = Object.create( $.extend( {}, parent.prototype, properties ) );\n\n\tchild.prototype.constructor = child;\n\n\tchild.__super__ = parent.prototype;\n\n\treturn child;\n};\n\nmodule.exports = Module;\n",
    "var Module = require( './module' ),\n\tViewModule;\n\nViewModule = Module.extend( {\n\telements: null,\n\n\tgetDefaultElements: function() {\n\t\treturn {};\n\t},\n\n\tbindEvents: function() {},\n\n\tonInit: function() {\n\t\tthis.initElements();\n\n\t\tthis.bindEvents();\n\t},\n\n\tinitElements: function() {\n\t\tthis.elements = this.getDefaultElements();\n\t}\n} );\n\nmodule.exports = ViewModule;\n"
  ]
}